---
title: Migrazione di .NET Core da project.json
description: Informazioni su come eseguire la migrazione di un progetto .NET Core meno recente usando project.json
ms.date: 07/19/2017
ms.custom: seodec18
ms.openlocfilehash: 6334f06a998054cfaf766654dda59d87f5d23ed8
ms.sourcegitcommit: 6f28b709592503d27077b16fff2e2eacca569992
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 08/28/2019
ms.locfileid: "70105301"
---
# <a name="migrating-net-core-projects-from-projectjson"></a><span data-ttu-id="1f93f-103">Migrazione di progetti .NET Core da project.json</span><span class="sxs-lookup"><span data-stu-id="1f93f-103">Migrating .NET Core projects from project.json</span></span>

<span data-ttu-id="1f93f-104">In questo documento vengono illustrati gli scenari di migrazione per progetti .NET Core, in particolare vengono esaminati i tre scenari di migrazione seguenti:</span><span class="sxs-lookup"><span data-stu-id="1f93f-104">This document will cover migration scenarios for .NET Core projects and will go over the following three migration scenarios:</span></span>

1. [<span data-ttu-id="1f93f-105">Migrazione da uno schema valido più recente di *project.json* a *csproj*</span><span class="sxs-lookup"><span data-stu-id="1f93f-105">Migration from a valid latest schema of *project.json* to *csproj*</span></span>](#migration-from-projectjson-to-csproj)
2. [<span data-ttu-id="1f93f-106">Migrazione da DNX a csproj</span><span class="sxs-lookup"><span data-stu-id="1f93f-106">Migration from DNX to csproj</span></span>](#migration-from-dnx-to-csproj)
3. [<span data-ttu-id="1f93f-107">Migrazione da RC3 e progetti csproj .NET Core precedenti al formato finale</span><span class="sxs-lookup"><span data-stu-id="1f93f-107">Migration from RC3 and previous .NET Core csproj projects to the final format</span></span>](#migration-from-earlier-net-core-csproj-formats-to-rtm-csproj)

<span data-ttu-id="1f93f-108">Questo documento è applicabile solo ai progetti .NET Core precedenti che usano ancora project.json.</span><span class="sxs-lookup"><span data-stu-id="1f93f-108">This document is only applicable to older .NET Core projects that still use project.json.</span></span> <span data-ttu-id="1f93f-109">Non è applicabile per la migrazione da .NET Framework a .NET Core.</span><span class="sxs-lookup"><span data-stu-id="1f93f-109">It is not applicable for migrating from .NET Framework to .NET Core.</span></span>

## <a name="migration-from-projectjson-to-csproj"></a><span data-ttu-id="1f93f-110">Migrazione da project.json a csproj</span><span class="sxs-lookup"><span data-stu-id="1f93f-110">Migration from project.json to csproj</span></span>

<span data-ttu-id="1f93f-111">La migrazione dal formato con estensione *project.json* a quello con estensione *csproj* può essere eseguita mediante uno dei metodi seguenti:</span><span class="sxs-lookup"><span data-stu-id="1f93f-111">Migration from *project.json* to *.csproj* can be done using one of the following methods:</span></span>

- [<span data-ttu-id="1f93f-112">Visual Studio 2017</span><span class="sxs-lookup"><span data-stu-id="1f93f-112">Visual Studio 2017</span></span>](#visual-studio-2017)
- [<span data-ttu-id="1f93f-113">Strumento da riga di comando dotnet migrate</span><span class="sxs-lookup"><span data-stu-id="1f93f-113">dotnet migrate command-line tool</span></span>](#dotnet-migrate)

<span data-ttu-id="1f93f-114">Entrambi i metodi usano lo stesso motore sottostante per eseguire la migrazione dei progetti, pertanto i risultati saranno gli stessi.</span><span class="sxs-lookup"><span data-stu-id="1f93f-114">Both methods use the same underlying engine to migrate the projects, so the results will be the same for both.</span></span> <span data-ttu-id="1f93f-115">Nella maggior parte dei casi, è sufficiente usare uno dei due modi per eseguire la migrazione dal formato *project.json* a *csproj*, non è necessaria alcuna modifica manuale del file di progetto.</span><span class="sxs-lookup"><span data-stu-id="1f93f-115">In most cases, using one of these two ways to migrate the *project.json* to *csproj* is the only thing that is needed and no further manual editing of the project file is necessary.</span></span> <span data-ttu-id="1f93f-116">Il file in formato *csproj* risultante verrà denominato con lo stesso nome della directory che lo contiene.</span><span class="sxs-lookup"><span data-stu-id="1f93f-116">The resulting *.csproj* file will be named the same as the containing directory name.</span></span>

### <a name="visual-studio-2017"></a><span data-ttu-id="1f93f-117">Visual Studio 2017</span><span class="sxs-lookup"><span data-stu-id="1f93f-117">Visual Studio 2017</span></span>

<span data-ttu-id="1f93f-118">Quando si apre un file con estensione *xproj* o un file di soluzione che fa riferimento a file con estensione *xproj*, viene visualizzata la finestra di dialogo **Aggiornamento unidirezionale**.</span><span class="sxs-lookup"><span data-stu-id="1f93f-118">When you open a *.xproj* file or a solution file which references *.xproj* files, the **One-way upgrade** dialog appears.</span></span> <span data-ttu-id="1f93f-119">La finestra di dialogo consente di visualizzare i progetti di cui eseguire la migrazione.</span><span class="sxs-lookup"><span data-stu-id="1f93f-119">The dialog displays the projects to be migrated.</span></span>
<span data-ttu-id="1f93f-120">Se si apre un file di soluzione, verranno elencati tutti i progetti specificati nel file di soluzione.</span><span class="sxs-lookup"><span data-stu-id="1f93f-120">If you open a solution file, all the projects specified in the solution file will be listed.</span></span> <span data-ttu-id="1f93f-121">Rivedere l'elenco dei progetti di cui eseguire la migrazione e selezionare **OK**.</span><span class="sxs-lookup"><span data-stu-id="1f93f-121">Review the list of projects to be migrated and select **OK**.</span></span>

![Finestra di dialogo Aggiornamento unidirezionale con l'elenco di progetti di cui eseguire la migrazione](media/one-way-upgrade.jpg)

<span data-ttu-id="1f93f-123">Visual Studio eseguirà la migrazione di progetti selezionati automaticamente.</span><span class="sxs-lookup"><span data-stu-id="1f93f-123">Visual Studio will migrate the projects chosen automatically.</span></span> <span data-ttu-id="1f93f-124">Durante la migrazione di una soluzione, se non si selezionano tutti i progetti, verrà visualizzata la stessa finestra di dialogo che richiederà di aggiornare i progetti rimanenti di tale soluzione.</span><span class="sxs-lookup"><span data-stu-id="1f93f-124">When migrating a solution, if you don't choose all projects, the same dialog will appear asking you to upgrade the remaining projects from that solution.</span></span> <span data-ttu-id="1f93f-125">Dopo la migrazione del progetto, è possibile visualizzare e modificare il relativo contenuto facendo clic sul progetto con il pulsante destro del mouse nella finestra **Esplora soluzioni** e selezionando **Modifica \<nome progetto>.csproj**.</span><span class="sxs-lookup"><span data-stu-id="1f93f-125">After the project is migrated, you can see and modify its contents by right-clicking the project in the **Solution Explorer** window and selecting **Edit \<project name>.csproj**.</span></span>

<span data-ttu-id="1f93f-126">I file di cui è stata eseguita la migrazione (*project.json*, *global.json*, *xproj* e file di soluzione) verranno spostati nella cartella *Backup*.</span><span class="sxs-lookup"><span data-stu-id="1f93f-126">Files that were migrated (*project.json*, *global.json*, *.xproj* and solution file) will be moved to a *Backup* folder.</span></span> <span data-ttu-id="1f93f-127">Il file di soluzione di cui è stata eseguita la migrazione verrà aggiornato a Visual Studio 2017 e non sarà possibile aprirlo in versioni precedenti di Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="1f93f-127">The solution file that is migrated will be upgraded to Visual Studio 2017 and you won't be able to open that solution file in previous versions of Visual Studio.</span></span>
<span data-ttu-id="1f93f-128">Viene salvato anche un file denominato *UpgradeLog.htm* che contiene un report di migrazione che viene aperto automaticamente.</span><span class="sxs-lookup"><span data-stu-id="1f93f-128">A file named *UpgradeLog.htm* is also saved and automatically opened that contains a migration report.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="1f93f-129">I nuovi strumenti non sono disponibili in Visual Studio 2015, pertanto non è possibile eseguire la migrazione di progetti in tale versione di Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="1f93f-129">The new tooling is not available in Visual Studio 2015, so you cannot migrate your projects using that version of Visual Studio.</span></span>

### <a name="dotnet-migrate"></a><span data-ttu-id="1f93f-130">dotnet migrate</span><span class="sxs-lookup"><span data-stu-id="1f93f-130">dotnet migrate</span></span>

<span data-ttu-id="1f93f-131">Nello scenario della riga di comando, è possibile usare il comando [`dotnet migrate`](../tools/dotnet-migrate.md).</span><span class="sxs-lookup"><span data-stu-id="1f93f-131">In the command-line scenario, you can use the [`dotnet migrate`](../tools/dotnet-migrate.md) command.</span></span> <span data-ttu-id="1f93f-132">Esegue la migrazione di un progetto, di una soluzione o di un set di cartelle in tale ordine, a seconda di quale elemento è stato individuato.</span><span class="sxs-lookup"><span data-stu-id="1f93f-132">It will migrate a project, a solution or a set of folders in that order, depending on which ones were found.</span></span>
<span data-ttu-id="1f93f-133">Quando si esegue la migrazione di un progetto, questa riguarda il progetto e tutte le relative dipendenze.</span><span class="sxs-lookup"><span data-stu-id="1f93f-133">When you migrate a project, the project and all its dependencies are migrated.</span></span>

<span data-ttu-id="1f93f-134">I file di cui è stata eseguita la migrazione (*project.json*, *global.json*, e *xproj*) verranno spostati nella cartella *backup*.</span><span class="sxs-lookup"><span data-stu-id="1f93f-134">Files that were migrated (*project.json*, *global.json* and *.xproj*) will be moved to a *backup* folder.</span></span>

> [!NOTE]
> <span data-ttu-id="1f93f-135">Se si usa Visual Studio Code, il comando `dotnet migrate` non modifica i file specifici di Visual Studio Code, ad esempio `tasks.json`.</span><span class="sxs-lookup"><span data-stu-id="1f93f-135">If you are using Visual Studio Code, the `dotnet migrate` command will not modify Visual Studio Code-specific files such as `tasks.json`.</span></span> <span data-ttu-id="1f93f-136">Questi file devono essere modificati manualmente.</span><span class="sxs-lookup"><span data-stu-id="1f93f-136">These files need to be changed manually.</span></span>
> <span data-ttu-id="1f93f-137">Questo vale anche se si usa Project Ryder o qualsiasi editor o ambiente di sviluppo integrato (IDE, Integrated Development Environment) diverso da Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="1f93f-137">This is also true if you are using Project Ryder or any editor or Integrated Development Environment (IDE) other than Visual Studio.</span></span>

<span data-ttu-id="1f93f-138">Per un confronto tra i formati project.json e csproj, vedere [Mapping tra le proprietà di project.json e csproj](../tools/project-json-to-csproj.md).</span><span class="sxs-lookup"><span data-stu-id="1f93f-138">See [A mapping between project.json and csproj properties](../tools/project-json-to-csproj.md) for a comparison of project.json and csproj formats.</span></span>

### <a name="common-issues"></a><span data-ttu-id="1f93f-139">Problemi comuni</span><span class="sxs-lookup"><span data-stu-id="1f93f-139">Common issues</span></span>

- <span data-ttu-id="1f93f-140">Se si verifica un errore: "No executable found matching command dotnet-migrate" (Non sono stati trovati eseguibili corrispondenti al comando dotnet migrate):</span><span class="sxs-lookup"><span data-stu-id="1f93f-140">If you get an error: "No executable found matching command dotnet-migrate":</span></span>

<span data-ttu-id="1f93f-141">Eseguire `dotnet --version` per visualizzare la versione in uso.</span><span class="sxs-lookup"><span data-stu-id="1f93f-141">Run `dotnet --version` to see which version you are using.</span></span> <span data-ttu-id="1f93f-142">[`dotnet migrate`](../tools/dotnet-migrate.md) richiede la versione RC3 della CLI di .NET Core o versione successiva.</span><span class="sxs-lookup"><span data-stu-id="1f93f-142">[`dotnet migrate`](../tools/dotnet-migrate.md) requires .NET Core CLI RC3 or higher.</span></span>
<span data-ttu-id="1f93f-143">Questo tipo di errore viene visualizzato se si ha un file *global.json* nella directory corrente o principale e la versione `sdk` è impostata su una versione precedente.</span><span class="sxs-lookup"><span data-stu-id="1f93f-143">You’ll get this error if you have a *global.json* file in the current or parent directory and the `sdk` version is set to an older version.</span></span>

## <a name="migration-from-dnx-to-csproj"></a><span data-ttu-id="1f93f-144">Migrazione da DNX a csproj</span><span class="sxs-lookup"><span data-stu-id="1f93f-144">Migration from DNX to csproj</span></span>

<span data-ttu-id="1f93f-145">Se si sta ancora usando DNX per lo sviluppo di .NET Core, il processo di migrazione deve essere eseguito in due fasi:</span><span class="sxs-lookup"><span data-stu-id="1f93f-145">If you are still using DNX for .NET Core development, your migration process should be done in two stages:</span></span>

1. <span data-ttu-id="1f93f-146">Usare la [guida alla migrazione esistente DNX](from-dnx.md) per eseguire la migrazione da DNX alla CLI abilitata per project.json.</span><span class="sxs-lookup"><span data-stu-id="1f93f-146">Use the [existing DNX migration guidance](from-dnx.md) to migrate from DNX to project-json enabled CLI.</span></span>
2. <span data-ttu-id="1f93f-147">Seguire la procedura indicata nella sezione precedente per eseguire la migrazione da *project.json* a *csproj*.</span><span class="sxs-lookup"><span data-stu-id="1f93f-147">Follow the steps from the previous section to migrate from *project.json* to *.csproj*.</span></span>  

> [!NOTE]
> <span data-ttu-id="1f93f-148">DNX è stato dichiarato ufficialmente deprecato in occasione della versione Preview 1 della CLI di .NET Core.</span><span class="sxs-lookup"><span data-stu-id="1f93f-148">DNX has become officially deprecated during the Preview 1 release of the .NET Core CLI.</span></span>

## <a name="migration-from-earlier-net-core-csproj-formats-to-rtm-csproj"></a><span data-ttu-id="1f93f-149">Migrazione da versioni precedenti dei formati csproj di.NET Core alla versione RTM</span><span class="sxs-lookup"><span data-stu-id="1f93f-149">Migration from earlier .NET Core csproj formats to RTM csproj</span></span>

<span data-ttu-id="1f93f-150">Il formato di file csproj di .NET Core è stato modificato e si è evoluto ad ogni versione provvisoria degli strumenti.</span><span class="sxs-lookup"><span data-stu-id="1f93f-150">The .NET Core csproj format has been changing and evolving with each new pre-release version of the tooling.</span></span> <span data-ttu-id="1f93f-151">Non esiste alcuno strumento che possa eseguire la migrazione del file di progetto da versioni precedenti del formato csproj alla versione più recente, pertanto è necessario modificare manualmente il file di progetto.</span><span class="sxs-lookup"><span data-stu-id="1f93f-151">There is no tool that will migrate your project file from earlier versions of csproj to the latest, so you need to manually edit the project file.</span></span> <span data-ttu-id="1f93f-152">I passaggi effettivi dipendono dalla versione del file di progetto di cui si esegue la migrazione.</span><span class="sxs-lookup"><span data-stu-id="1f93f-152">The actual steps depend on the version of the project file you are migrating.</span></span> <span data-ttu-id="1f93f-153">Di seguito vengono riportate alcune indicazioni da considerare in base alle modifiche avvenute tra le versioni:</span><span class="sxs-lookup"><span data-stu-id="1f93f-153">The following is some guidance to consider based on the changes that happened between versions:</span></span>

- <span data-ttu-id="1f93f-154">Rimuovere la proprietà della versione dall'elemento `<Project>`, se presente.</span><span class="sxs-lookup"><span data-stu-id="1f93f-154">Remove the tools version property from the `<Project>` element, if it exists.</span></span>
- <span data-ttu-id="1f93f-155">Rimuovere lo spazio dei nomi XML (`xmlns`) dall'elemento `<Project>`.</span><span class="sxs-lookup"><span data-stu-id="1f93f-155">Remove the XML namespace (`xmlns`) from the `<Project>` element.</span></span>
- <span data-ttu-id="1f93f-156">Se non è presente, aggiungere l'attributo `Sdk` all'elemento `<Project>` e impostarlo su `Microsoft.NET.Sdk` o su `Microsoft.NET.Sdk.Web`.</span><span class="sxs-lookup"><span data-stu-id="1f93f-156">If it doesn't exist, add the `Sdk` attribute to the `<Project>` element and set it to `Microsoft.NET.Sdk` or `Microsoft.NET.Sdk.Web`.</span></span> <span data-ttu-id="1f93f-157">Questo attributo specifica che il progetto usa l'SDK corretto.</span><span class="sxs-lookup"><span data-stu-id="1f93f-157">This attribute specifies that the project uses the SDK to be used.</span></span> <span data-ttu-id="1f93f-158">`Microsoft.NET.Sdk.Web` viene usato per le applicazioni web.</span><span class="sxs-lookup"><span data-stu-id="1f93f-158">`Microsoft.NET.Sdk.Web` is used for web apps.</span></span>
- <span data-ttu-id="1f93f-159">Rimuovere le istruzioni `<Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" />` e `<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />` nella parte superiore e inferiore del progetto.</span><span class="sxs-lookup"><span data-stu-id="1f93f-159">Remove the `<Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" />` and `<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />` statements from the top and bottom of the project.</span></span> <span data-ttu-id="1f93f-160">Queste istruzioni di importazione sono previste dall'SDK, pertanto non sono necessarie nel progetto.</span><span class="sxs-lookup"><span data-stu-id="1f93f-160">These import statements are implied by the SDK, so there is no need for them to be in the project.</span></span>
- <span data-ttu-id="1f93f-161">Se sono presenti gli elementi `Microsoft.NETCore.App` o `NETStandard.Library` `<PackageReference>` nel progetto, è necessario rimuoverli.</span><span class="sxs-lookup"><span data-stu-id="1f93f-161">If you have `Microsoft.NETCore.App` or `NETStandard.Library` `<PackageReference>` items in your project, you should remove them.</span></span> <span data-ttu-id="1f93f-162">Questi riferimenti al pacchetto sono [impliciti nell'SDK](https://aka.ms/sdkimplicitrefs).</span><span class="sxs-lookup"><span data-stu-id="1f93f-162">These package references are [implied by the SDK](https://aka.ms/sdkimplicitrefs).</span></span>
- <span data-ttu-id="1f93f-163">Rimuovere l'elemento `Microsoft.NET.Sdk` `<PackageReference>`, se presente.</span><span class="sxs-lookup"><span data-stu-id="1f93f-163">Remove the `Microsoft.NET.Sdk` `<PackageReference>` element, if it exists.</span></span> <span data-ttu-id="1f93f-164">Il riferimento all'SDK viene specificato tramite l'attributo `Sdk` dell'elemento `<Project>`.</span><span class="sxs-lookup"><span data-stu-id="1f93f-164">The SDK reference comes through the `Sdk` attribute on the `<Project>` element.</span></span>
- <span data-ttu-id="1f93f-165">Rimuovere i [GLOB](https://en.wikipedia.org/wiki/Glob_(programming)) che sono [impliciti nell'SDK](../tools/csproj.md#default-compilation-includes-in-net-core-projects).</span><span class="sxs-lookup"><span data-stu-id="1f93f-165">Remove the [globs](https://en.wikipedia.org/wiki/Glob_(programming)) that are [implied by the SDK](../tools/csproj.md#default-compilation-includes-in-net-core-projects).</span></span> <span data-ttu-id="1f93f-166">Se i glob vengono lasciati nel progetto, verrà visualizzato un errore in fase di compilazione poiché gli elementi di compilazione verranno duplicati.</span><span class="sxs-lookup"><span data-stu-id="1f93f-166">Leaving these globs in your project will cause an error on build because compile items will be duplicated.</span></span>

<span data-ttu-id="1f93f-167">Dopo questi passaggi, il progetto sarà completamente compatibile con la versione RTM del formato di file csproj.</span><span class="sxs-lookup"><span data-stu-id="1f93f-167">After these steps your project should be fully compatible with the RTM .NET Core csproj format.</span></span>

<span data-ttu-id="1f93f-168">Per esempi del formato csproj prima e dopo la migrazione dalla versione precedente a quella nuova, vedere l'articolo [Updating Visual Studio 2017 RC – .NET Core Tooling improvements](https://devblogs.microsoft.com/dotnet/updating-visual-studio-2017-rc-net-core-tooling-improvements/) (Aggiornamento di Visual Studio 2017 RC - Miglioramento degli strumenti .NET Core) sul blog di .NET.</span><span class="sxs-lookup"><span data-stu-id="1f93f-168">For examples of before and after the migration from old csproj format to the new one, see the [Updating Visual Studio 2017 RC – .NET Core Tooling improvements](https://devblogs.microsoft.com/dotnet/updating-visual-studio-2017-rc-net-core-tooling-improvements/) article on the .NET blog.</span></span>

## <a name="see-also"></a><span data-ttu-id="1f93f-169">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="1f93f-169">See also</span></span>

- [<span data-ttu-id="1f93f-170">Conversione, migrazione e aggiornamento dei progetti di Visual Studio</span><span class="sxs-lookup"><span data-stu-id="1f93f-170">Port, Migrate, and Upgrade Visual Studio Projects</span></span>](/visualstudio/porting/port-migrate-and-upgrade-visual-studio-projects)

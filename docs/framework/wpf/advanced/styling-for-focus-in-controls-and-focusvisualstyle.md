---
title: Applicazione di stili per lo stato attivo nei controlli e FocusVisualStyle
ms.date: 03/30/2017
helpviewer_keywords:
- keyboard focus [WPF]
- focus [WPF], visual styling
- styles [WPF], focus visual style
ms.assetid: 786ac576-011b-4d72-913b-558deccb9b35
ms.openlocfilehash: 988b084144532df6f7a6073184fcf035b0813bfd
ms.sourcegitcommit: 944ddc52b7f2632f30c668815f92b378efd38eea
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 11/03/2019
ms.locfileid: "73458686"
---
# <a name="styling-for-focus-in-controls-and-focusvisualstyle"></a><span data-ttu-id="bf60c-102">Applicazione di stili per lo stato attivo nei controlli e FocusVisualStyle</span><span class="sxs-lookup"><span data-stu-id="bf60c-102">Styling for Focus in Controls, and FocusVisualStyle</span></span>
[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] <span data-ttu-id="bf60c-103">offre due meccanismi paralleli per modificare l'aspetto visivo di un controllo che riceve lo stato attivo della tastiera.</span><span class="sxs-lookup"><span data-stu-id="bf60c-103">provides two parallel mechanisms for changing the visual appearance of a control when it receives keyboard focus.</span></span> <span data-ttu-id="bf60c-104">Il primo meccanismo consiste nell'usare i setter di proprietà per proprietà quali <xref:System.Windows.UIElement.IsKeyboardFocused%2A> all'interno dello stile o del modello applicato al controllo.</span><span class="sxs-lookup"><span data-stu-id="bf60c-104">The first mechanism is to use property setters for properties such as <xref:System.Windows.UIElement.IsKeyboardFocused%2A> within the style or template that is applied to the control.</span></span> <span data-ttu-id="bf60c-105">Il secondo meccanismo consiste nel fornire uno stile separato come valore della proprietà <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>; lo stile di visualizzazione dello stato attivo crea una struttura ad albero visuale separata per uno strumento decorativo che disegna sulla parte superiore del controllo, anziché modificare la struttura ad albero visuale del controllo o di un altro elemento dell'interfaccia utente sostituendolo.</span><span class="sxs-lookup"><span data-stu-id="bf60c-105">The second mechanism is to provide a separate style as the value of the <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A> property; the "focus visual style" creates a separate visual tree for an adorner that draws on top of the control, rather than changing the visual tree of the control or other UI element by replacing it.</span></span> <span data-ttu-id="bf60c-106">Questo argomento descrive gli scenari appropriati a ogni meccanismo.</span><span class="sxs-lookup"><span data-stu-id="bf60c-106">This topic discusses the scenarios where each of these mechanisms is appropriate.</span></span>  

<a name="Purpose"></a>   
## <a name="the-purpose-of-focus-visual-style"></a><span data-ttu-id="bf60c-107">Scopo dello stile di visualizzazione dello stato attivo</span><span class="sxs-lookup"><span data-stu-id="bf60c-107">The Purpose of Focus Visual Style</span></span>  
 <span data-ttu-id="bf60c-108">La funzionalità dello stile di visualizzazione dello stato attivo offre un "modello a oggetti" comune per introdurre un feedback utente visivo, basato sul passaggio tramite tastiera a un qualsiasi elemento dell'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="bf60c-108">The focus visual style feature provides a common "object model" for introducing visual user feedback based on keyboard navigation to any UI element.</span></span> <span data-ttu-id="bf60c-109">Questo è possibile senza bisogno di applicare un nuovo modello al controllo, né di conoscere la composizione specifica del modello.</span><span class="sxs-lookup"><span data-stu-id="bf60c-109">This is possible without applying a new template to the control, or knowing the specific template composition.</span></span>  
  
 <span data-ttu-id="bf60c-110">Dal momento però che la funzionalità dello stile di visualizzazione dello stato attivo funziona a prescindere dai modelli di controllo, il feedback visivo che è possibile visualizzare per un controllo usando uno stile di visualizzazione dello stato attivo è necessariamente limitato.</span><span class="sxs-lookup"><span data-stu-id="bf60c-110">However, precisely because the focus visual style feature works without knowing the control templates, the visual feedback that can be displayed for a control using a focus visual style is necessarily limited.</span></span> <span data-ttu-id="bf60c-111">La funzionalità sovrappone una struttura ad albero visuale diversa (uno strumento decorativo visuale) sulla struttura ad albero visuale creata dal rendering di un controllo tramite il relativo modello.</span><span class="sxs-lookup"><span data-stu-id="bf60c-111">What the feature actually does is to overlay a different visual tree (an adorner) on top of the visual tree as created by a control's rendering through its template.</span></span> <span data-ttu-id="bf60c-112">Si definisce questa struttura ad albero visuale separata usando uno stile che riempie la proprietà <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>.</span><span class="sxs-lookup"><span data-stu-id="bf60c-112">You define this separate visual tree using a style that fills the <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A> property.</span></span>  
  
<a name="Default"></a>   
## <a name="default-focus-visual-style-behavior"></a><span data-ttu-id="bf60c-113">Comportamento predefinito dello stile di visualizzazione dello stato attivo</span><span class="sxs-lookup"><span data-stu-id="bf60c-113">Default Focus Visual Style Behavior</span></span>  
 <span data-ttu-id="bf60c-114">Gli stili di visualizzazione dello stato attivo funzionano solo quando l'azione di impostazione dello stato attivo è stata iniziata dalla tastiera.</span><span class="sxs-lookup"><span data-stu-id="bf60c-114">Focus visual styles act only when the focus action was initiated by the keyboard.</span></span> <span data-ttu-id="bf60c-115">Qualsiasi azione del mouse o modifica dello stato attivo a livello di codice disabilita la modalità degli stili di visualizzazione dello stato attivo.</span><span class="sxs-lookup"><span data-stu-id="bf60c-115">Any mouse action or programmatic focus change disables the mode for focus visual styles.</span></span> <span data-ttu-id="bf60c-116">Per altre informazioni sulle differenze tra le modalità dello stato attivo, vedere [Cenni preliminari sullo stato attivo](focus-overview.md).</span><span class="sxs-lookup"><span data-stu-id="bf60c-116">For more information about the distinctions between focus modes, see [Focus Overview](focus-overview.md).</span></span>  
  
 <span data-ttu-id="bf60c-117">I temi dei controlli includono un comportamento predefinito dello stile di visualizzazione dello stato attivo che diventa lo stile di visualizzazione dello stato attivo per tutti i controlli del tema.</span><span class="sxs-lookup"><span data-stu-id="bf60c-117">The themes for controls include a default focus visual style behavior that becomes the focus visual style for all controls in the theme.</span></span> <span data-ttu-id="bf60c-118">Questo stile del tema è identificato dal valore della chiave statica <xref:System.Windows.SystemParameters.FocusVisualStyleKey%2A>.</span><span class="sxs-lookup"><span data-stu-id="bf60c-118">This theme style is identified by the value of the static key <xref:System.Windows.SystemParameters.FocusVisualStyleKey%2A>.</span></span> <span data-ttu-id="bf60c-119">Quando si dichiara uno stile di visualizzazione dello stato attivo personalizzato a livello di applicazione, questo sostituisce il comportamento dello stile predefinito dei temi.</span><span class="sxs-lookup"><span data-stu-id="bf60c-119">When you declare your own focus visual style at the application level, you replace this default style behavior from the themes.</span></span> <span data-ttu-id="bf60c-120">In alternativa, se si definisce l'intero tema, è necessario usare questa stessa chiave per definire lo stile del comportamento predefinito per tutto il tema.</span><span class="sxs-lookup"><span data-stu-id="bf60c-120">Alternatively, if you define the entire theme, then you should use this same key to define the style for the default behavior for your entire theme.</span></span>  
  
 <span data-ttu-id="bf60c-121">Nei temi, lo stile di visualizzazione dello stato attivo predefinito in genere è molto semplice.</span><span class="sxs-lookup"><span data-stu-id="bf60c-121">In the themes, the default focus visual style is generally very simple.</span></span> <span data-ttu-id="bf60c-122">Di seguito è riportata un'approssimazione generica:</span><span class="sxs-lookup"><span data-stu-id="bf60c-122">The following is a rough approximation:</span></span>  
  
```xaml  
<Style x:Key="{x:Static SystemParameters.FocusVisualStyleKey}">  
  <Setter Property="Control.Template">  
    <Setter.Value>  
      <ControlTemplate>  
        <Rectangle StrokeThickness="1"  
          Stroke="Black"  
          StrokeDashArray="1 2"  
          SnapsToDevicePixels="true"/>  
      </ControlTemplate>  
    </Setter.Value>  
  </Setter>  
</Style>  
```  
  
<a name="When"></a>   
## <a name="when-to-use-focus-visual-styles"></a><span data-ttu-id="bf60c-123">Quando usare gli stili di visualizzazione dello stato attivo</span><span class="sxs-lookup"><span data-stu-id="bf60c-123">When to Use Focus Visual Styles</span></span>  
 <span data-ttu-id="bf60c-124">Dal punto di vista concettuale, l'aspetto degli stili di visualizzazione dello stato attivo applicati ai controlli deve essere coerente da un controllo all'altro.</span><span class="sxs-lookup"><span data-stu-id="bf60c-124">Conceptually, the appearance of focus visual styles applied to controls should be coherent from control to control.</span></span> <span data-ttu-id="bf60c-125">Un modo per garantire la coerenza consiste nel modificare lo stile di visualizzazione dello stato attivo solo se si sta componendo un tema completo, in cui ogni controllo definito nel tema ottiene lo stesso stile di visualizzazione dello stato attivo o una variazione di uno stile visivamente coerente tra i vari controlli.</span><span class="sxs-lookup"><span data-stu-id="bf60c-125">One way to ensure coherence is to change the focus visual style only if you are composing an entire theme, where each control that is defined in the theme gets either the very same focus visual style, or some variation of a style that is visually related from control to control.</span></span> <span data-ttu-id="bf60c-126">In alternativa, si può usare lo stesso stile (o stili simili) per assegnare uno stile a ogni elemento della pagina o di un'interfaccia utente in grado di ricevere lo stato attivo tramite tastiera.</span><span class="sxs-lookup"><span data-stu-id="bf60c-126">Alternatively, you might use the same style (or similar styles) to style every keyboard-focusable element on a page or in a UI.</span></span>  
  
 <span data-ttu-id="bf60c-127">L'impostazione di <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A> per i singoli stili di controllo che non fanno parte di un tema non è l'utilizzo previsto degli stili di visualizzazione dello stato attivo.</span><span class="sxs-lookup"><span data-stu-id="bf60c-127">Setting <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A> on individual control styles that are not part of a theme is not the intended usage of focus visual styles.</span></span> <span data-ttu-id="bf60c-128">Un comportamento visivo incoerente tra controlli può infatti creare confusione nell'esperienza utente relativamente allo stato attivo.</span><span class="sxs-lookup"><span data-stu-id="bf60c-128">This is because an inconsistent visual behavior between controls can lead to a confusing user experience regarding keyboard focus.</span></span> <span data-ttu-id="bf60c-129">Se si intendono comportamenti specifici del controllo per lo stato attivo della tastiera che sono deliberatamente non coerenti in un tema, un approccio molto migliore consiste nell'usare i trigger negli stili per le singole proprietà dello stato di input, ad esempio <xref:System.Windows.UIElement.IsFocused%2A> o <xref:System.Windows.UIElement.IsKeyboardFocused%2A>.</span><span class="sxs-lookup"><span data-stu-id="bf60c-129">If you are intending control-specific behaviors for keyboard focus that are deliberately not coherent across a theme, a much better approach is to use triggers in styles for individual input state properties, such as <xref:System.Windows.UIElement.IsFocused%2A> or <xref:System.Windows.UIElement.IsKeyboardFocused%2A>.</span></span>  
  
 <span data-ttu-id="bf60c-130">Gli stili di visualizzazione dello stato attivo funzionano esclusivamente per lo stato attivo da tastiera.</span><span class="sxs-lookup"><span data-stu-id="bf60c-130">Focus visual styles act exclusively for keyboard focus.</span></span> <span data-ttu-id="bf60c-131">Come tali, costituiscono un tipo di funzionalità di accessibilità.</span><span class="sxs-lookup"><span data-stu-id="bf60c-131">As such, focus visual styles are a type of accessibility feature.</span></span> <span data-ttu-id="bf60c-132">Se si vogliono apportare modifiche all'interfaccia utente per qualsiasi tipo di stato attivo, tramite mouse, tastiera o a livello di codice, è preferibile usare non gli stili di visualizzazione dello stato attivo, bensì setter e trigger all'interno degli stili oppure modelli che funzionino in base al valore delle proprietà generali dello stato attivo, ad esempio <xref:System.Windows.UIElement.IsFocused%2A> o <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>.</span><span class="sxs-lookup"><span data-stu-id="bf60c-132">If you want UI changes for any type of focus, whether via mouse, keyboard, or programmatically, then you should not use focus visual styles, and should instead use setters and triggers in styles or templates that are working from the value of general focus properties such as <xref:System.Windows.UIElement.IsFocused%2A> or <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>.</span></span>  
  
<a name="How"></a>   
## <a name="how-to-create-a-focus-visual-style"></a><span data-ttu-id="bf60c-133">Come creare uno stile di visualizzazione dello stato attivo</span><span class="sxs-lookup"><span data-stu-id="bf60c-133">How to Create a Focus Visual Style</span></span>  
 <span data-ttu-id="bf60c-134">Lo stile creato per uno stile di visualizzazione dello stato attivo deve avere sempre la <xref:System.Windows.Style.TargetType%2A> di <xref:System.Windows.Controls.Control>.</span><span class="sxs-lookup"><span data-stu-id="bf60c-134">The style you create for a focus visual style should always have the <xref:System.Windows.Style.TargetType%2A> of <xref:System.Windows.Controls.Control>.</span></span> <span data-ttu-id="bf60c-135">Lo stile deve essere costituito principalmente da un <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="bf60c-135">The style should consist mainly of a <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="bf60c-136">Il tipo di destinazione non viene specificato come tipo in cui lo stile di visualizzazione dello stato attivo viene assegnato al <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>.</span><span class="sxs-lookup"><span data-stu-id="bf60c-136">You do not specify the target type to be the type where the focus visual style is assigned to the <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>.</span></span>  
  
 <span data-ttu-id="bf60c-137">Poiché il tipo di destinazione è sempre <xref:System.Windows.Controls.Control>, è necessario applicare uno stile usando proprietà comuni a tutti i controlli (usando le proprietà della classe <xref:System.Windows.Controls.Control> e le relative classi di base).</span><span class="sxs-lookup"><span data-stu-id="bf60c-137">Because the target type is always <xref:System.Windows.Controls.Control>, you must style by using properties that are common to all controls (using properties of the <xref:System.Windows.Controls.Control> class and its base classes).</span></span> <span data-ttu-id="bf60c-138">È necessario creare un modello che funzioni correttamente come sovrapposizione a un elemento dell'interfaccia utente e che non nasconda le aree funzionali del controllo.</span><span class="sxs-lookup"><span data-stu-id="bf60c-138">You should create a template that will properly function as an overlay to a UI element and that will not obscure functional areas of the control.</span></span> <span data-ttu-id="bf60c-139">In generale, questo vuol dire che il feedback visivo deve essere visualizzato all'esterno dei margini del controllo o sotto forma di effetti temporanei o non intrusivi, che non blocchino l'hit testing sul controllo a cui viene applicato lo stile di visualizzazione dello stato attivo.</span><span class="sxs-lookup"><span data-stu-id="bf60c-139">Generally, this means that the visual feedback should appear outside the control margins, or as temporary or unobtrusive effects that will not block the hit testing on the control where the focus visual style is applied.</span></span> <span data-ttu-id="bf60c-140">Le proprietà che è possibile usare nell'associazione di modelli che sono utili per determinare il dimensionamento e il posizionamento del modello di sovrapposizione includono <xref:System.Windows.FrameworkElement.ActualHeight%2A>, <xref:System.Windows.FrameworkElement.ActualWidth%2A>, <xref:System.Windows.FrameworkElement.Margin%2A>e <xref:System.Windows.Controls.Control.Padding%2A>.</span><span class="sxs-lookup"><span data-stu-id="bf60c-140">Properties that you can use in template binding that are useful for determining sizing and positioning of your overlay template include <xref:System.Windows.FrameworkElement.ActualHeight%2A>, <xref:System.Windows.FrameworkElement.ActualWidth%2A>, <xref:System.Windows.FrameworkElement.Margin%2A>, and <xref:System.Windows.Controls.Control.Padding%2A>.</span></span>  
  
<a name="Alternatives"></a>   
## <a name="alternatives-to-using-a-focus-visual-style"></a><span data-ttu-id="bf60c-141">Alternative all'uso di uno stile di visualizzazione dello stato attivo</span><span class="sxs-lookup"><span data-stu-id="bf60c-141">Alternatives to Using a Focus Visual Style</span></span>  
 <span data-ttu-id="bf60c-142">Per le situazioni in cui non è appropriato usare uno stile di visualizzazione dello stato attivo, perché si sta assegnando uno stile solo a singoli controlli o perché si vuole un controllo maggiore sul modello del controllo, sono disponibili molte altre proprietà e tecniche accessibili che creano un comportamento visivo in risposta alle modifiche apportate allo stato attivo.</span><span class="sxs-lookup"><span data-stu-id="bf60c-142">For situations where using a focus visual style is not appropriate, either because you are only styling single controls or because you want greater control over the control template, there are many other accessible properties and techniques that can create visual behavior in response to changes in focus.</span></span>  
  
 <span data-ttu-id="bf60c-143">Trigger, setter e setter di eventi sono illustrati in dettaglio in [Applicazione di stili e modelli](../../../desktop-wpf/fundamentals/styles-templates-overview.md).</span><span class="sxs-lookup"><span data-stu-id="bf60c-143">Triggers, setters, and event setters are all discussed in detail in [Styling and Templating](../../../desktop-wpf/fundamentals/styles-templates-overview.md).</span></span> <span data-ttu-id="bf60c-144">La gestione degli eventi indirizzati è illustrata in [Cenni preliminari sugli eventi indirizzati](routed-events-overview.md).</span><span class="sxs-lookup"><span data-stu-id="bf60c-144">Routed event handling is discussed in [Routed Events Overview](routed-events-overview.md).</span></span>  
  
### <a name="iskeyboardfocused"></a><span data-ttu-id="bf60c-145">IsKeyboardFocused</span><span class="sxs-lookup"><span data-stu-id="bf60c-145">IsKeyboardFocused</span></span>  
 <span data-ttu-id="bf60c-146">Se si è interessati specificamente allo stato attivo della tastiera, è possibile usare la proprietà di dipendenza <xref:System.Windows.UIElement.IsKeyboardFocused%2A> per una proprietà <xref:System.Windows.Trigger>.</span><span class="sxs-lookup"><span data-stu-id="bf60c-146">If you are specifically interested in keyboard focus, the <xref:System.Windows.UIElement.IsKeyboardFocused%2A> dependency property can be used for a property <xref:System.Windows.Trigger>.</span></span> <span data-ttu-id="bf60c-147">Un trigger di proprietà in uno stile o in un modello rappresenta una tecnica più appropriata per la definizione di un comportamento dello stato attivo della tastiera specifico per un singolo controllo, che potrebbe non corrispondere visivamente al comportamento dello stato attivo della tastiera di altri controlli.</span><span class="sxs-lookup"><span data-stu-id="bf60c-147">A property trigger in either a style or template is a more appropriate technique for defining a keyboard focus behavior that is very specifically for a single control, and which might not visually match the keyboard focus behavior for other controls.</span></span>  
  
 <span data-ttu-id="bf60c-148">Un'altra proprietà di dipendenza simile è <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>, che può essere utile per richiamare visivamente lo stato attivo della tastiera in un punto qualsiasi all'interno della composizione o all'interno dell'area funzionale del controllo.</span><span class="sxs-lookup"><span data-stu-id="bf60c-148">Another similar dependency property is <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>, which might be appropriate to use if you want to visually call out that keyboard focus is somewhere within compositing or within the functional area of the control.</span></span> <span data-ttu-id="bf60c-149">Ad esempio, è possibile inserire un trigger <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A> in modo che un pannello che raggruppa diversi controlli venga visualizzato in modo diverso, anche se lo stato attivo della tastiera potrebbe essere più preciso su un singolo elemento all'interno di tale pannello.</span><span class="sxs-lookup"><span data-stu-id="bf60c-149">For example, you might place an <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A> trigger such that a panel that groups several controls appears differently, even though keyboard focus might more precisely be on an individual element within that panel.</span></span>  
  
 <span data-ttu-id="bf60c-150">È anche possibile usare gli eventi <xref:System.Windows.UIElement.GotKeyboardFocus> e <xref:System.Windows.UIElement.LostKeyboardFocus> (nonché gli equivalenti di anteprima).</span><span class="sxs-lookup"><span data-stu-id="bf60c-150">You can also use the events <xref:System.Windows.UIElement.GotKeyboardFocus> and <xref:System.Windows.UIElement.LostKeyboardFocus> (as well as their Preview equivalents).</span></span> <span data-ttu-id="bf60c-151">È possibile utilizzare questi eventi come base per un <xref:System.Windows.EventSetter>oppure è possibile scrivere gestori per gli eventi nel code-behind.</span><span class="sxs-lookup"><span data-stu-id="bf60c-151">You can use these events as the basis for an <xref:System.Windows.EventSetter>, or you can write handlers for the events in code-behind.</span></span>  
  
### <a name="other-focus-properties"></a><span data-ttu-id="bf60c-152">Altre proprietà dello stato attivo</span><span class="sxs-lookup"><span data-stu-id="bf60c-152">Other Focus Properties</span></span>  
 <span data-ttu-id="bf60c-153">Se si desidera che tutte le possibili cause di modifica dello stato attivo per produrre un comportamento visivo, è necessario basare un setter o un trigger sulla proprietà di dipendenza <xref:System.Windows.UIElement.IsFocused%2A> o in alternativa sul <xref:System.Windows.UIElement.GotFocus> o <xref:System.Windows.UIElement.LostFocus> eventi utilizzati per un <xref:System.Windows.EventSetter>.</span><span class="sxs-lookup"><span data-stu-id="bf60c-153">If you want all possible causes of changing focus to produce a visual behavior, you should base a setter or trigger on the <xref:System.Windows.UIElement.IsFocused%2A> dependency property, or alternatively on the <xref:System.Windows.UIElement.GotFocus> or <xref:System.Windows.UIElement.LostFocus> events used for an <xref:System.Windows.EventSetter>.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="bf60c-154">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="bf60c-154">See also</span></span>

- <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>
- [<span data-ttu-id="bf60c-155">Applicazione di stili e modelli</span><span class="sxs-lookup"><span data-stu-id="bf60c-155">Styling and Templating</span></span>](../../../desktop-wpf/fundamentals/styles-templates-overview.md)
- [<span data-ttu-id="bf60c-156">Panoramica sullo stato attivo</span><span class="sxs-lookup"><span data-stu-id="bf60c-156">Focus Overview</span></span>](focus-overview.md)
- [<span data-ttu-id="bf60c-157">Cenni preliminari sull'input</span><span class="sxs-lookup"><span data-stu-id="bf60c-157">Input Overview</span></span>](input-overview.md)

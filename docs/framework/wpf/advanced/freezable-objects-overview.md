---
title: Cenni preliminari sugli oggetti Freezable
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- Freezable objects [WPF], description
- unfreezing Freezable objects [WPF]
- classes [WPF], Freezable
ms.assetid: 89c71692-4f43-4057-b611-67c6a8a863a2
ms.openlocfilehash: 05cd3c27430146f575c23011f53995aa07aaf99e
ms.sourcegitcommit: 005980b14629dfc193ff6cdc040800bc75e0a5a5
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/14/2019
ms.locfileid: "70991487"
---
# <a name="freezable-objects-overview"></a><span data-ttu-id="5b68e-102">Cenni preliminari sugli oggetti Freezable</span><span class="sxs-lookup"><span data-stu-id="5b68e-102">Freezable Objects Overview</span></span>

<span data-ttu-id="5b68e-103">In questo argomento viene descritto come utilizzare e creare <xref:System.Windows.Freezable> in modo efficace oggetti, che forniscono funzionalità speciali che consentono di migliorare le prestazioni dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="5b68e-103">This topic describes how to effectively use and create <xref:System.Windows.Freezable> objects, which provide special features that can help improve application performance.</span></span> <span data-ttu-id="5b68e-104">Esempi di oggetti Freezable includono pennelli, penne, trasformazioni, geometrie e animazioni.</span><span class="sxs-lookup"><span data-stu-id="5b68e-104">Examples of freezable objects include brushes, pens, transformations, geometries, and animations.</span></span>

<a name="whatisafreezable"></a>

## <a name="what-is-a-freezable"></a><span data-ttu-id="5b68e-105">Che cos'è un oggetto Freezable?</span><span class="sxs-lookup"><span data-stu-id="5b68e-105">What Is a Freezable?</span></span>

<span data-ttu-id="5b68e-106">Un <xref:System.Windows.Freezable> è un tipo speciale di oggetto con due stati: non bloccato e bloccato.</span><span class="sxs-lookup"><span data-stu-id="5b68e-106">A <xref:System.Windows.Freezable> is a special type of object that has two states: unfrozen and frozen.</span></span> <span data-ttu-id="5b68e-107">Quando viene sbloccato, <xref:System.Windows.Freezable> un sembra comportarsi come qualsiasi altro oggetto.</span><span class="sxs-lookup"><span data-stu-id="5b68e-107">When unfrozen, a <xref:System.Windows.Freezable> appears to behave like any other object.</span></span> <span data-ttu-id="5b68e-108">Quando è bloccato, <xref:System.Windows.Freezable> un oggetto non può più essere modificato.</span><span class="sxs-lookup"><span data-stu-id="5b68e-108">When frozen, a <xref:System.Windows.Freezable> can no longer be modified.</span></span>

<span data-ttu-id="5b68e-109">Un <xref:System.Windows.Freezable> oggetto fornisce <xref:System.Windows.Freezable.Changed> un evento per notificare agli osservatori le eventuali modifiche apportate all'oggetto.</span><span class="sxs-lookup"><span data-stu-id="5b68e-109">A <xref:System.Windows.Freezable> provides a <xref:System.Windows.Freezable.Changed> event to notify observers of any modifications to the object.</span></span> <span data-ttu-id="5b68e-110">Il blocco <xref:System.Windows.Freezable> di un può migliorare le prestazioni, perché non è più necessario spendere risorse per le notifiche di modifica.</span><span class="sxs-lookup"><span data-stu-id="5b68e-110">Freezing a <xref:System.Windows.Freezable> can improve its performance, because it no longer needs to spend resources on change notifications.</span></span> <span data-ttu-id="5b68e-111">Un oggetto <xref:System.Windows.Freezable> bloccato può anche essere condiviso tra thread, mentre un oggetto <xref:System.Windows.Freezable> non bloccato non può.</span><span class="sxs-lookup"><span data-stu-id="5b68e-111">A frozen <xref:System.Windows.Freezable> can also be shared across threads, while an unfrozen <xref:System.Windows.Freezable> cannot.</span></span>

<span data-ttu-id="5b68e-112">Sebbene la <xref:System.Windows.Freezable> classe includa molte applicazioni, <xref:System.Windows.Freezable> la maggior [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] parte degli oggetti in sono correlati al sottosistema grafico.</span><span class="sxs-lookup"><span data-stu-id="5b68e-112">Although the <xref:System.Windows.Freezable> class has many applications, most <xref:System.Windows.Freezable> objects in [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] are related to the graphics sub-system.</span></span>

<span data-ttu-id="5b68e-113">La <xref:System.Windows.Freezable> classe semplifica l'utilizzo di determinati oggetti di sistema grafici e può contribuire a migliorare le prestazioni dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="5b68e-113">The <xref:System.Windows.Freezable> class makes it easier to use certain graphics system objects and can help improve application performance.</span></span> <span data-ttu-id="5b68e-114">Esempi di tipi che ereditano <xref:System.Windows.Freezable> da includono <xref:System.Windows.Media.Brush>le <xref:System.Windows.Media.Transform>classi, <xref:System.Windows.Media.Geometry> e.</span><span class="sxs-lookup"><span data-stu-id="5b68e-114">Examples of types that inherit from <xref:System.Windows.Freezable> include the <xref:System.Windows.Media.Brush>, <xref:System.Windows.Media.Transform>, and <xref:System.Windows.Media.Geometry> classes.</span></span> <span data-ttu-id="5b68e-115">Poiché contengono risorse non gestite, il sistema deve monitorare tali oggetti per le modifiche e quindi aggiornare le corrispondenti risorse non gestite quando viene apportata una modifica all'oggetto originale.</span><span class="sxs-lookup"><span data-stu-id="5b68e-115">Because they contain unmanaged resources, the system must monitor these objects for modifications, and then update their corresponding unmanaged resources when there is a change to the original object.</span></span> <span data-ttu-id="5b68e-116">Anche se non si modifica effettivamente un oggetto di sistema grafico, il sistema deve comunque dedicare alcune risorse al monitoraggio dell'oggetto, nel caso in cui venga modificato.</span><span class="sxs-lookup"><span data-stu-id="5b68e-116">Even if you don't actually modify a graphics system object, the system must still spend some of its resources monitoring the object, in case you do change it.</span></span>

<span data-ttu-id="5b68e-117">Si supponga, ad esempio, di <xref:System.Windows.Media.SolidColorBrush> creare un pennello e usarlo per disegnare lo sfondo di un pulsante.</span><span class="sxs-lookup"><span data-stu-id="5b68e-117">For example, suppose you create a <xref:System.Windows.Media.SolidColorBrush> brush and use it to paint the background of a button.</span></span>

[!code-csharp[freezablesample_procedural#FrozenExamplePart1](~/samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#frozenexamplepart1)]
[!code-vb[freezablesample_procedural#FrozenExamplePart1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#frozenexamplepart1)]

<span data-ttu-id="5b68e-118">Quando viene eseguito il rendering del pulsante [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] , il sottosistema grafico usa le informazioni fornite per disegnare un gruppo di pixel per creare l'aspetto di un pulsante.</span><span class="sxs-lookup"><span data-stu-id="5b68e-118">When the button is rendered, the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] graphics sub-system uses the information you provided to paint a group of pixels to create the appearance of a button.</span></span> <span data-ttu-id="5b68e-119">Sebbene sia stato usato un pennello tinta unita per descrivere il modo in cui deve essere disegnato il pulsante, il pennello tinta unita non esegue effettivamente il disegno.</span><span class="sxs-lookup"><span data-stu-id="5b68e-119">Although you used a solid color brush to describe how the button should be painted, your solid color brush doesn't actually do the painting.</span></span> <span data-ttu-id="5b68e-120">Il sistema grafico genera oggetti veloci e di basso livello per il pulsante e il pennello e sono gli oggetti effettivamente visualizzati sullo schermo.</span><span class="sxs-lookup"><span data-stu-id="5b68e-120">The graphics system generates fast, low-level objects for the button and the brush, and it is those objects that actually appear on the screen.</span></span>

<span data-ttu-id="5b68e-121">Per modificare il pennello, è necessario rigenerare tali oggetti di basso livello.</span><span class="sxs-lookup"><span data-stu-id="5b68e-121">If you were to modify the brush, those low-level objects would have to be regenerated.</span></span> <span data-ttu-id="5b68e-122">La classe Freezable fornisce a un pennello la possibilità di trovare gli oggetti di basso livello generati corrispondenti e di aggiornarli quando cambiano.</span><span class="sxs-lookup"><span data-stu-id="5b68e-122">The freezable class is what gives a brush the ability to find its corresponding generated, low-level objects and to update them when it changes.</span></span> <span data-ttu-id="5b68e-123">Quando questa funzionalità è abilitata, il pennello viene definito "non bloccato".</span><span class="sxs-lookup"><span data-stu-id="5b68e-123">When this ability is enabled, the brush is said to be "unfrozen."</span></span>

<span data-ttu-id="5b68e-124">Il <xref:System.Windows.Freezable.Freeze%2A> metodo di un oggetto Freezable consente di disabilitare questa funzionalità di aggiornamento automatico.</span><span class="sxs-lookup"><span data-stu-id="5b68e-124">A freezable's <xref:System.Windows.Freezable.Freeze%2A> method enables you to disable this self-updating ability.</span></span> <span data-ttu-id="5b68e-125">È possibile utilizzare questo metodo per fare in modo che il pennello diventi "bloccato" o non modificabile.</span><span class="sxs-lookup"><span data-stu-id="5b68e-125">You can use this method to make the brush become "frozen," or unmodifiable.</span></span>

> [!NOTE]
> <span data-ttu-id="5b68e-126">Non tutti gli oggetti Freezable possono essere bloccati.</span><span class="sxs-lookup"><span data-stu-id="5b68e-126">Not every Freezable object can be frozen.</span></span> <span data-ttu-id="5b68e-127">Per evitare di generare <xref:System.InvalidOperationException>un' <xref:System.Windows.Freezable.CanFreeze%2A> eccezione, controllare il valore della proprietà dell'oggetto Freezable per determinare se può essere bloccato prima di tentare di bloccarlo.</span><span class="sxs-lookup"><span data-stu-id="5b68e-127">To avoid throwing an <xref:System.InvalidOperationException>, check the value of the Freezable object's <xref:System.Windows.Freezable.CanFreeze%2A> property to determine whether it can be frozen before attempting to freeze it.</span></span>

[!code-csharp[freezablesample_procedural#FrozenExamplePart2](~/samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#frozenexamplepart2)]
[!code-vb[freezablesample_procedural#FrozenExamplePart2](~/samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#frozenexamplepart2)]

<span data-ttu-id="5b68e-128">Quando non è più necessario modificare un oggetto Freezable, il blocco offre vantaggi in merito alle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="5b68e-128">When you no longer need to modify a freezable, freezing it provides performance benefits.</span></span> <span data-ttu-id="5b68e-129">Se si blocca il pennello in questo esempio, il sistema grafico non dovrà più monitorarlo per le modifiche.</span><span class="sxs-lookup"><span data-stu-id="5b68e-129">If you were to freeze the brush in this example, the graphics system would no longer need to monitor it for changes.</span></span> <span data-ttu-id="5b68e-130">Il sistema grafico può anche eseguire altre ottimizzazioni, perché sa che il pennello non cambierà.</span><span class="sxs-lookup"><span data-stu-id="5b68e-130">The graphics system can also make other optimizations, because it knows the brush won't change.</span></span>

> [!NOTE]
> <span data-ttu-id="5b68e-131">Per praticità, gli oggetti Freezable rimangono bloccati a meno che non vengano bloccati in modo esplicito.</span><span class="sxs-lookup"><span data-stu-id="5b68e-131">For convenience, freezable objects remain unfrozen unless you explicitly freeze them.</span></span>

<a name="frozenfreezables"></a>

## <a name="using-freezables"></a><span data-ttu-id="5b68e-132">Uso di Freezable</span><span class="sxs-lookup"><span data-stu-id="5b68e-132">Using Freezables</span></span>

<span data-ttu-id="5b68e-133">L'utilizzo di un oggetto Freezable sbloccato è analogo all'utilizzo di qualsiasi altro tipo di oggetto.</span><span class="sxs-lookup"><span data-stu-id="5b68e-133">Using an unfrozen freezable is like using any other type of object.</span></span> <span data-ttu-id="5b68e-134">Nell'esempio seguente, il colore di un oggetto <xref:System.Windows.Media.SolidColorBrush> viene modificato da giallo a rosso dopo che è stato usato per disegnare lo sfondo di un pulsante.</span><span class="sxs-lookup"><span data-stu-id="5b68e-134">In the following example, the color of a <xref:System.Windows.Media.SolidColorBrush> is changed from yellow to red after it's used to paint the background of a button.</span></span> <span data-ttu-id="5b68e-135">Il sistema grafico funziona dietro le quinte per modificare automaticamente il pulsante da giallo a rosso alla successiva aggiornamento dello schermo.</span><span class="sxs-lookup"><span data-stu-id="5b68e-135">The graphics system works behind the scenes to automatically change the button from yellow to red the next time the screen is refreshed.</span></span>

[!code-csharp[freezablesample_procedural#UnFrozenExampleShort](~/samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#unfrozenexampleshort)]
[!code-vb[freezablesample_procedural#UnFrozenExampleShort](~/samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#unfrozenexampleshort)]

### <a name="freezing-a-freezable"></a><span data-ttu-id="5b68e-136">Blocco di un oggetto Freezable</span><span class="sxs-lookup"><span data-stu-id="5b68e-136">Freezing a Freezable</span></span>

<span data-ttu-id="5b68e-137">Per rendere <xref:System.Windows.Freezable> immodificabile, chiamare il relativo <xref:System.Windows.Freezable.Freeze%2A> metodo.</span><span class="sxs-lookup"><span data-stu-id="5b68e-137">To make a <xref:System.Windows.Freezable> unmodifiable, you call its <xref:System.Windows.Freezable.Freeze%2A> method.</span></span> <span data-ttu-id="5b68e-138">Quando si blocca un oggetto che contiene oggetti Freezable, anche questi oggetti sono bloccati.</span><span class="sxs-lookup"><span data-stu-id="5b68e-138">When you freeze an object that contains freezable objects, those objects are frozen as well.</span></span> <span data-ttu-id="5b68e-139">Se, ad esempio, si blocca <xref:System.Windows.Media.PathGeometry>un oggetto, le figure e i segmenti in esso contenuti verrebbero bloccati.</span><span class="sxs-lookup"><span data-stu-id="5b68e-139">For example, if you freeze a <xref:System.Windows.Media.PathGeometry>, the figures and segments it contains would be frozen too.</span></span>

<span data-ttu-id="5b68e-140">Un oggetto Freezable **non può** essere bloccato se si verifica una delle condizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="5b68e-140">A Freezable **can't** be frozen if any of the following are true:</span></span>

- <span data-ttu-id="5b68e-141">Dispone di proprietà animate o con associazione a dati.</span><span class="sxs-lookup"><span data-stu-id="5b68e-141">It has animated or data bound properties.</span></span>

- <span data-ttu-id="5b68e-142">Dispone di proprietà impostate da una risorsa dinamica.</span><span class="sxs-lookup"><span data-stu-id="5b68e-142">It has properties set by a dynamic resource.</span></span> <span data-ttu-id="5b68e-143">Per ulteriori informazioni sulle risorse dinamiche, vedere le [risorse XAML](xaml-resources.md) .</span><span class="sxs-lookup"><span data-stu-id="5b68e-143">(See the [XAML Resources](xaml-resources.md) for more information about dynamic resources.)</span></span>

- <span data-ttu-id="5b68e-144">Contiene <xref:System.Windows.Freezable> oggetti secondari che non possono essere bloccati.</span><span class="sxs-lookup"><span data-stu-id="5b68e-144">It contains <xref:System.Windows.Freezable> sub-objects that can't be frozen.</span></span>

<span data-ttu-id="5b68e-145">Se queste condizioni sono false e non si intende modificare il <xref:System.Windows.Freezable>, è consigliabile bloccarlo per ottenere i vantaggi in termini di prestazioni descritti in precedenza.</span><span class="sxs-lookup"><span data-stu-id="5b68e-145">If these conditions are false, and you don't intend to modify the <xref:System.Windows.Freezable>, then you should freeze it to gain the performance benefits described earlier.</span></span>

<span data-ttu-id="5b68e-146">Una volta chiamato il metodo di <xref:System.Windows.Freezable.Freeze%2A> un oggetto Freezable, non è più possibile modificarlo.</span><span class="sxs-lookup"><span data-stu-id="5b68e-146">Once you call a freezable's <xref:System.Windows.Freezable.Freeze%2A> method, it can no longer be modified.</span></span> <span data-ttu-id="5b68e-147">Il tentativo di modificare un oggetto bloccato causa la <xref:System.InvalidOperationException> generazione di un'eccezione.</span><span class="sxs-lookup"><span data-stu-id="5b68e-147">Attempting to modify a frozen object causes an <xref:System.InvalidOperationException> to be thrown.</span></span> <span data-ttu-id="5b68e-148">Il codice seguente genera un'eccezione, perché si tenta di modificare il pennello dopo che è stato bloccato.</span><span class="sxs-lookup"><span data-stu-id="5b68e-148">The following code throws an exception, because we attempt to modify the brush after it's been frozen.</span></span>

[!code-csharp[freezablesample_procedural#ExceptionExample](~/samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#exceptionexample)]
[!code-vb[freezablesample_procedural#ExceptionExample](~/samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#exceptionexample)]

<span data-ttu-id="5b68e-149">Per evitare di generare questa eccezione, è possibile usare <xref:System.Windows.Freezable.IsFrozen%2A> il metodo per determinare se <xref:System.Windows.Freezable> un oggetto è bloccato.</span><span class="sxs-lookup"><span data-stu-id="5b68e-149">To avoid throwing this exception, you can use the <xref:System.Windows.Freezable.IsFrozen%2A> method to determine whether a <xref:System.Windows.Freezable> is frozen.</span></span>

[!code-csharp[freezablesample_procedural#CheckIsFrozenExample](~/samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#checkisfrozenexample)]
[!code-vb[freezablesample_procedural#CheckIsFrozenExample](~/samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#checkisfrozenexample)]

<span data-ttu-id="5b68e-150">Nell'esempio di codice precedente, è stata eseguita una copia modificabile di un oggetto bloccato <xref:System.Windows.Freezable.Clone%2A> usando il metodo.</span><span class="sxs-lookup"><span data-stu-id="5b68e-150">In the preceding code example, a modifiable copy was made of a frozen object using the <xref:System.Windows.Freezable.Clone%2A> method.</span></span> <span data-ttu-id="5b68e-151">La sezione successiva illustra la clonazione in modo più dettagliato.</span><span class="sxs-lookup"><span data-stu-id="5b68e-151">The next section discusses cloning in more detail.</span></span>

> [!NOTE]
> <span data-ttu-id="5b68e-152">Poiché non è possibile animare un oggetto Freezable bloccato, il sistema di animazione creerà automaticamente cloni <xref:System.Windows.Freezable> modificabili di oggetti bloccati quando si tenta di animarli con un oggetto. <xref:System.Windows.Media.Animation.Storyboard></span><span class="sxs-lookup"><span data-stu-id="5b68e-152">Because a frozen freezable cannot be animated, the animation system will automatically create modifiable clones of frozen <xref:System.Windows.Freezable> objects when you try to animate them with a <xref:System.Windows.Media.Animation.Storyboard>.</span></span> <span data-ttu-id="5b68e-153">Per eliminare l'overhead delle prestazioni causato dalla clonazione, lasciare un oggetto non bloccato se si intende animarlo.</span><span class="sxs-lookup"><span data-stu-id="5b68e-153">To eliminate the performance overhead caused by cloning, leave an object unfrozen if you intend to animate it.</span></span> <span data-ttu-id="5b68e-154">Per ulteriori informazioni sull'animazione con gli storyboard, vedere [Cenni preliminari sugli storyboard](../graphics-multimedia/storyboards-overview.md).</span><span class="sxs-lookup"><span data-stu-id="5b68e-154">For more information about animating with storyboards, see the [Storyboards Overview](../graphics-multimedia/storyboards-overview.md).</span></span>

### <a name="freezing-from-markup"></a><span data-ttu-id="5b68e-155">Blocco dal markup</span><span class="sxs-lookup"><span data-stu-id="5b68e-155">Freezing from Markup</span></span>

<span data-ttu-id="5b68e-156">Per bloccare un <xref:System.Windows.Freezable> oggetto dichiarato nel markup, usare l' `PresentationOptions:Freeze` attributo.</span><span class="sxs-lookup"><span data-stu-id="5b68e-156">To freeze a <xref:System.Windows.Freezable> object declared in markup, you use the `PresentationOptions:Freeze` attribute.</span></span> <span data-ttu-id="5b68e-157">Nell'esempio seguente un oggetto <xref:System.Windows.Media.SolidColorBrush> viene dichiarato come risorsa di pagina e bloccato.</span><span class="sxs-lookup"><span data-stu-id="5b68e-157">In the following example, a <xref:System.Windows.Media.SolidColorBrush> is declared as a page resource and frozen.</span></span> <span data-ttu-id="5b68e-158">Viene quindi usato per impostare lo sfondo di un pulsante.</span><span class="sxs-lookup"><span data-stu-id="5b68e-158">It is then used to set the background of a button.</span></span>

[!code-xaml[FreezableSample#FreezeFromMarkupWholePage](~/samples/snippets/csharp/VS_Snippets_Wpf/FreezableSample/CS/FreezeFromMarkupExample.xaml#freezefrommarkupwholepage)]

<span data-ttu-id="5b68e-159">Per utilizzare l' `Freeze` attributo, è necessario eseguire il mapping allo spazio dei nomi `http://schemas.microsoft.com/winfx/2006/xaml/presentation/options`delle opzioni di presentazione:.</span><span class="sxs-lookup"><span data-stu-id="5b68e-159">To use the `Freeze` attribute, you must map to the presentation options namespace: `http://schemas.microsoft.com/winfx/2006/xaml/presentation/options`.</span></span> <span data-ttu-id="5b68e-160">`PresentationOptions`è il prefisso consigliato per il mapping di questo spazio dei nomi:</span><span class="sxs-lookup"><span data-stu-id="5b68e-160">`PresentationOptions` is the recommended prefix for mapping this namespace:</span></span>

```xaml
xmlns:PresentationOptions="http://schemas.microsoft.com/winfx/2006/xaml/presentation/options"
```

<span data-ttu-id="5b68e-161">Poiché non tutti i lettori XAML riconoscono questo attributo, è consigliabile usare l' [attributo MC: Ignorable](mc-ignorable-attribute.md) per contrassegnare `Presentation:Freeze` l'attributo come ignorabile:</span><span class="sxs-lookup"><span data-stu-id="5b68e-161">Because not all XAML readers recognize this attribute, it's recommended that you use the [mc:Ignorable Attribute](mc-ignorable-attribute.md) to mark the `Presentation:Freeze` attribute as ignorable:</span></span>

```xaml
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="PresentationOptions"
```

<span data-ttu-id="5b68e-162">Per ulteriori informazioni, vedere la pagina relativa all' [attributo MC: Ignorable](mc-ignorable-attribute.md) .</span><span class="sxs-lookup"><span data-stu-id="5b68e-162">For more information, see the [mc:Ignorable Attribute](mc-ignorable-attribute.md) page.</span></span>

### <a name="unfreezing-a-freezable"></a><span data-ttu-id="5b68e-163">"Sblocco" di un oggetto Freezable</span><span class="sxs-lookup"><span data-stu-id="5b68e-163">"Unfreezing" a Freezable</span></span>

<span data-ttu-id="5b68e-164">Una volta bloccato, <xref:System.Windows.Freezable> un oggetto non può mai essere modificato o sbloccato; tuttavia, è possibile creare un clone non <xref:System.Windows.Freezable.Clone%2A> bloccato <xref:System.Windows.Freezable.CloneCurrentValue%2A> usando il metodo o.</span><span class="sxs-lookup"><span data-stu-id="5b68e-164">Once frozen, a <xref:System.Windows.Freezable> can never be modified or unfrozen; however, you can create an unfrozen clone using the <xref:System.Windows.Freezable.Clone%2A> or <xref:System.Windows.Freezable.CloneCurrentValue%2A> method.</span></span>

<span data-ttu-id="5b68e-165">Nell'esempio seguente lo sfondo del pulsante viene impostato con un pennello e il pennello viene quindi bloccato.</span><span class="sxs-lookup"><span data-stu-id="5b68e-165">In the following example, the button's background is set with a brush and that brush is then frozen.</span></span> <span data-ttu-id="5b68e-166">Viene eseguita una copia non bloccata del pennello utilizzando il <xref:System.Windows.Freezable.Clone%2A> metodo.</span><span class="sxs-lookup"><span data-stu-id="5b68e-166">An unfrozen copy is made of the brush using the <xref:System.Windows.Freezable.Clone%2A> method.</span></span> <span data-ttu-id="5b68e-167">Il clone viene modificato e usato per modificare lo sfondo del pulsante da giallo a rosso.</span><span class="sxs-lookup"><span data-stu-id="5b68e-167">The clone is modified and used to change the button's background from yellow to red.</span></span>

[!code-csharp[freezablesample_procedural#CloneExample](~/samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#cloneexample)]
[!code-vb[freezablesample_procedural#CloneExample](~/samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#cloneexample)]

> [!NOTE]
> <span data-ttu-id="5b68e-168">Indipendentemente dal metodo di clonazione usato, le animazioni non vengono mai copiate nel <xref:System.Windows.Freezable>nuovo oggetto.</span><span class="sxs-lookup"><span data-stu-id="5b68e-168">Regardless of which clone method you use, animations are never copied to the new <xref:System.Windows.Freezable>.</span></span>

<span data-ttu-id="5b68e-169">I <xref:System.Windows.Freezable.Clone%2A> metodi <xref:System.Windows.Freezable.CloneCurrentValue%2A> e producono copie complete dell'oggetto Freezable.</span><span class="sxs-lookup"><span data-stu-id="5b68e-169">The <xref:System.Windows.Freezable.Clone%2A> and <xref:System.Windows.Freezable.CloneCurrentValue%2A> methods produce deep copies of the freezable.</span></span> <span data-ttu-id="5b68e-170">Se l'oggetto Freezable contiene altri oggetti Freezable bloccati, questi vengono anche clonati e resi modificabili.</span><span class="sxs-lookup"><span data-stu-id="5b68e-170">If the freezable contains other frozen freezable objects, they are also cloned and made modifiable.</span></span> <span data-ttu-id="5b68e-171">Se, ad esempio, si clona un <xref:System.Windows.Media.PathGeometry> oggetto bloccato per renderlo modificabile, anche le figure e i segmenti in esso contenuti vengono copiati e resi modificabili.</span><span class="sxs-lookup"><span data-stu-id="5b68e-171">For example, if you clone a frozen <xref:System.Windows.Media.PathGeometry> to make it modifiable, the figures and segments it contains are also copied and made modifiable.</span></span>

<a name="createyourownfreezableclass"></a>

## <a name="creating-your-own-freezable-class"></a><span data-ttu-id="5b68e-172">Creazione di una classe Freezable personalizzata</span><span class="sxs-lookup"><span data-stu-id="5b68e-172">Creating Your Own Freezable Class</span></span>

<span data-ttu-id="5b68e-173">Una classe che deriva da <xref:System.Windows.Freezable> ottiene le funzionalità seguenti.</span><span class="sxs-lookup"><span data-stu-id="5b68e-173">A class that derives from <xref:System.Windows.Freezable> gains the following features.</span></span>

- <span data-ttu-id="5b68e-174">Stati speciali: uno stato di sola lettura (bloccato) e scrivibile.</span><span class="sxs-lookup"><span data-stu-id="5b68e-174">Special states: a read-only (frozen) and a writable state.</span></span>

- <span data-ttu-id="5b68e-175">Thread safety: un <xref:System.Windows.Freezable> oggetto bloccato può essere condiviso tra thread.</span><span class="sxs-lookup"><span data-stu-id="5b68e-175">Thread safety: a frozen <xref:System.Windows.Freezable> can be shared across threads.</span></span>

- <span data-ttu-id="5b68e-176">Notifica dettagliata delle modifiche: Diversamente da altri <xref:System.Windows.DependencyObject>, gli oggetti Freezable forniscono notifiche di modifica quando cambiano i valori delle sottoproprietà.</span><span class="sxs-lookup"><span data-stu-id="5b68e-176">Detailed change notification: Unlike other <xref:System.Windows.DependencyObject>s, Freezable objects provide change notifications when sub-property values change.</span></span>

- <span data-ttu-id="5b68e-177">Clonazione semplice: la classe Freezable ha già implementato diversi metodi che producono cloni profondi.</span><span class="sxs-lookup"><span data-stu-id="5b68e-177">Easy cloning: the Freezable class has already implemented several methods that produce deep clones.</span></span>

<span data-ttu-id="5b68e-178">Un <xref:System.Windows.Freezable> è un tipo di <xref:System.Windows.DependencyObject>e pertanto utilizza il sistema di proprietà di dipendenza.</span><span class="sxs-lookup"><span data-stu-id="5b68e-178">A <xref:System.Windows.Freezable> is a type of <xref:System.Windows.DependencyObject>, and therefore uses the dependency property system.</span></span> <span data-ttu-id="5b68e-179">Non è necessario che le proprietà della classe siano proprietà di dipendenza, ma l'uso delle proprietà di dipendenza ridurrà la quantità di codice da <xref:System.Windows.Freezable> scrivere, perché la classe è stata progettata tenendo conto delle proprietà di dipendenza.</span><span class="sxs-lookup"><span data-stu-id="5b68e-179">Your class properties don't have to be dependency properties, but using dependency properties will reduce the amount of code you have to write, because the <xref:System.Windows.Freezable> class was designed with dependency properties in mind.</span></span> <span data-ttu-id="5b68e-180">Per ulteriori informazioni sul sistema di proprietà di dipendenza, vedere [Cenni preliminari sulle proprietà di dipendenza](dependency-properties-overview.md).</span><span class="sxs-lookup"><span data-stu-id="5b68e-180">For more information about the dependency property system, see the [Dependency Properties Overview](dependency-properties-overview.md).</span></span>

<span data-ttu-id="5b68e-181">Ogni <xref:System.Windows.Freezable> sottoclasse deve eseguire <xref:System.Windows.Freezable.CreateInstanceCore%2A> l'override del metodo.</span><span class="sxs-lookup"><span data-stu-id="5b68e-181">Every <xref:System.Windows.Freezable> subclass must override the <xref:System.Windows.Freezable.CreateInstanceCore%2A> method.</span></span> <span data-ttu-id="5b68e-182">Se la classe USA proprietà di dipendenza per tutti i dati, l'operazione è terminata.</span><span class="sxs-lookup"><span data-stu-id="5b68e-182">If your class uses dependency properties for all its data, you're finished.</span></span>

<span data-ttu-id="5b68e-183">Se la classe contiene membri dati di proprietà non di dipendenza, è necessario anche eseguire l'override dei metodi seguenti:</span><span class="sxs-lookup"><span data-stu-id="5b68e-183">If your class contains non-dependency property data members, you must also override the following methods:</span></span>

- <xref:System.Windows.Freezable.CloneCore%2A>

- <xref:System.Windows.Freezable.CloneCurrentValueCore%2A>

- <xref:System.Windows.Freezable.GetAsFrozenCore%2A>

- <xref:System.Windows.Freezable.GetCurrentValueAsFrozenCore%2A>

- <xref:System.Windows.Freezable.FreezeCore%2A>

<span data-ttu-id="5b68e-184">È inoltre necessario osservare le regole seguenti per l'accesso e la scrittura a membri dati che non sono proprietà di dipendenza:</span><span class="sxs-lookup"><span data-stu-id="5b68e-184">You must also observe the following rules for accessing and writing to data members that are not dependency properties:</span></span>

- <span data-ttu-id="5b68e-185">All'inizio di qualsiasi API che legge i membri dati della proprietà non di dipendenza, chiamare <xref:System.Windows.Freezable.ReadPreamble%2A> il metodo.</span><span class="sxs-lookup"><span data-stu-id="5b68e-185">At the beginning of any API that reads non-dependency property data members, call the <xref:System.Windows.Freezable.ReadPreamble%2A> method.</span></span>

- <span data-ttu-id="5b68e-186">All'inizio di qualsiasi API che scrive i membri dati della proprietà non di dipendenza, chiamare <xref:System.Windows.Freezable.WritePreamble%2A> il metodo.</span><span class="sxs-lookup"><span data-stu-id="5b68e-186">At the beginning of any API that writes non-dependency property data members, call the <xref:System.Windows.Freezable.WritePreamble%2A> method.</span></span> <span data-ttu-id="5b68e-187">(Dopo aver chiamato <xref:System.Windows.Freezable.WritePreamble%2A> in un'API, non è necessario effettuare una chiamata aggiuntiva a <xref:System.Windows.Freezable.ReadPreamble%2A> se si leggono anche i membri dati della proprietà non di dipendenza).</span><span class="sxs-lookup"><span data-stu-id="5b68e-187">(Once you've called <xref:System.Windows.Freezable.WritePreamble%2A> in an API, you don't need to make an additional call to <xref:System.Windows.Freezable.ReadPreamble%2A> if you also read non-dependency property data members.)</span></span>

- <span data-ttu-id="5b68e-188">Chiamare il <xref:System.Windows.Freezable.WritePostscript%2A> metodo prima di uscire da metodi che scrivono in membri dati di proprietà non di dipendenza.</span><span class="sxs-lookup"><span data-stu-id="5b68e-188">Call the <xref:System.Windows.Freezable.WritePostscript%2A> method before exiting methods that write to non-dependency property data members.</span></span>

<span data-ttu-id="5b68e-189">Se la classe contiene membri dati di proprietà non dipendenza che sono <xref:System.Windows.DependencyObject> oggetti, è necessario chiamare anche il <xref:System.Windows.Freezable.OnFreezablePropertyChanged%2A> metodo ogni volta che si modifica uno dei relativi valori, anche se si imposta il membro su `null`.</span><span class="sxs-lookup"><span data-stu-id="5b68e-189">If your class contains non-dependency-property data members that are <xref:System.Windows.DependencyObject> objects, you must also call the <xref:System.Windows.Freezable.OnFreezablePropertyChanged%2A> method each time you change one of their values, even if you're setting the member to `null`.</span></span>

> [!NOTE]
> <span data-ttu-id="5b68e-190">È molto importante iniziare ogni <xref:System.Windows.Freezable> metodo di cui si esegue l'override con una chiamata all'implementazione di base.</span><span class="sxs-lookup"><span data-stu-id="5b68e-190">It's very important that you begin each <xref:System.Windows.Freezable> method you override with a call to the base implementation.</span></span>

<span data-ttu-id="5b68e-191">Per un esempio di classe personalizzata <xref:System.Windows.Freezable> , vedere l' [esempio di animazione personalizzata](https://go.microsoft.com/fwlink/?LinkID=159981).</span><span class="sxs-lookup"><span data-stu-id="5b68e-191">For an example of a custom <xref:System.Windows.Freezable> class, see the [Custom Animation Sample](https://go.microsoft.com/fwlink/?LinkID=159981).</span></span>

## <a name="see-also"></a><span data-ttu-id="5b68e-192">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="5b68e-192">See also</span></span>

- <xref:System.Windows.Freezable>
- [<span data-ttu-id="5b68e-193">Esempio di animazione personalizzata</span><span class="sxs-lookup"><span data-stu-id="5b68e-193">Custom Animation Sample</span></span>](https://go.microsoft.com/fwlink/?LinkID=159981)
- [<span data-ttu-id="5b68e-194">Panoramica sulle proprietà di dipendenza</span><span class="sxs-lookup"><span data-stu-id="5b68e-194">Dependency Properties Overview</span></span>](dependency-properties-overview.md)
- [<span data-ttu-id="5b68e-195">Proprietà di dipendenza personalizzate</span><span class="sxs-lookup"><span data-stu-id="5b68e-195">Custom Dependency Properties</span></span>](custom-dependency-properties.md)

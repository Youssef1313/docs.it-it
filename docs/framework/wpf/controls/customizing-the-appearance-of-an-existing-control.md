---
title: Personalizzazione dell'aspetto di un controllo esistente mediante la creazione di un oggetto ControlTemplate
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- control contract [WPF]
- controls [WPF], visual structure changes
- ControlTemplate [WPF], customizing for existing controls
- skinning controls [WPF]
- controls [WPF], appearance specified by state
- templates [WPF], custom for existing controls
ms.assetid: 678dd116-43a2-4b8c-82b5-6b826f126e31
ms.openlocfilehash: 0c79ba3dd42f2e65eb241409946e921577ced5f1
ms.sourcegitcommit: 82f94a44ad5c64a399df2a03fa842db308185a76
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/25/2019
ms.locfileid: "72920058"
---
# <a name="customizing-the-appearance-of-an-existing-control-by-creating-a-controltemplate"></a><span data-ttu-id="87a03-102">Personalizzazione dell'aspetto di un controllo esistente mediante la creazione di un oggetto ControlTemplate</span><span class="sxs-lookup"><span data-stu-id="87a03-102">Customizing the Appearance of an Existing Control by Creating a ControlTemplate</span></span>
<a name="introduction"></a><span data-ttu-id="87a03-103">Un <xref:System.Windows.Controls.ControlTemplate> specifica la struttura visiva e il comportamento visivo di un controllo.</span><span class="sxs-lookup"><span data-stu-id="87a03-103">A <xref:System.Windows.Controls.ControlTemplate> specifies the visual structure and visual behavior of a control.</span></span> <span data-ttu-id="87a03-104">È possibile personalizzare l'aspetto di un controllo assegnando un nuovo <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="87a03-104">You can customize the appearance of a control by giving it a new <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="87a03-105">Quando si crea una <xref:System.Windows.Controls.ControlTemplate>, si sostituisce l'aspetto di un controllo esistente senza modificarne la funzionalità.</span><span class="sxs-lookup"><span data-stu-id="87a03-105">When you create a <xref:System.Windows.Controls.ControlTemplate>, you replace the appearance of an existing control without changing its functionality.</span></span> <span data-ttu-id="87a03-106">È ad esempio possibile fare in modo che i pulsanti all'interno dell'applicazione si trovino invece della forma quadrata predefinita, ma il pulsante genera comunque l'evento <xref:System.Windows.Controls.Primitives.ButtonBase.Click>.</span><span class="sxs-lookup"><span data-stu-id="87a03-106">For example, you can make the buttons in your application round instead of the default square shape, but the button will still raise the <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event.</span></span>

 <span data-ttu-id="87a03-107">In questo argomento vengono illustrate le varie parti di un <xref:System.Windows.Controls.ControlTemplate>, viene illustrata la creazione di una semplice <xref:System.Windows.Controls.ControlTemplate> per un <xref:System.Windows.Controls.Button>e viene illustrato come comprendere il contratto di controllo di un controllo in modo che sia possibile personalizzarne l'aspetto.</span><span class="sxs-lookup"><span data-stu-id="87a03-107">This topic explains the various parts of a <xref:System.Windows.Controls.ControlTemplate>, demonstrates creating a simple <xref:System.Windows.Controls.ControlTemplate> for a <xref:System.Windows.Controls.Button>, and explains how to understand the control contract of a control so that you can customize its appearance.</span></span> <span data-ttu-id="87a03-108">Poiché si crea un <xref:System.Windows.Controls.ControlTemplate> in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], è possibile modificare l'aspetto di un controllo senza scrivere alcun codice.</span><span class="sxs-lookup"><span data-stu-id="87a03-108">Because you create a <xref:System.Windows.Controls.ControlTemplate> in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], you can change a control's appearance without writing any code.</span></span> <span data-ttu-id="87a03-109">È anche possibile usare una finestra di progettazione, ad esempio Blend per Visual Studio, per creare modelli di controlli personalizzati.</span><span class="sxs-lookup"><span data-stu-id="87a03-109">You can also use a designer, such as Blend for Visual Studio, to create custom control templates.</span></span> <span data-ttu-id="87a03-110">In questo argomento vengono illustrati alcuni esempi nell'[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] che personalizzano l'aspetto di un <xref:System.Windows.Controls.Button> e viene elencato l'esempio completo alla fine dell'argomento.</span><span class="sxs-lookup"><span data-stu-id="87a03-110">This topic shows examples in the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] that customize the appearance of a <xref:System.Windows.Controls.Button> and lists the complete example at the end of the topic.</span></span> <span data-ttu-id="87a03-111">Per ulteriori informazioni sull'utilizzo di Blend per Visual Studio, vedere applicazione di [stili a un controllo che supporta modelli](https://go.microsoft.com/fwlink/?LinkId=161153).</span><span class="sxs-lookup"><span data-stu-id="87a03-111">For more information about using Blend for Visual Studio, see [Styling a control that supports templates](https://go.microsoft.com/fwlink/?LinkId=161153).</span></span>

 <span data-ttu-id="87a03-112">Le illustrazioni seguenti mostrano un <xref:System.Windows.Controls.Button> che usa il <xref:System.Windows.Controls.ControlTemplate> creato in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="87a03-112">The following illustrations show a <xref:System.Windows.Controls.Button> that uses the <xref:System.Windows.Controls.ControlTemplate> that is created in this topic.</span></span>

 <span data-ttu-id="87a03-113">![Pulsante con un modello del controllo personalizzato.](./media/ndp-buttonnormal.png "NDP_ButtonNormal")</span><span class="sxs-lookup"><span data-stu-id="87a03-113">![A button with a custom control template.](./media/ndp-buttonnormal.png "NDP_ButtonNormal")</span></span>
<span data-ttu-id="87a03-114">Pulsante che usa un modello del controllo personalizzato</span><span class="sxs-lookup"><span data-stu-id="87a03-114">A button that uses a custom control template</span></span>

 <span data-ttu-id="87a03-115">![Pulsante con un bordo rosso.](./media/ndp-buttonmouseover.png "NDP_ButtonMouseOver")</span><span class="sxs-lookup"><span data-stu-id="87a03-115">![A button with a red border.](./media/ndp-buttonmouseover.png "NDP_ButtonMouseOver")</span></span>
<span data-ttu-id="87a03-116">Pulsante che usa un modello del controllo personalizzato e su cui è posizionato il puntatore del mouse</span><span class="sxs-lookup"><span data-stu-id="87a03-116">A button that uses a custom control template and has the mouse pointer over it</span></span>

<a name="prerequisites"></a>
## <a name="prerequisites"></a><span data-ttu-id="87a03-117">Prerequisites</span><span class="sxs-lookup"><span data-stu-id="87a03-117">Prerequisites</span></span>
 <span data-ttu-id="87a03-118">Questo argomento si basa sul presupposto che si sappiano creare e usare i controlli e gli stili come descritto in [Controlli](index.md).</span><span class="sxs-lookup"><span data-stu-id="87a03-118">This topic assumes that you understand how to create and use controls and styles as discussed in [Controls](index.md).</span></span> <span data-ttu-id="87a03-119">I concetti illustrati in questo argomento si applicano agli elementi che ereditano dalla classe <xref:System.Windows.Controls.Control>, ad eccezione del <xref:System.Windows.Controls.UserControl>.</span><span class="sxs-lookup"><span data-stu-id="87a03-119">The concepts discussed in this topic apply to elements that inherit from the <xref:System.Windows.Controls.Control> class, except for the <xref:System.Windows.Controls.UserControl>.</span></span> <span data-ttu-id="87a03-120">Non è possibile applicare una <xref:System.Windows.Controls.ControlTemplate> a un <xref:System.Windows.Controls.UserControl>.</span><span class="sxs-lookup"><span data-stu-id="87a03-120">You cannot apply a <xref:System.Windows.Controls.ControlTemplate> to a <xref:System.Windows.Controls.UserControl>.</span></span>

<a name="when_you_should_create_a_controltemplate"></a>
## <a name="when-you-should-create-a-controltemplate"></a><span data-ttu-id="87a03-121">Quando creare un oggetto ControlTemplate</span><span class="sxs-lookup"><span data-stu-id="87a03-121">When You Should Create a ControlTemplate</span></span>
 <span data-ttu-id="87a03-122">I controlli hanno molte proprietà, ad esempio <xref:System.Windows.Controls.Border.Background%2A>, <xref:System.Windows.Controls.Control.Foreground%2A>e <xref:System.Windows.Controls.Control.FontFamily%2A>, che è possibile impostare per specificare diversi aspetti dell'aspetto del controllo, ma le modifiche che è possibile apportare impostando queste proprietà sono limitate.</span><span class="sxs-lookup"><span data-stu-id="87a03-122">Controls have many properties, such as <xref:System.Windows.Controls.Border.Background%2A>, <xref:System.Windows.Controls.Control.Foreground%2A>, and <xref:System.Windows.Controls.Control.FontFamily%2A>, that you can set to specify different aspects of the control's appearance, but the changes that you can make by setting these properties are limited.</span></span> <span data-ttu-id="87a03-123">Ad esempio, è possibile impostare la proprietà <xref:System.Windows.Controls.Control.Foreground%2A> su Blue e <xref:System.Windows.Controls.Control.FontStyle%2A> su Italic in un <xref:System.Windows.Controls.CheckBox>.</span><span class="sxs-lookup"><span data-stu-id="87a03-123">For example, you can set the <xref:System.Windows.Controls.Control.Foreground%2A> property to blue and <xref:System.Windows.Controls.Control.FontStyle%2A> to italic on a <xref:System.Windows.Controls.CheckBox>.</span></span>

 <span data-ttu-id="87a03-124">Senza la possibilità di creare una nuova <xref:System.Windows.Controls.ControlTemplate> per i controlli, tutti i controlli in ogni applicazione basata su [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]hanno lo stesso aspetto generale, che limita la possibilità di creare un'applicazione con un aspetto personalizzato.</span><span class="sxs-lookup"><span data-stu-id="87a03-124">Without the ability to create a new <xref:System.Windows.Controls.ControlTemplate> for controls, all controls in every [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]-based application would have the same general appearance, which would limit the ability to create an application with a custom look and feel.</span></span> <span data-ttu-id="87a03-125">Per impostazione predefinita, ogni <xref:System.Windows.Controls.CheckBox> presenta caratteristiche simili.</span><span class="sxs-lookup"><span data-stu-id="87a03-125">By default, every <xref:System.Windows.Controls.CheckBox> has similar characteristics.</span></span> <span data-ttu-id="87a03-126">Ad esempio, il contenuto del <xref:System.Windows.Controls.CheckBox> è sempre a destra dell'indicatore di selezione e il segno di spunta viene sempre usato per indicare che è selezionata l'<xref:System.Windows.Controls.CheckBox>.</span><span class="sxs-lookup"><span data-stu-id="87a03-126">For example, the content of the <xref:System.Windows.Controls.CheckBox> is always to the right of the selection indicator, and the check mark is always used to indicate that the <xref:System.Windows.Controls.CheckBox> is selected.</span></span>

 <span data-ttu-id="87a03-127">Viene creato un <xref:System.Windows.Controls.ControlTemplate> quando si desidera personalizzare l'aspetto del controllo oltre a quello che l'impostazione delle altre proprietà del controllo.</span><span class="sxs-lookup"><span data-stu-id="87a03-127">You create a <xref:System.Windows.Controls.ControlTemplate> when you want to customize the control's appearance beyond what setting the other properties on the control will do.</span></span> <span data-ttu-id="87a03-128">Nell'esempio di <xref:System.Windows.Controls.CheckBox>si supponga che il contenuto della casella di controllo sia sopra l'indicatore di selezione e che si desideri che la X indichi che la <xref:System.Windows.Controls.CheckBox> è selezionata.</span><span class="sxs-lookup"><span data-stu-id="87a03-128">In the example of the <xref:System.Windows.Controls.CheckBox>, suppose that you want the content of the check box to be above the selection indicator and you want an X to indicate that the <xref:System.Windows.Controls.CheckBox> is selected.</span></span> <span data-ttu-id="87a03-129">Queste modifiche vengono specificate nella <xref:System.Windows.Controls.ControlTemplate> della <xref:System.Windows.Controls.CheckBox>.</span><span class="sxs-lookup"><span data-stu-id="87a03-129">You specify these changes in the <xref:System.Windows.Controls.ControlTemplate> of the <xref:System.Windows.Controls.CheckBox>.</span></span>

 <span data-ttu-id="87a03-130">Nella figura seguente viene illustrato un <xref:System.Windows.Controls.CheckBox> che utilizza una <xref:System.Windows.Controls.ControlTemplate>predefinita.</span><span class="sxs-lookup"><span data-stu-id="87a03-130">The following illustration shows a <xref:System.Windows.Controls.CheckBox> that uses a default <xref:System.Windows.Controls.ControlTemplate>.</span></span>

 <span data-ttu-id="87a03-131">![Casella di controllo con il modello del controllo predefinito.](./media/ndp-checkboxdefault.png "NDP_CheckBoxDefault")</span><span class="sxs-lookup"><span data-stu-id="87a03-131">![A checkbox with the default control template.](./media/ndp-checkboxdefault.png "NDP_CheckBoxDefault")</span></span>
<span data-ttu-id="87a03-132">Oggetto CheckBox che usa il modello del controllo predefinito</span><span class="sxs-lookup"><span data-stu-id="87a03-132">A CheckBox that uses the default control template</span></span>

 <span data-ttu-id="87a03-133">Nella figura seguente viene illustrato un <xref:System.Windows.Controls.CheckBox> che utilizza una <xref:System.Windows.Controls.ControlTemplate> personalizzata per inserire il contenuto del <xref:System.Windows.Controls.CheckBox> sopra l'indicatore di selezione e visualizza una X quando viene selezionata la <xref:System.Windows.Controls.CheckBox>.</span><span class="sxs-lookup"><span data-stu-id="87a03-133">The following illustration shows a <xref:System.Windows.Controls.CheckBox> that uses a custom <xref:System.Windows.Controls.ControlTemplate> to place the content of the <xref:System.Windows.Controls.CheckBox> above the selection indicator and displays an X when the <xref:System.Windows.Controls.CheckBox> is selected.</span></span>

 <span data-ttu-id="87a03-134">![Casella di controllo con un modello del controllo personalizzato.](./media/ndp-checkboxcustom.png "NDP_CheckBoxCustom")</span><span class="sxs-lookup"><span data-stu-id="87a03-134">![A checkbox with a custom control template.](./media/ndp-checkboxcustom.png "NDP_CheckBoxCustom")</span></span>
<span data-ttu-id="87a03-135">Oggetto CheckBox che usa un modello del controllo personalizzato</span><span class="sxs-lookup"><span data-stu-id="87a03-135">A CheckBox that uses a custom control template</span></span>

 <span data-ttu-id="87a03-136">Il <xref:System.Windows.Controls.ControlTemplate> per l'<xref:System.Windows.Controls.CheckBox> in questo esempio è relativamente complesso, quindi in questo argomento viene utilizzato un esempio più semplice di creazione di un <xref:System.Windows.Controls.ControlTemplate> per un <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="87a03-136">The <xref:System.Windows.Controls.ControlTemplate> for the <xref:System.Windows.Controls.CheckBox> in this sample is relatively complex, so this topic uses a simpler example of creating a <xref:System.Windows.Controls.ControlTemplate> for a <xref:System.Windows.Controls.Button>.</span></span>

<a name="changing_the_visual_structure_of_a_control"></a>
## <a name="changing-the-visual-structure-of-a-control"></a><span data-ttu-id="87a03-137">Modifica della struttura visiva di un controllo</span><span class="sxs-lookup"><span data-stu-id="87a03-137">Changing the Visual Structure of a Control</span></span>
 <span data-ttu-id="87a03-138">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], un controllo è spesso un oggetto <xref:System.Windows.FrameworkElement> composito.</span><span class="sxs-lookup"><span data-stu-id="87a03-138">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], a control is often a composite <xref:System.Windows.FrameworkElement> objects.</span></span> <span data-ttu-id="87a03-139">Quando si crea una <xref:System.Windows.Controls.ControlTemplate>, si combinano <xref:System.Windows.FrameworkElement> oggetti per compilare un unico controllo.</span><span class="sxs-lookup"><span data-stu-id="87a03-139">When you create a <xref:System.Windows.Controls.ControlTemplate>, you combine <xref:System.Windows.FrameworkElement> objects to build a single control.</span></span> <span data-ttu-id="87a03-140">Un <xref:System.Windows.Controls.ControlTemplate> deve avere un solo <xref:System.Windows.FrameworkElement> come elemento radice.</span><span class="sxs-lookup"><span data-stu-id="87a03-140">A <xref:System.Windows.Controls.ControlTemplate> must have only one <xref:System.Windows.FrameworkElement> as its root element.</span></span> <span data-ttu-id="87a03-141">L'elemento radice contiene in genere altri oggetti <xref:System.Windows.FrameworkElement>.</span><span class="sxs-lookup"><span data-stu-id="87a03-141">The root element usually contains other <xref:System.Windows.FrameworkElement> objects.</span></span> <span data-ttu-id="87a03-142">La combinazione degli oggetti costituisce la struttura visiva del controllo.</span><span class="sxs-lookup"><span data-stu-id="87a03-142">The combination of objects makes up the control's visual structure.</span></span>

 <span data-ttu-id="87a03-143">Nell'esempio seguente viene creata una <xref:System.Windows.Controls.ControlTemplate> personalizzata per la <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="87a03-143">The following example creates a custom <xref:System.Windows.Controls.ControlTemplate> for the <xref:System.Windows.Controls.Button>.</span></span> <span data-ttu-id="87a03-144">Il <xref:System.Windows.Controls.ControlTemplate> crea la struttura visiva del <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="87a03-144">The <xref:System.Windows.Controls.ControlTemplate> creates the visual structure of the <xref:System.Windows.Controls.Button>.</span></span> <span data-ttu-id="87a03-145">In questo esempio, l'aspetto del pulsante non cambia quando si sposta il puntatore del mouse o si fa clic su di esso.</span><span class="sxs-lookup"><span data-stu-id="87a03-145">This example does not change the button's appearance when you move the mouse pointer over it or click it.</span></span> <span data-ttu-id="87a03-146">La procedura per modificare l'aspetto del pulsante quando è in uno stato diverso viene descritta più avanti in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="87a03-146">Changing the button's appearance when it is in a different state is discussed later in this topic.</span></span>

 <span data-ttu-id="87a03-147">In questo esempio, la struttura visiva è costituita dalle parti seguenti:</span><span class="sxs-lookup"><span data-stu-id="87a03-147">In this example, the visual structure consists of the following parts:</span></span>

- <span data-ttu-id="87a03-148"><xref:System.Windows.Controls.Border> `RootElement` denominata che funge da <xref:System.Windows.FrameworkElement>radice del modello.</span><span class="sxs-lookup"><span data-stu-id="87a03-148">A <xref:System.Windows.Controls.Border> named `RootElement` that serves as the template's root <xref:System.Windows.FrameworkElement>.</span></span>

- <span data-ttu-id="87a03-149"><xref:System.Windows.Controls.Grid> figlio di `RootElement`.</span><span class="sxs-lookup"><span data-stu-id="87a03-149">A <xref:System.Windows.Controls.Grid> that is a child of `RootElement`.</span></span>

- <span data-ttu-id="87a03-150"><xref:System.Windows.Controls.ContentPresenter> che Visualizza il contenuto del pulsante.</span><span class="sxs-lookup"><span data-stu-id="87a03-150">A <xref:System.Windows.Controls.ContentPresenter> that displays the button's content.</span></span> <span data-ttu-id="87a03-151">Il <xref:System.Windows.Controls.ContentPresenter> consente la visualizzazione di qualsiasi tipo di oggetto.</span><span class="sxs-lookup"><span data-stu-id="87a03-151">The <xref:System.Windows.Controls.ContentPresenter> enables any type of object to be displayed.</span></span>

 [!code-xaml[VSMButtonTemplate#BasicTemplate](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#basictemplate)]

### <a name="preserving-the-functionality-of-a-controls-properties-by-using-templatebinding"></a><span data-ttu-id="87a03-152">Mantenimento della funzionalità delle proprietà di un controllo tramite TemplateBinding</span><span class="sxs-lookup"><span data-stu-id="87a03-152">Preserving the Functionality of a Control's Properties by Using TemplateBinding</span></span>
 <span data-ttu-id="87a03-153">Quando si crea una nuova <xref:System.Windows.Controls.ControlTemplate>, è comunque possibile usare le proprietà pubbliche per modificare l'aspetto del controllo.</span><span class="sxs-lookup"><span data-stu-id="87a03-153">When you create a new <xref:System.Windows.Controls.ControlTemplate>, you still might want to use the public properties to change the control's appearance.</span></span> <span data-ttu-id="87a03-154">L'estensione di markup [TemplateBinding](../advanced/templatebinding-markup-extension.md) associa una proprietà di un elemento che si trova nel <xref:System.Windows.Controls.ControlTemplate> a una proprietà pubblica definita dal controllo.</span><span class="sxs-lookup"><span data-stu-id="87a03-154">The [TemplateBinding](../advanced/templatebinding-markup-extension.md) markup extension binds a property of an element that is in the <xref:System.Windows.Controls.ControlTemplate> to a public property that is defined by the control.</span></span> <span data-ttu-id="87a03-155">Quando si usa [TemplateBinding](../advanced/templatebinding-markup-extension.md), si consente alle proprietà del controllo di fungere da parametri per il modello.</span><span class="sxs-lookup"><span data-stu-id="87a03-155">When you use [TemplateBinding](../advanced/templatebinding-markup-extension.md), you enable properties on the control to act as parameters to the template.</span></span> <span data-ttu-id="87a03-156">Ovvero, quando si imposta una proprietà per un controllo, tale valore viene passato all'elemento che dispone del [TemplateBinding](../advanced/templatebinding-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="87a03-156">That is, when a property on a control is set, that value is passed on to the element that has the [TemplateBinding](../advanced/templatebinding-markup-extension.md) on it.</span></span>

 <span data-ttu-id="87a03-157">Nell'esempio seguente viene ripetuta la parte dell'esempio precedente che usa l'estensione di markup [TemplateBinding](../advanced/templatebinding-markup-extension.md) per associare le proprietà degli elementi presenti nel <xref:System.Windows.Controls.ControlTemplate> alle proprietà pubbliche definite dal pulsante.</span><span class="sxs-lookup"><span data-stu-id="87a03-157">The following example repeats the part of the preceding example that uses the [TemplateBinding](../advanced/templatebinding-markup-extension.md) markup extension to bind properties of elements that are in the <xref:System.Windows.Controls.ControlTemplate> to public properties that are defined by the button.</span></span>

 [!code-xaml[VSMButtonTemplate#TemplateBinding](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#templatebinding)]

 <span data-ttu-id="87a03-158">In questo esempio, il <xref:System.Windows.Controls.Grid> ha il modello di proprietà <xref:System.Windows.Controls.Panel.Background%2A?displayProperty=nameWithType> associato <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="87a03-158">In this example, the <xref:System.Windows.Controls.Grid> has its <xref:System.Windows.Controls.Panel.Background%2A?displayProperty=nameWithType> property template bound to <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="87a03-159">Poiché <xref:System.Windows.Controls.Panel.Background%2A?displayProperty=nameWithType> è associato a un modello, è possibile creare più pulsanti che utilizzano lo stesso <xref:System.Windows.Controls.ControlTemplate> e impostare il <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType> su valori diversi su ciascun pulsante.</span><span class="sxs-lookup"><span data-stu-id="87a03-159">Because <xref:System.Windows.Controls.Panel.Background%2A?displayProperty=nameWithType> is template bound, you can create multiple buttons that use the same <xref:System.Windows.Controls.ControlTemplate> and set the <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType> to different values on each button.</span></span> <span data-ttu-id="87a03-160">Se <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType> non è associato a una proprietà di un elemento nel <xref:System.Windows.Controls.ControlTemplate>, l'impostazione del <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType> di un pulsante non avrà alcun effetto sull'aspetto del pulsante.</span><span class="sxs-lookup"><span data-stu-id="87a03-160">If <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType> was not template bound to a property of an element in the <xref:System.Windows.Controls.ControlTemplate>, setting the <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType> of a button would have no impact on the button's appearance.</span></span>

 <span data-ttu-id="87a03-161">Tenere presente che i nomi delle due proprietà non devono necessariamente essere identici.</span><span class="sxs-lookup"><span data-stu-id="87a03-161">Note that the names of the two properties do not need to be identical.</span></span> <span data-ttu-id="87a03-162">Nell'esempio precedente, la proprietà <xref:System.Windows.Controls.Control.HorizontalContentAlignment%2A?displayProperty=nameWithType> del <xref:System.Windows.Controls.Button> è associata al modello alla proprietà <xref:System.Windows.FrameworkElement.HorizontalAlignment%2A?displayProperty=nameWithType> della <xref:System.Windows.Controls.ContentPresenter>.</span><span class="sxs-lookup"><span data-stu-id="87a03-162">In the preceding example, the <xref:System.Windows.Controls.Control.HorizontalContentAlignment%2A?displayProperty=nameWithType> property of the <xref:System.Windows.Controls.Button> is template bound to the <xref:System.Windows.FrameworkElement.HorizontalAlignment%2A?displayProperty=nameWithType> property of the <xref:System.Windows.Controls.ContentPresenter>.</span></span> <span data-ttu-id="87a03-163">In questo modo il contenuto del pulsante può essere posizionato orizzontalmente.</span><span class="sxs-lookup"><span data-stu-id="87a03-163">This enables the content of the button to be positioned horizontally.</span></span> <span data-ttu-id="87a03-164"><xref:System.Windows.Controls.ContentPresenter> non dispone di una proprietà denominata `HorizontalContentAlignment`, ma <xref:System.Windows.Controls.Control.HorizontalContentAlignment%2A?displayProperty=nameWithType> può essere associata a <xref:System.Windows.FrameworkElement.HorizontalAlignment%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="87a03-164"><xref:System.Windows.Controls.ContentPresenter> does not have a property named `HorizontalContentAlignment`, but <xref:System.Windows.Controls.Control.HorizontalContentAlignment%2A?displayProperty=nameWithType> can be bound to <xref:System.Windows.FrameworkElement.HorizontalAlignment%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="87a03-165">Quando si associa al modello una proprietà, accertarsi che le proprietà di origine e destinazione siano dello stesso tipo.</span><span class="sxs-lookup"><span data-stu-id="87a03-165">When you template bind a property, be sure that the target and source properties are the same type.</span></span>

 <span data-ttu-id="87a03-166">La classe <xref:System.Windows.Controls.Control> definisce diverse proprietà che devono essere utilizzate dal modello di controllo per influire sul controllo quando vengono impostate.</span><span class="sxs-lookup"><span data-stu-id="87a03-166">The <xref:System.Windows.Controls.Control> class defines several properties that must be used by the control template to have an effect on the control when they are set.</span></span> <span data-ttu-id="87a03-167">Il modo in cui il <xref:System.Windows.Controls.ControlTemplate> usa la proprietà dipende dalla proprietà.</span><span class="sxs-lookup"><span data-stu-id="87a03-167">How the <xref:System.Windows.Controls.ControlTemplate> uses the property depends on the property.</span></span> <span data-ttu-id="87a03-168">Il <xref:System.Windows.Controls.ControlTemplate> deve utilizzare la proprietà in uno dei modi seguenti:</span><span class="sxs-lookup"><span data-stu-id="87a03-168">The <xref:System.Windows.Controls.ControlTemplate> must use the property in one of the following ways:</span></span>

- <span data-ttu-id="87a03-169">Un elemento nel modello di <xref:System.Windows.Controls.ControlTemplate> viene associato alla proprietà.</span><span class="sxs-lookup"><span data-stu-id="87a03-169">An element in the <xref:System.Windows.Controls.ControlTemplate> template binds to the property.</span></span>

- <span data-ttu-id="87a03-170">Un elemento del <xref:System.Windows.Controls.ControlTemplate> eredita la proprietà da un <xref:System.Windows.FrameworkElement>padre.</span><span class="sxs-lookup"><span data-stu-id="87a03-170">An element in the <xref:System.Windows.Controls.ControlTemplate> inherits the property from a parent <xref:System.Windows.FrameworkElement>.</span></span>

 <span data-ttu-id="87a03-171">Nella tabella seguente sono elencate le proprietà visive ereditate da un controllo dalla classe <xref:System.Windows.Controls.Control>.</span><span class="sxs-lookup"><span data-stu-id="87a03-171">The following table lists the visual properties inherited by a control from the <xref:System.Windows.Controls.Control> class.</span></span> <span data-ttu-id="87a03-172">Indica anche se il modello del controllo predefinito di un controllo usa il valore della proprietà ereditato o se deve essere associato al modello.</span><span class="sxs-lookup"><span data-stu-id="87a03-172">It also indicates whether the default control template of a control uses the inherited property value or if it must be template bound.</span></span>

|<span data-ttu-id="87a03-173">proprietà</span><span class="sxs-lookup"><span data-stu-id="87a03-173">Property</span></span>|<span data-ttu-id="87a03-174">Metodo di utilizzo</span><span class="sxs-lookup"><span data-stu-id="87a03-174">Usage method</span></span>|
|--------------|------------------|
|<xref:System.Windows.Controls.Control.Background%2A>|<span data-ttu-id="87a03-175">Associazione a modello</span><span class="sxs-lookup"><span data-stu-id="87a03-175">Template binding</span></span>|
|<xref:System.Windows.Controls.Control.BorderThickness%2A>|<span data-ttu-id="87a03-176">Associazione a modello</span><span class="sxs-lookup"><span data-stu-id="87a03-176">Template binding</span></span>|
|<xref:System.Windows.Controls.Control.BorderBrush%2A>|<span data-ttu-id="87a03-177">Associazione a modello</span><span class="sxs-lookup"><span data-stu-id="87a03-177">Template binding</span></span>|
|<xref:System.Windows.Controls.Control.FontFamily%2A>|<span data-ttu-id="87a03-178">Ereditarietà della proprietà o associazione a modello</span><span class="sxs-lookup"><span data-stu-id="87a03-178">Property inheritance or template binding</span></span>|
|<xref:System.Windows.Controls.Control.FontSize%2A>|<span data-ttu-id="87a03-179">Ereditarietà della proprietà o associazione a modello</span><span class="sxs-lookup"><span data-stu-id="87a03-179">Property inheritance or template binding</span></span>|
|<xref:System.Windows.Controls.Control.FontStretch%2A>|<span data-ttu-id="87a03-180">Ereditarietà della proprietà o associazione a modello</span><span class="sxs-lookup"><span data-stu-id="87a03-180">Property inheritance or template binding</span></span>|
|<xref:System.Windows.Controls.Control.FontWeight%2A>|<span data-ttu-id="87a03-181">Ereditarietà della proprietà o associazione a modello</span><span class="sxs-lookup"><span data-stu-id="87a03-181">Property inheritance or template binding</span></span>|
|<xref:System.Windows.Controls.Control.Foreground%2A>|<span data-ttu-id="87a03-182">Ereditarietà della proprietà o associazione a modello</span><span class="sxs-lookup"><span data-stu-id="87a03-182">Property inheritance or template binding</span></span>|
|<xref:System.Windows.Controls.Control.HorizontalContentAlignment%2A>|<span data-ttu-id="87a03-183">Associazione a modello</span><span class="sxs-lookup"><span data-stu-id="87a03-183">Template binding</span></span>|
|<xref:System.Windows.Controls.Control.Padding%2A>|<span data-ttu-id="87a03-184">Associazione a modello</span><span class="sxs-lookup"><span data-stu-id="87a03-184">Template binding</span></span>|
|<xref:System.Windows.Controls.Control.VerticalContentAlignment%2A>|<span data-ttu-id="87a03-185">Associazione a modello</span><span class="sxs-lookup"><span data-stu-id="87a03-185">Template binding</span></span>|

 <span data-ttu-id="87a03-186">La tabella elenca solo le proprietà visive ereditate dalla classe <xref:System.Windows.Controls.Control>.</span><span class="sxs-lookup"><span data-stu-id="87a03-186">The table lists only the visual properties inherited from the <xref:System.Windows.Controls.Control> class.</span></span> <span data-ttu-id="87a03-187">Oltre alle proprietà elencate nella tabella, un controllo può ereditare anche le proprietà <xref:System.Windows.FrameworkElement.DataContext%2A>, <xref:System.Windows.FrameworkElement.Language%2A>e <xref:System.Windows.Controls.TextBlock.TextDecorations%2A> dall'elemento del framework padre.</span><span class="sxs-lookup"><span data-stu-id="87a03-187">Apart from the properties listed in the table, a control may also inherit the <xref:System.Windows.FrameworkElement.DataContext%2A>, <xref:System.Windows.FrameworkElement.Language%2A>, and <xref:System.Windows.Controls.TextBlock.TextDecorations%2A> properties from the parent framework element.</span></span>

 <span data-ttu-id="87a03-188">Inoltre, se il <xref:System.Windows.Controls.ContentPresenter> si trova nella <xref:System.Windows.Controls.ControlTemplate> di un <xref:System.Windows.Controls.ContentControl>, il <xref:System.Windows.Controls.ContentPresenter> verrà associato automaticamente alle proprietà <xref:System.Windows.Controls.ContentControl.ContentTemplate%2A> e <xref:System.Windows.Controls.ContentControl.Content%2A>.</span><span class="sxs-lookup"><span data-stu-id="87a03-188">Also, if the <xref:System.Windows.Controls.ContentPresenter> is in the <xref:System.Windows.Controls.ControlTemplate> of a <xref:System.Windows.Controls.ContentControl>, the <xref:System.Windows.Controls.ContentPresenter> will automatically bind to the <xref:System.Windows.Controls.ContentControl.ContentTemplate%2A> and <xref:System.Windows.Controls.ContentControl.Content%2A> properties.</span></span> <span data-ttu-id="87a03-189">Analogamente, un <xref:System.Windows.Controls.ItemsPresenter> che si trova nella <xref:System.Windows.Controls.ControlTemplate> di un <xref:System.Windows.Controls.ItemsControl> verrà automaticamente associato alle proprietà <xref:System.Windows.Controls.ItemsControl.Items%2A> e <xref:System.Windows.Controls.ItemsPresenter>.</span><span class="sxs-lookup"><span data-stu-id="87a03-189">Likewise, an <xref:System.Windows.Controls.ItemsPresenter> that is in the <xref:System.Windows.Controls.ControlTemplate> of an <xref:System.Windows.Controls.ItemsControl> will automatically bind to the <xref:System.Windows.Controls.ItemsControl.Items%2A> and <xref:System.Windows.Controls.ItemsPresenter> properties.</span></span>

 <span data-ttu-id="87a03-190">Nell'esempio seguente vengono creati due pulsanti che utilizzano il <xref:System.Windows.Controls.ControlTemplate> definito nell'esempio precedente.</span><span class="sxs-lookup"><span data-stu-id="87a03-190">The following example creates two buttons that use the <xref:System.Windows.Controls.ControlTemplate> defined in the preceding example.</span></span> <span data-ttu-id="87a03-191">Nell'esempio vengono impostate le proprietà <xref:System.Windows.Controls.Control.Background%2A>, <xref:System.Windows.Controls.Control.Foreground%2A>e <xref:System.Windows.Controls.Control.FontSize%2A> su ciascun pulsante.</span><span class="sxs-lookup"><span data-stu-id="87a03-191">The example sets the <xref:System.Windows.Controls.Control.Background%2A>, <xref:System.Windows.Controls.Control.Foreground%2A>, and <xref:System.Windows.Controls.Control.FontSize%2A> properties on each button.</span></span> <span data-ttu-id="87a03-192">L'impostazione della proprietà <xref:System.Windows.Controls.Control.Background%2A> ha effetto perché è associato a un modello nel <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="87a03-192">Setting the <xref:System.Windows.Controls.Control.Background%2A> property has an effect because it is template bound in the <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="87a03-193">Anche se le proprietà <xref:System.Windows.Controls.Control.Foreground%2A> e <xref:System.Windows.Controls.Control.FontSize%2A> non sono associate al modello, l'impostazione ha effetto perché i relativi valori vengono ereditati.</span><span class="sxs-lookup"><span data-stu-id="87a03-193">Even though the <xref:System.Windows.Controls.Control.Foreground%2A> and <xref:System.Windows.Controls.Control.FontSize%2A> properties are not template bound, setting them has an effect because their values are inherited.</span></span>

 [!code-xaml[VSMButtonTemplate#ButtonDeclaration](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#buttondeclaration)]

 <span data-ttu-id="87a03-194">Nell'esempio precedente viene generato un output simile alla figura seguente.</span><span class="sxs-lookup"><span data-stu-id="87a03-194">The preceding example produces output that is similar to the following illustration.</span></span>

 <span data-ttu-id="87a03-195">![Due pulsanti, uno blu e uno viola.](./media/ndp-buttontwo.png "NDP_ButtonTwo")</span><span class="sxs-lookup"><span data-stu-id="87a03-195">![Two buttons, one blue and one purple.](./media/ndp-buttontwo.png "NDP_ButtonTwo")</span></span>
<span data-ttu-id="87a03-196">Due pulsanti con diversi colori di sfondo</span><span class="sxs-lookup"><span data-stu-id="87a03-196">Two buttons with different background colors</span></span>

<a name="changing_the_appearance_of_a_control_depending_on_its_state"></a>
## <a name="changing-the-appearance-of-a-control-depending-on-its-state"></a><span data-ttu-id="87a03-197">Modifica dell'aspetto di un controllo in base allo stato</span><span class="sxs-lookup"><span data-stu-id="87a03-197">Changing the Appearance of a Control Depending on Its State</span></span>
 <span data-ttu-id="87a03-198">La differenza tra un pulsante con l'aspetto predefinito e il pulsante dell'esempio precedente è che il pulsante predefinito cambia leggermente in relazione allo stato.</span><span class="sxs-lookup"><span data-stu-id="87a03-198">The difference between a button with its default appearance and the button in the preceding example is that the default button subtly changes when it is in different states.</span></span> <span data-ttu-id="87a03-199">Ad esempio, l'aspetto del pulsante predefinito cambia quando viene premuto o quando il puntatore del mouse viene spostato sul pulsante.</span><span class="sxs-lookup"><span data-stu-id="87a03-199">For example, the default button's appearance changes when the button is pressed, or when the mouse pointer is over the button.</span></span> <span data-ttu-id="87a03-200">Sebbene il <xref:System.Windows.Controls.ControlTemplate> non modifichi la funzionalità di un controllo, modifica il comportamento visivo del controllo.</span><span class="sxs-lookup"><span data-stu-id="87a03-200">Although the <xref:System.Windows.Controls.ControlTemplate> does not change the functionality of a control, it does change the control's visual behavior.</span></span> <span data-ttu-id="87a03-201">Il comportamento visivo descrive l'aspetto del controllo quando è in un determinato stato.</span><span class="sxs-lookup"><span data-stu-id="87a03-201">A visual behavior describes the control appearance when it is in a certain state.</span></span> <span data-ttu-id="87a03-202">Per comprendere la differenza tra la funzionalità e il comportamento visivo di un controllo, si consideri l'esempio del pulsante.</span><span class="sxs-lookup"><span data-stu-id="87a03-202">To understand the difference between the functionality and visual behavior of a control, consider the button example.</span></span> <span data-ttu-id="87a03-203">La funzionalità del pulsante consiste nel generare l'evento <xref:System.Windows.Controls.Primitives.ButtonBase.Click> quando viene fatto clic, ma il comportamento visivo del pulsante è modificarne l'aspetto quando viene puntato o premuto.</span><span class="sxs-lookup"><span data-stu-id="87a03-203">The button's functionality is to raise the <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event when it is clicked, but the button's visual behavior is to change its appearance when it is pointed to or pressed.</span></span>

 <span data-ttu-id="87a03-204">Si utilizzano oggetti <xref:System.Windows.VisualState> per specificare l'aspetto di un controllo quando si trova in un determinato stato.</span><span class="sxs-lookup"><span data-stu-id="87a03-204">You use <xref:System.Windows.VisualState> objects to specify the appearance of a control when it is in a certain state.</span></span> <span data-ttu-id="87a03-205">Un <xref:System.Windows.VisualState> contiene un <xref:System.Windows.Media.Animation.Storyboard> che modifica l'aspetto degli elementi presenti nell'<xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="87a03-205">A <xref:System.Windows.VisualState> contains a <xref:System.Windows.Media.Animation.Storyboard> that changes the appearance of the elements that are in the <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="87a03-206">Non è necessario scrivere codice per eseguire questa operazione perché la logica del controllo cambia stato usando il <xref:System.Windows.VisualStateManager>.</span><span class="sxs-lookup"><span data-stu-id="87a03-206">You do not have to write any code to make this occur because the control's logic changes state by using the <xref:System.Windows.VisualStateManager>.</span></span> <span data-ttu-id="87a03-207">Quando il controllo entra nello stato specificato dalla proprietà <xref:System.Windows.VisualState.Name%2A?displayProperty=nameWithType>, inizia l'<xref:System.Windows.Media.Animation.Storyboard>.</span><span class="sxs-lookup"><span data-stu-id="87a03-207">When the control enters the state that is specified by the <xref:System.Windows.VisualState.Name%2A?displayProperty=nameWithType> property, the <xref:System.Windows.Media.Animation.Storyboard> begins.</span></span> <span data-ttu-id="87a03-208">Quando il controllo esce dallo stato, il <xref:System.Windows.Media.Animation.Storyboard> si arresta.</span><span class="sxs-lookup"><span data-stu-id="87a03-208">When the control exits the state, the <xref:System.Windows.Media.Animation.Storyboard> stops.</span></span>

 <span data-ttu-id="87a03-209">Nell'esempio seguente viene illustrata la <xref:System.Windows.VisualState> che modifica l'aspetto di un <xref:System.Windows.Controls.Button> quando il puntatore del mouse è posizionato su di esso.</span><span class="sxs-lookup"><span data-stu-id="87a03-209">The following example shows the <xref:System.Windows.VisualState> that changes the appearance of a <xref:System.Windows.Controls.Button> when the mouse pointer is over it.</span></span> <span data-ttu-id="87a03-210">Il <xref:System.Windows.Media.Animation.Storyboard> modifica il colore del bordo del pulsante modificando il colore del `BorderBrush`.</span><span class="sxs-lookup"><span data-stu-id="87a03-210">The <xref:System.Windows.Media.Animation.Storyboard> changes the button's border color by changing the color of the `BorderBrush`.</span></span> <span data-ttu-id="87a03-211">Se si fa riferimento all'esempio <xref:System.Windows.Controls.ControlTemplate> all'inizio di questo argomento, si ricorderà che `BorderBrush` è il nome del <xref:System.Windows.Media.SolidColorBrush> assegnato alla <xref:System.Windows.Controls.Border.Background%2A> del <xref:System.Windows.Controls.Border>.</span><span class="sxs-lookup"><span data-stu-id="87a03-211">If you refer to the <xref:System.Windows.Controls.ControlTemplate> example at the beginning of this topic, you will recall that `BorderBrush` is the name of the <xref:System.Windows.Media.SolidColorBrush> that is assigned to the <xref:System.Windows.Controls.Border.Background%2A> of the <xref:System.Windows.Controls.Border>.</span></span>

 [!code-xaml[VSMButtonTemplate#4](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#4)]

 <span data-ttu-id="87a03-212">Il controllo è responsabile della definizione degli stati come parte del relativo contratto e questo aspetto verrà, esaminato in dettaglio nella sezione [Personalizzazione di altri controlli sulla base del contratto di controllo](#customizing_other_controls_by_understanding_the_control_contract) più avanti in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="87a03-212">The control is responsible for defining the states as part of its control contract, which is discussed in detail in [Customizing Other Controls by Understanding the Control Contract](#customizing_other_controls_by_understanding_the_control_contract) later in this topic.</span></span> <span data-ttu-id="87a03-213">Nella tabella seguente sono elencati gli stati specificati per il <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="87a03-213">The following table lists the states that are specified for the <xref:System.Windows.Controls.Button>.</span></span>

|<span data-ttu-id="87a03-214">Nome VisualState</span><span class="sxs-lookup"><span data-stu-id="87a03-214">VisualState Name</span></span>|<span data-ttu-id="87a03-215">Nome VisualStateGroup</span><span class="sxs-lookup"><span data-stu-id="87a03-215">VisualStateGroup Name</span></span>|<span data-ttu-id="87a03-216">Descrizione</span><span class="sxs-lookup"><span data-stu-id="87a03-216">Description</span></span>|
|----------------------|---------------------------|-----------------|
|<span data-ttu-id="87a03-217">Normale</span><span class="sxs-lookup"><span data-stu-id="87a03-217">Normal</span></span>|<span data-ttu-id="87a03-218">CommonStates</span><span class="sxs-lookup"><span data-stu-id="87a03-218">CommonStates</span></span>|<span data-ttu-id="87a03-219">Lo stato predefinito.</span><span class="sxs-lookup"><span data-stu-id="87a03-219">The default state.</span></span>|
|<span data-ttu-id="87a03-220">MouseOver</span><span class="sxs-lookup"><span data-stu-id="87a03-220">MouseOver</span></span>|<span data-ttu-id="87a03-221">CommonStates</span><span class="sxs-lookup"><span data-stu-id="87a03-221">CommonStates</span></span>|<span data-ttu-id="87a03-222">Il puntatore del mouse è posizionato sul controllo.</span><span class="sxs-lookup"><span data-stu-id="87a03-222">The mouse pointer is positioned over the control.</span></span>|
|<span data-ttu-id="87a03-223">Premuto</span><span class="sxs-lookup"><span data-stu-id="87a03-223">Pressed</span></span>|<span data-ttu-id="87a03-224">CommonStates</span><span class="sxs-lookup"><span data-stu-id="87a03-224">CommonStates</span></span>|<span data-ttu-id="87a03-225">Il controllo è premuto.</span><span class="sxs-lookup"><span data-stu-id="87a03-225">The control is pressed.</span></span>|
|<span data-ttu-id="87a03-226">Disabilitato</span><span class="sxs-lookup"><span data-stu-id="87a03-226">Disabled</span></span>|<span data-ttu-id="87a03-227">CommonStates</span><span class="sxs-lookup"><span data-stu-id="87a03-227">CommonStates</span></span>|<span data-ttu-id="87a03-228">Il controllo è disabilitato.</span><span class="sxs-lookup"><span data-stu-id="87a03-228">The control is disabled.</span></span>|
|<span data-ttu-id="87a03-229">Con stato attivo</span><span class="sxs-lookup"><span data-stu-id="87a03-229">Focused</span></span>|<span data-ttu-id="87a03-230">FocusStates</span><span class="sxs-lookup"><span data-stu-id="87a03-230">FocusStates</span></span>|<span data-ttu-id="87a03-231">Il controllo ha lo stato attivo.</span><span class="sxs-lookup"><span data-stu-id="87a03-231">The control has focus.</span></span>|
|<span data-ttu-id="87a03-232">Con stato non attivo</span><span class="sxs-lookup"><span data-stu-id="87a03-232">Unfocused</span></span>|<span data-ttu-id="87a03-233">FocusStates</span><span class="sxs-lookup"><span data-stu-id="87a03-233">FocusStates</span></span>|<span data-ttu-id="87a03-234">Il controllo non ha lo stato attivo.</span><span class="sxs-lookup"><span data-stu-id="87a03-234">The control does not have focus.</span></span>|

 <span data-ttu-id="87a03-235">Il <xref:System.Windows.Controls.Button> definisce due gruppi di stati: il gruppo di `CommonStates` contiene gli Stati `Normal`, `MouseOver`, `Pressed`e `Disabled`.</span><span class="sxs-lookup"><span data-stu-id="87a03-235">The <xref:System.Windows.Controls.Button> defines two state groups: the `CommonStates` group contains the `Normal`, `MouseOver`, `Pressed`, and `Disabled` states.</span></span> <span data-ttu-id="87a03-236">Mentre il gruppo `FocusStates` contiene gli stati `Focused` e `Unfocused`.</span><span class="sxs-lookup"><span data-stu-id="87a03-236">The `FocusStates` group contains the `Focused` and `Unfocused` states.</span></span> <span data-ttu-id="87a03-237">Gli stati nello stesso gruppo si escludono a vicenda.</span><span class="sxs-lookup"><span data-stu-id="87a03-237">States in the same state group are mutually exclusive.</span></span> <span data-ttu-id="87a03-238">Il controllo è sempre in uno stato specifico per ogni gruppo.</span><span class="sxs-lookup"><span data-stu-id="87a03-238">The control is always in exactly one state per group.</span></span> <span data-ttu-id="87a03-239">Ad esempio, un <xref:System.Windows.Controls.Button> può avere lo stato attivo anche quando il puntatore del mouse non è posizionato su di esso, quindi una <xref:System.Windows.Controls.Button> nello stato `Focused` può essere nello stato `MouseOver`, `Pressed`o `Normal`.</span><span class="sxs-lookup"><span data-stu-id="87a03-239">For example, a <xref:System.Windows.Controls.Button> can have focus even when the mouse pointer is not over it, so a <xref:System.Windows.Controls.Button> in the `Focused` state can be in the `MouseOver`, `Pressed`, or `Normal` state.</span></span>

 <span data-ttu-id="87a03-240">Si aggiungono oggetti <xref:System.Windows.VisualState> agli oggetti <xref:System.Windows.VisualStateGroup>.</span><span class="sxs-lookup"><span data-stu-id="87a03-240">You add <xref:System.Windows.VisualState> objects to <xref:System.Windows.VisualStateGroup> objects.</span></span> <span data-ttu-id="87a03-241">Si aggiungono oggetti <xref:System.Windows.VisualStateGroup> alla proprietà <xref:System.Windows.VisualStateManager.VisualStateGroups%2A?displayProperty=nameWithType> associata.</span><span class="sxs-lookup"><span data-stu-id="87a03-241">You add <xref:System.Windows.VisualStateGroup> objects to the <xref:System.Windows.VisualStateManager.VisualStateGroups%2A?displayProperty=nameWithType> attached property.</span></span> <span data-ttu-id="87a03-242">Nell'esempio seguente vengono definiti gli oggetti <xref:System.Windows.VisualState> per gli Stati `Normal`, `MouseOver`e `Pressed`, che sono tutti inclusi nel gruppo di `CommonStates`.</span><span class="sxs-lookup"><span data-stu-id="87a03-242">The following example defines the <xref:System.Windows.VisualState> objects for the `Normal`, `MouseOver`, and `Pressed` states, which are all in the `CommonStates` group.</span></span> <span data-ttu-id="87a03-243">Il <xref:System.Windows.VisualState.Name%2A> di ogni <xref:System.Windows.VisualState> corrisponde al nome nella tabella precedente.</span><span class="sxs-lookup"><span data-stu-id="87a03-243">The <xref:System.Windows.VisualState.Name%2A> of each <xref:System.Windows.VisualState> matches the name in the preceding table.</span></span> <span data-ttu-id="87a03-244">Lo stato `Disabled` e gli stati del gruppo `FocusStates` sono stati omessi per brevità, ma sono inclusi nell'esempio completo alla fine di questo argomento.</span><span class="sxs-lookup"><span data-stu-id="87a03-244">The `Disabled` state and the states in the `FocusStates` group are omitted to keep the example short, but they are included in the entire example at the end of this topic.</span></span>

> [!NOTE]
> <span data-ttu-id="87a03-245">Assicurarsi di impostare la proprietà <xref:System.Windows.VisualStateManager.VisualStateGroups%2A?displayProperty=nameWithType> associata nella <xref:System.Windows.FrameworkElement> radice della <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="87a03-245">Be sure to set the <xref:System.Windows.VisualStateManager.VisualStateGroups%2A?displayProperty=nameWithType> attached property on the root <xref:System.Windows.FrameworkElement> of the <xref:System.Windows.Controls.ControlTemplate>.</span></span>

 [!code-xaml[VSMButtonTemplate#VisualStates](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#visualstates)]

 <span data-ttu-id="87a03-246">Nell'esempio precedente viene generato un output simile alle figure seguenti.</span><span class="sxs-lookup"><span data-stu-id="87a03-246">The preceding example produces output that is similar to the following illustrations.</span></span>

 <span data-ttu-id="87a03-247">![Pulsante con un modello del controllo personalizzato.](./media/ndp-buttonnormal.png "NDP_ButtonNormal")</span><span class="sxs-lookup"><span data-stu-id="87a03-247">![A button with a custom control template.](./media/ndp-buttonnormal.png "NDP_ButtonNormal")</span></span>
<span data-ttu-id="87a03-248">Pulsante che usa un modello del controllo personalizzato nello stato normale</span><span class="sxs-lookup"><span data-stu-id="87a03-248">A button that uses a custom control template in the normal state</span></span>

 <span data-ttu-id="87a03-249">![Pulsante con un bordo rosso.](./media/ndp-buttonmouseover.png "NDP_ButtonMouseOver")</span><span class="sxs-lookup"><span data-stu-id="87a03-249">![A button with a red border.](./media/ndp-buttonmouseover.png "NDP_ButtonMouseOver")</span></span>
<span data-ttu-id="87a03-250">Pulsante che usa un modello del controllo personalizzato nello stato di passaggio del mouse</span><span class="sxs-lookup"><span data-stu-id="87a03-250">A button that uses a custom control template in the mouse over state</span></span>

 <span data-ttu-id="87a03-251">![Il bordo è trasparente in un pulsante premuto.](./media/ndp-buttonpressed.png "NDP_ButtonPressed")</span><span class="sxs-lookup"><span data-stu-id="87a03-251">![The border is transparent on a pressed button.](./media/ndp-buttonpressed.png "NDP_ButtonPressed")</span></span>
<span data-ttu-id="87a03-252">Pulsante che usa un modello del controllo personalizzato nello stato premuto</span><span class="sxs-lookup"><span data-stu-id="87a03-252">A button that uses a custom control template in the pressed state</span></span>

 <span data-ttu-id="87a03-253">Per trovare gli stati visivi dei controlli inclusi in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], vedere [Stili e modelli di Control](control-styles-and-templates.md).</span><span class="sxs-lookup"><span data-stu-id="87a03-253">To find the visual states for controls that are included with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [Control Styles and Templates](control-styles-and-templates.md).</span></span>

<a name="specifying_the_behavior_of_a_control_when_it_transitions_between_states"></a>
## <a name="specifying-the-behavior-of-a-control-when-it-transitions-between-states"></a><span data-ttu-id="87a03-254">Impostazione del comportamento di un controllo nella transizione tra stati</span><span class="sxs-lookup"><span data-stu-id="87a03-254">Specifying the Behavior of a Control When It Transitions Between States</span></span>
 <span data-ttu-id="87a03-255">Nell'esempio precedente, l'aspetto del pulsante cambia anche quando viene selezionato dall'utente, ma se non viene premuto per almeno un secondo, l'utente non vede l'effetto.</span><span class="sxs-lookup"><span data-stu-id="87a03-255">In the preceding example, the appearance of the button also changes when the user clicks it, but unless the button is pressed for a full second, the user does not see the effect.</span></span> <span data-ttu-id="87a03-256">Per impostazione predefinita, l'animazione impiega un secondo per attivarsi.</span><span class="sxs-lookup"><span data-stu-id="87a03-256">By default, the animation takes one second to occur.</span></span> <span data-ttu-id="87a03-257">Poiché gli utenti possono fare clic e rilasciare un pulsante in tempi molto inferiori, il feedback visivo non sarà efficace se si lascia il <xref:System.Windows.Controls.ControlTemplate> nello stato predefinito.</span><span class="sxs-lookup"><span data-stu-id="87a03-257">Because users are likely to click and release a button in much less time, the visual feedback will not be effective if you leave the <xref:System.Windows.Controls.ControlTemplate> in its default state.</span></span>

 <span data-ttu-id="87a03-258">È possibile specificare la quantità di tempo necessaria per eseguire un'animazione per la transizione graduale di un controllo da uno stato a un altro mediante l'aggiunta di oggetti <xref:System.Windows.VisualTransition> al <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="87a03-258">You can specify the amount of time that it takes an animation to occur to smoothly transition a control from one state to another by adding <xref:System.Windows.VisualTransition> objects to the <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="87a03-259">Quando si crea una <xref:System.Windows.VisualTransition>, è necessario specificare uno o più degli elementi seguenti:</span><span class="sxs-lookup"><span data-stu-id="87a03-259">When you create a <xref:System.Windows.VisualTransition>, you specify one or more of the following:</span></span>

- <span data-ttu-id="87a03-260">Il tempo necessario affinché si verifichi una transizione tra stati.</span><span class="sxs-lookup"><span data-stu-id="87a03-260">The time it takes for a transition between states to occur.</span></span>

- <span data-ttu-id="87a03-261">Le modifiche aggiuntive nell'aspetto del controllo che si verificano al momento della transizione.</span><span class="sxs-lookup"><span data-stu-id="87a03-261">Additional changes in the control's appearance that occur at the time of the transition.</span></span>

- <span data-ttu-id="87a03-262">A quali stati viene applicata la <xref:System.Windows.VisualTransition>.</span><span class="sxs-lookup"><span data-stu-id="87a03-262">Which states the <xref:System.Windows.VisualTransition> is applied to.</span></span>

### <a name="specifying-the-duration-of-a-transition"></a><span data-ttu-id="87a03-263">Impostazione della durata di una transizione</span><span class="sxs-lookup"><span data-stu-id="87a03-263">Specifying the Duration of a Transition</span></span>
 <span data-ttu-id="87a03-264">È possibile specificare il tempo necessario per una transizione impostando la proprietà <xref:System.Windows.VisualTransition.GeneratedDuration%2A>.</span><span class="sxs-lookup"><span data-stu-id="87a03-264">You can specify how long a transition takes by setting the <xref:System.Windows.VisualTransition.GeneratedDuration%2A> property.</span></span> <span data-ttu-id="87a03-265">Nell'esempio precedente è presente un <xref:System.Windows.VisualState> che specifica che il bordo del pulsante diventa trasparente quando si preme il pulsante, ma l'animazione impiega troppo tempo per essere percettibile se il pulsante viene rapidamente premuto e rilasciato.</span><span class="sxs-lookup"><span data-stu-id="87a03-265">The preceding example has a <xref:System.Windows.VisualState> that specifies that the button's border becomes transparent when the button is pressed, but the animation takes too long to be noticeable if the button is quickly pressed and released.</span></span> <span data-ttu-id="87a03-266">È possibile usare un <xref:System.Windows.VisualTransition> per specificare la quantità di tempo impiegato dal controllo per passare allo stato premuto.</span><span class="sxs-lookup"><span data-stu-id="87a03-266">You can use a <xref:System.Windows.VisualTransition> to specify the amount of time it takes the control to transition into the pressed state.</span></span> <span data-ttu-id="87a03-267">Nell'esempio seguente viene specificato che il controllo impiega un centesimo di secondo per passare allo stato di pressione.</span><span class="sxs-lookup"><span data-stu-id="87a03-267">The following example specifies that the control takes one hundredth of a second to go into the pressed state.</span></span>

 [!code-xaml[VSMButtonTemplate#PressedTransition](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#pressedtransition)]

### <a name="specifying-changes-to-the-controls-appearance-during-a-transition"></a><span data-ttu-id="87a03-268">Impostazione delle modifiche all'aspetto del controllo durante una transizione</span><span class="sxs-lookup"><span data-stu-id="87a03-268">Specifying Changes to the Control's Appearance During a Transition</span></span>
 <span data-ttu-id="87a03-269">Il <xref:System.Windows.VisualTransition> contiene una <xref:System.Windows.Media.Animation.Storyboard> che inizia quando il controllo esegue la transizione tra gli Stati.</span><span class="sxs-lookup"><span data-stu-id="87a03-269">The <xref:System.Windows.VisualTransition> contains a <xref:System.Windows.Media.Animation.Storyboard> that begins when the control transitions between states.</span></span> <span data-ttu-id="87a03-270">Ad esempio, è possibile specificare che una determinata animazione si verifica quando il controllo passa dallo stato `MouseOver` allo stato `Normal`.</span><span class="sxs-lookup"><span data-stu-id="87a03-270">For example, you can specify that a certain animation occurs when the control transitions from the `MouseOver` state to the `Normal` State.</span></span> <span data-ttu-id="87a03-271">Nell'esempio seguente viene creato un <xref:System.Windows.VisualTransition> che specifica che quando l'utente sposta il puntatore del mouse dal pulsante, il bordo del pulsante passa a blu, quindi a giallo, quindi al nero in 1,5 secondi.</span><span class="sxs-lookup"><span data-stu-id="87a03-271">The following example creates a <xref:System.Windows.VisualTransition> that specifies that when the user moves the mouse pointer away from the button, the button's border changes to blue, then to yellow, then to black in 1.5 seconds.</span></span>

 [!code-xaml[VSMButtonTemplate#8](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#8)]

### <a name="specifying-when-a-visualtransition-is-applied"></a><span data-ttu-id="87a03-272">Impostazione dei casi in cui applicare un oggetto VisualTransition</span><span class="sxs-lookup"><span data-stu-id="87a03-272">Specifying When a VisualTransition Is Applied</span></span>
 <span data-ttu-id="87a03-273">È possibile limitare l'applicazione di una <xref:System.Windows.VisualTransition> solo a determinati Stati oppure applicarla ogni volta che il controllo passa da uno stato all'altro.</span><span class="sxs-lookup"><span data-stu-id="87a03-273">A <xref:System.Windows.VisualTransition> can be restricted to apply to only certain states, or it can be applied any time the control transitions between states.</span></span> <span data-ttu-id="87a03-274">Nell'esempio precedente, il <xref:System.Windows.VisualTransition> viene applicato quando il controllo passa dallo stato di `MouseOver` allo stato `Normal`; Nell'esempio precedente, il <xref:System.Windows.VisualTransition> viene applicato quando il controllo entra nello stato di `Pressed`.</span><span class="sxs-lookup"><span data-stu-id="87a03-274">In the preceding example, the <xref:System.Windows.VisualTransition> is applied when the control goes from the `MouseOver` state to the `Normal` state; in the example before that, the <xref:System.Windows.VisualTransition> is applied when the control goes into the `Pressed` state.</span></span> <span data-ttu-id="87a03-275">Si limita quando viene applicata una <xref:System.Windows.VisualTransition> impostando le proprietà <xref:System.Windows.VisualTransition.To%2A> e <xref:System.Windows.VisualTransition.From%2A>.</span><span class="sxs-lookup"><span data-stu-id="87a03-275">You restrict when a <xref:System.Windows.VisualTransition> is applied by setting the <xref:System.Windows.VisualTransition.To%2A> and <xref:System.Windows.VisualTransition.From%2A> properties.</span></span> <span data-ttu-id="87a03-276">Nella tabella seguente vengono descritti i livelli di restrizione, in modo decrescente dal più restrittivo.</span><span class="sxs-lookup"><span data-stu-id="87a03-276">The following table describes the levels of restriction from most restrictive to least restrictive.</span></span>

|<span data-ttu-id="87a03-277">Tipo di restrizione</span><span class="sxs-lookup"><span data-stu-id="87a03-277">Type of restriction</span></span>|<span data-ttu-id="87a03-278">Valore di From</span><span class="sxs-lookup"><span data-stu-id="87a03-278">Value of From</span></span>|<span data-ttu-id="87a03-279">Valore di To</span><span class="sxs-lookup"><span data-stu-id="87a03-279">Value of To</span></span>|
|-------------------------|-------------------|-----------------|
|<span data-ttu-id="87a03-280">Da uno stato specifico un altro stato specifico</span><span class="sxs-lookup"><span data-stu-id="87a03-280">From a specified state to another specified state</span></span>|<span data-ttu-id="87a03-281">Nome di un <xref:System.Windows.VisualState></span><span class="sxs-lookup"><span data-stu-id="87a03-281">The name of a <xref:System.Windows.VisualState></span></span>|<span data-ttu-id="87a03-282">Nome di un <xref:System.Windows.VisualState></span><span class="sxs-lookup"><span data-stu-id="87a03-282">The name of a <xref:System.Windows.VisualState></span></span>|
|<span data-ttu-id="87a03-283">Da qualsiasi stato a uno stato specifico</span><span class="sxs-lookup"><span data-stu-id="87a03-283">From any state to a specified state</span></span>|<span data-ttu-id="87a03-284">Non impostato</span><span class="sxs-lookup"><span data-stu-id="87a03-284">Not set</span></span>|<span data-ttu-id="87a03-285">Nome di un <xref:System.Windows.VisualState></span><span class="sxs-lookup"><span data-stu-id="87a03-285">The name of a <xref:System.Windows.VisualState></span></span>|
|<span data-ttu-id="87a03-286">Da uno stato specifico a qualsiasi stato</span><span class="sxs-lookup"><span data-stu-id="87a03-286">From a specified state to any state</span></span>|<span data-ttu-id="87a03-287">Nome di un <xref:System.Windows.VisualState></span><span class="sxs-lookup"><span data-stu-id="87a03-287">The name of a <xref:System.Windows.VisualState></span></span>|<span data-ttu-id="87a03-288">Non impostato</span><span class="sxs-lookup"><span data-stu-id="87a03-288">Not set</span></span>|
|<span data-ttu-id="87a03-289">Da qualsiasi stato a qualsiasi altro stato</span><span class="sxs-lookup"><span data-stu-id="87a03-289">From any state to any other state</span></span>|<span data-ttu-id="87a03-290">Non impostato</span><span class="sxs-lookup"><span data-stu-id="87a03-290">Not set</span></span>|<span data-ttu-id="87a03-291">Non impostato</span><span class="sxs-lookup"><span data-stu-id="87a03-291">Not set</span></span>|

 <span data-ttu-id="87a03-292">È possibile disporre di più oggetti <xref:System.Windows.VisualTransition> in un <xref:System.Windows.VisualStateGroup> che fanno riferimento allo stesso stato, ma verranno utilizzati nell'ordine specificato dalla tabella precedente.</span><span class="sxs-lookup"><span data-stu-id="87a03-292">You can have multiple <xref:System.Windows.VisualTransition> objects in a <xref:System.Windows.VisualStateGroup> that refer to the same state, but they will be used in the order that the previous table specifies.</span></span> <span data-ttu-id="87a03-293">Nell'esempio seguente sono presenti due oggetti <xref:System.Windows.VisualTransition>.</span><span class="sxs-lookup"><span data-stu-id="87a03-293">In the following example, there are two <xref:System.Windows.VisualTransition> objects.</span></span> <span data-ttu-id="87a03-294">Quando il controllo passa dallo stato `Pressed` allo stato di `MouseOver`, viene utilizzato il <xref:System.Windows.VisualTransition> con <xref:System.Windows.VisualTransition.From%2A> e set di <xref:System.Windows.VisualTransition.To%2A>.</span><span class="sxs-lookup"><span data-stu-id="87a03-294">When the control transitions from the `Pressed` state to the `MouseOver` state, the <xref:System.Windows.VisualTransition> that has both <xref:System.Windows.VisualTransition.From%2A> and <xref:System.Windows.VisualTransition.To%2A> set is used.</span></span> <span data-ttu-id="87a03-295">Quando il controllo passa da uno stato diverso da `Pressed` allo stato `MouseOver`, viene usato l'altro stato.</span><span class="sxs-lookup"><span data-stu-id="87a03-295">When the control transitions from a state that is not `Pressed` to the `MouseOver` state, the other state is used.</span></span>

 [!code-xaml[VSMButtonTemplate#7](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#7)]

 <span data-ttu-id="87a03-296">Il <xref:System.Windows.VisualStateGroup> dispone di una proprietà <xref:System.Windows.VisualStateGroup.Transitions%2A> che contiene gli oggetti <xref:System.Windows.VisualTransition> che si applicano agli oggetti <xref:System.Windows.VisualState> nel <xref:System.Windows.VisualStateGroup>.</span><span class="sxs-lookup"><span data-stu-id="87a03-296">The <xref:System.Windows.VisualStateGroup> has a <xref:System.Windows.VisualStateGroup.Transitions%2A> property that contains the <xref:System.Windows.VisualTransition> objects that apply to the <xref:System.Windows.VisualState> objects in the <xref:System.Windows.VisualStateGroup>.</span></span> <span data-ttu-id="87a03-297">In qualità di autore del <xref:System.Windows.Controls.ControlTemplate>, è possibile includere tutti i <xref:System.Windows.VisualTransition> desiderati.</span><span class="sxs-lookup"><span data-stu-id="87a03-297">As the <xref:System.Windows.Controls.ControlTemplate> author, you are free to include any <xref:System.Windows.VisualTransition> you want.</span></span> <span data-ttu-id="87a03-298">Tuttavia, se le proprietà <xref:System.Windows.VisualTransition.To%2A> e <xref:System.Windows.VisualTransition.From%2A> sono impostate su nomi di stato che non sono presenti nel <xref:System.Windows.VisualStateGroup>, il <xref:System.Windows.VisualTransition> viene ignorato.</span><span class="sxs-lookup"><span data-stu-id="87a03-298">However, if the <xref:System.Windows.VisualTransition.To%2A> and <xref:System.Windows.VisualTransition.From%2A> properties are set to state names that are not in the <xref:System.Windows.VisualStateGroup>, the <xref:System.Windows.VisualTransition> is ignored.</span></span>

 <span data-ttu-id="87a03-299">Nell'esempio seguente viene illustrata la <xref:System.Windows.VisualStateGroup> per l'`CommonStates`.</span><span class="sxs-lookup"><span data-stu-id="87a03-299">The following example shows the <xref:System.Windows.VisualStateGroup> for the `CommonStates`.</span></span> <span data-ttu-id="87a03-300">Nell'esempio viene definito un <xref:System.Windows.VisualTransition> per ognuna delle transizioni seguenti del pulsante.</span><span class="sxs-lookup"><span data-stu-id="87a03-300">The example defines a <xref:System.Windows.VisualTransition> for each of the button's following transitions.</span></span>

- <span data-ttu-id="87a03-301">Allo stato `Pressed`.</span><span class="sxs-lookup"><span data-stu-id="87a03-301">To the `Pressed` state.</span></span>

- <span data-ttu-id="87a03-302">Allo stato `MouseOver`.</span><span class="sxs-lookup"><span data-stu-id="87a03-302">To the `MouseOver` state.</span></span>

- <span data-ttu-id="87a03-303">Dallo stato `Pressed` allo stato `MouseOver`.</span><span class="sxs-lookup"><span data-stu-id="87a03-303">From the `Pressed` state to the `MouseOver` state.</span></span>

- <span data-ttu-id="87a03-304">Dallo stato `MouseOver` allo stato `Normal`.</span><span class="sxs-lookup"><span data-stu-id="87a03-304">From the `MouseOver` state to the `Normal` state.</span></span>

 [!code-xaml[VSMButtonTemplate#VisualTransitions](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#visualtransitions)]

<a name="customizing_other_controls_by_understanding_the_control_contract"></a>
## <a name="customizing-other-controls-by-understanding-the-control-contract"></a><span data-ttu-id="87a03-305">Personalizzazione di altri controlli sulla base del contratto di controllo</span><span class="sxs-lookup"><span data-stu-id="87a03-305">Customizing Other Controls by Understanding the Control Contract</span></span>
 <span data-ttu-id="87a03-306">Un controllo che usa un <xref:System.Windows.Controls.ControlTemplate> per specificare la struttura visiva (usando oggetti <xref:System.Windows.FrameworkElement>) e il comportamento visivo (usando oggetti <xref:System.Windows.VisualState>) usa il modello di controllo Parts.</span><span class="sxs-lookup"><span data-stu-id="87a03-306">A control that uses a <xref:System.Windows.Controls.ControlTemplate> to specify its visual structure (by using <xref:System.Windows.FrameworkElement> objects) and visual behavior (by using <xref:System.Windows.VisualState> objects) uses the parts control model.</span></span> <span data-ttu-id="87a03-307">Molti dei controlli inclusi in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 4 usano questo modello.</span><span class="sxs-lookup"><span data-stu-id="87a03-307">Many of the controls that are included with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 4 use this model.</span></span> <span data-ttu-id="87a03-308">Le parti di cui un autore <xref:System.Windows.Controls.ControlTemplate> deve essere a conoscenza vengono comunicate tramite il contratto di controllo.</span><span class="sxs-lookup"><span data-stu-id="87a03-308">The parts that a <xref:System.Windows.Controls.ControlTemplate> author needs to be aware of are communicated through the control contract.</span></span> <span data-ttu-id="87a03-309">Quando si conoscono le parti di un contratto di controllo, è possibile personalizzare l'aspetto di qualsiasi controllo che utilizza il modello di controllo part.</span><span class="sxs-lookup"><span data-stu-id="87a03-309">When you understand the parts of a control contract, you can customize the appearance of any control that uses the parts control model.</span></span>

 <span data-ttu-id="87a03-310">Un contratto di controllo include tre elementi:</span><span class="sxs-lookup"><span data-stu-id="87a03-310">A control contract has three elements:</span></span>

- <span data-ttu-id="87a03-311">Gli elementi visivi usati dalla logica del controllo.</span><span class="sxs-lookup"><span data-stu-id="87a03-311">The visual elements that the control's logic uses.</span></span>

- <span data-ttu-id="87a03-312">Gli stati del controllo e il gruppo a cui appartiene ogni stato.</span><span class="sxs-lookup"><span data-stu-id="87a03-312">The states of the control and the group each state belongs to.</span></span>

- <span data-ttu-id="87a03-313">Le proprietà pubbliche che influiscono visivamente sul controllo.</span><span class="sxs-lookup"><span data-stu-id="87a03-313">The public properties that visually affect the control.</span></span>

### <a name="visual-elements-in-the-control-contract"></a><span data-ttu-id="87a03-314">Elementi visivi nel contratto di controllo</span><span class="sxs-lookup"><span data-stu-id="87a03-314">Visual Elements in the Control Contract</span></span>
 <span data-ttu-id="87a03-315">A volte la logica di un controllo interagisce con un <xref:System.Windows.FrameworkElement> che si trova nel <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="87a03-315">Sometimes a control's logic interacts with a <xref:System.Windows.FrameworkElement> that is in the <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="87a03-316">Ad esempio, il controllo può gestire un evento di uno dei relativi elementi.</span><span class="sxs-lookup"><span data-stu-id="87a03-316">For example, the control might handle an event of one of its elements.</span></span> <span data-ttu-id="87a03-317">Quando un controllo prevede di trovare un particolare <xref:System.Windows.FrameworkElement> nel <xref:System.Windows.Controls.ControlTemplate>, deve inviare tali informazioni all'autore <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="87a03-317">When a control expects to find a particular <xref:System.Windows.FrameworkElement> in the <xref:System.Windows.Controls.ControlTemplate>, it must convey that information to the <xref:System.Windows.Controls.ControlTemplate> author.</span></span> <span data-ttu-id="87a03-318">Il controllo Usa il <xref:System.Windows.TemplatePartAttribute> per indicare il tipo di elemento previsto e il nome dell'elemento.</span><span class="sxs-lookup"><span data-stu-id="87a03-318">The control uses the <xref:System.Windows.TemplatePartAttribute> to convey the type of element that is expected, and what the name of the element should be.</span></span> <span data-ttu-id="87a03-319">Il <xref:System.Windows.Controls.Button> non dispone di <xref:System.Windows.FrameworkElement> parti nel relativo contratto di controllo, ma anche di altri controlli, ad esempio <xref:System.Windows.Controls.ComboBox>.</span><span class="sxs-lookup"><span data-stu-id="87a03-319">The <xref:System.Windows.Controls.Button> does not have <xref:System.Windows.FrameworkElement> parts in its control contract, but other controls, such as the <xref:System.Windows.Controls.ComboBox>, do.</span></span>

 <span data-ttu-id="87a03-320">Nell'esempio seguente vengono illustrati gli oggetti <xref:System.Windows.TemplatePartAttribute> specificati nella classe <xref:System.Windows.Controls.ComboBox>.</span><span class="sxs-lookup"><span data-stu-id="87a03-320">The following example shows the <xref:System.Windows.TemplatePartAttribute> objects that are specified on the <xref:System.Windows.Controls.ComboBox> class.</span></span> <span data-ttu-id="87a03-321">La logica di <xref:System.Windows.Controls.ComboBox> prevede di trovare una <xref:System.Windows.Controls.TextBox> denominata `PART_EditableTextBox` e una <xref:System.Windows.Controls.Primitives.Popup> denominata `PART_Popup` nell'<xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="87a03-321">The logic of <xref:System.Windows.Controls.ComboBox> expects to find a <xref:System.Windows.Controls.TextBox> named `PART_EditableTextBox` and a <xref:System.Windows.Controls.Primitives.Popup> named `PART_Popup` in its <xref:System.Windows.Controls.ControlTemplate>.</span></span>

 [!code-csharp[VSMButtonTemplate#ComboBoxContract](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/controlcontracts.cs#comboboxcontract)]
 [!code-vb[VSMButtonTemplate#ComboBoxContract](~/samples/snippets/visualbasic/VS_Snippets_Wpf/vsmbuttontemplate/visualbasic/window1.xaml.vb#comboboxcontract)]

 <span data-ttu-id="87a03-322">Nell'esempio seguente viene illustrato un <xref:System.Windows.Controls.ControlTemplate> semplificato per la <xref:System.Windows.Controls.ComboBox> che include gli elementi specificati dagli oggetti <xref:System.Windows.TemplatePartAttribute> della classe <xref:System.Windows.Controls.ComboBox>.</span><span class="sxs-lookup"><span data-stu-id="87a03-322">The following example shows a simplified <xref:System.Windows.Controls.ControlTemplate> for the <xref:System.Windows.Controls.ComboBox> that includes the elements that are specified by the <xref:System.Windows.TemplatePartAttribute> objects on the <xref:System.Windows.Controls.ComboBox> class.</span></span>

 [!code-xaml[VSMButtonTemplate#ComboBoxTemplate](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/window1.xaml#comboboxtemplate)]

### <a name="states-in-the-control-contract"></a><span data-ttu-id="87a03-323">Stati nel contratto di controllo</span><span class="sxs-lookup"><span data-stu-id="87a03-323">States in the Control Contract</span></span>
 <span data-ttu-id="87a03-324">Anche gli stati di un controllo fanno parte del contratto di controllo.</span><span class="sxs-lookup"><span data-stu-id="87a03-324">The states of a control are also a part of the control contract.</span></span> <span data-ttu-id="87a03-325">Nell'esempio di creazione di un <xref:System.Windows.Controls.ControlTemplate> per un <xref:System.Windows.Controls.Button> viene illustrato come specificare l'aspetto di un <xref:System.Windows.Controls.Button> a seconda degli Stati.</span><span class="sxs-lookup"><span data-stu-id="87a03-325">The example of creating a <xref:System.Windows.Controls.ControlTemplate> for a <xref:System.Windows.Controls.Button> shows how to specify the appearance of a <xref:System.Windows.Controls.Button> depending on its states.</span></span> <span data-ttu-id="87a03-326">Si crea un <xref:System.Windows.VisualState> per ogni stato specificato e si inseriscono tutti gli oggetti <xref:System.Windows.VisualState> che condividono un <xref:System.Windows.TemplateVisualStateAttribute.GroupName%2A> in un <xref:System.Windows.VisualStateGroup>, come descritto in [modifica dell'aspetto di un controllo a seconda dello stato](#changing_the_appearance_of_a_control_depending_on_its_state) precedente in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="87a03-326">You create a <xref:System.Windows.VisualState> for each specified state and put all <xref:System.Windows.VisualState> objects that share a <xref:System.Windows.TemplateVisualStateAttribute.GroupName%2A> in a <xref:System.Windows.VisualStateGroup>, as described in [Changing the Appearance of a Control Depending on Its State](#changing_the_appearance_of_a_control_depending_on_its_state) earlier in this topic.</span></span> <span data-ttu-id="87a03-327">I controlli di terze parti devono specificare gli Stati usando il <xref:System.Windows.TemplateVisualStateAttribute>, che consente agli strumenti di progettazione, ad esempio [finestra di progettazione XAML](/visualstudio/xaml-tools/designing-xaml-in-visual-studio) in Visual Studio e Blend per Visual Studio, di esporre gli Stati del controllo per la creazione di modelli di controllo.</span><span class="sxs-lookup"><span data-stu-id="87a03-327">Third-party controls should specify states by using the <xref:System.Windows.TemplateVisualStateAttribute>, which enables designer tools, such as the [XAML Designer](/visualstudio/xaml-tools/designing-xaml-in-visual-studio) in Visual Studio and Blend for Visual Studio, to expose the control's states for authoring control templates.</span></span>

 <span data-ttu-id="87a03-328">Per trovare il contratto di controllo dei controlli inclusi in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], vedere [Stili e modelli di Control](control-styles-and-templates.md).</span><span class="sxs-lookup"><span data-stu-id="87a03-328">To find the control contract for controls that are included with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [Control Styles and Templates](control-styles-and-templates.md).</span></span>

### <a name="properties-in-the-control-contract"></a><span data-ttu-id="87a03-329">Proprietà nel contratto di controllo</span><span class="sxs-lookup"><span data-stu-id="87a03-329">Properties in the Control Contract</span></span>
 <span data-ttu-id="87a03-330">Anche le proprietà pubbliche che influiscono visivamente sul controllo sono incluse nel contratto di controllo.</span><span class="sxs-lookup"><span data-stu-id="87a03-330">The public properties that visually affect the control are also included in the control contract.</span></span> <span data-ttu-id="87a03-331">È possibile impostare queste proprietà per modificare l'aspetto del controllo senza creare una nuova <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="87a03-331">You can set these properties to change the appearance of the control without creating a new <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="87a03-332">È anche possibile usare l'estensione di markup [TemplateBinding](../advanced/templatebinding-markup-extension.md) per associare le proprietà degli elementi presenti nel <xref:System.Windows.Controls.ControlTemplate> alle proprietà pubbliche definite dall'<xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="87a03-332">You can also use the [TemplateBinding](../advanced/templatebinding-markup-extension.md) markup extension to bind properties of elements that are in the <xref:System.Windows.Controls.ControlTemplate> to public properties that are defined by the <xref:System.Windows.Controls.Button>.</span></span>

 <span data-ttu-id="87a03-333">L'esempio seguente illustra il contratto di controllo per il pulsante.</span><span class="sxs-lookup"><span data-stu-id="87a03-333">The following example shows the control contract for the button.</span></span>

 [!code-csharp[VSMButtonTemplate#ButtonContract](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/controlcontracts.cs#buttoncontract)]
 [!code-vb[VSMButtonTemplate#ButtonContract](~/samples/snippets/visualbasic/VS_Snippets_Wpf/vsmbuttontemplate/visualbasic/window1.xaml.vb#buttoncontract)]

 <span data-ttu-id="87a03-334">Quando si crea una <xref:System.Windows.Controls.ControlTemplate>, è spesso più semplice iniziare con una <xref:System.Windows.Controls.ControlTemplate> esistente e apportare modifiche.</span><span class="sxs-lookup"><span data-stu-id="87a03-334">When creating a <xref:System.Windows.Controls.ControlTemplate>, it is often easiest to begin with an existing <xref:System.Windows.Controls.ControlTemplate> and make changes to it.</span></span> <span data-ttu-id="87a03-335">Per modificare un <xref:System.Windows.Controls.ControlTemplate>esistente, è possibile eseguire una delle operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="87a03-335">You can do one of the following to change an existing <xref:System.Windows.Controls.ControlTemplate>:</span></span>

- <span data-ttu-id="87a03-336">Utilizzare una finestra di progettazione, ad esempio Blend per Visual Studio, che fornisce un'interfaccia utente grafica per la creazione di modelli di controllo.</span><span class="sxs-lookup"><span data-stu-id="87a03-336">Use a designer, such as Blend for Visual Studio, that provides a graphical user interface for creating control templates.</span></span> <span data-ttu-id="87a03-337">Per altre informazioni, vedere [Applicazione di stili a un controllo che supporta modelli](https://go.microsoft.com/fwlink/?LinkId=161153).</span><span class="sxs-lookup"><span data-stu-id="87a03-337">For more information, see [Styling a control that supports templates](https://go.microsoft.com/fwlink/?LinkId=161153).</span></span>

- <span data-ttu-id="87a03-338">Ottenere il <xref:System.Windows.Controls.ControlTemplate> predefinito e modificarlo.</span><span class="sxs-lookup"><span data-stu-id="87a03-338">Get the default <xref:System.Windows.Controls.ControlTemplate> and edit it.</span></span> <span data-ttu-id="87a03-339">Per trovare i modelli del controllo predefiniti che sono inclusi in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], vedere [Temi WPF predefiniti](https://go.microsoft.com/fwlink/?LinkID=158252).</span><span class="sxs-lookup"><span data-stu-id="87a03-339">To find the default control templates that are included with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [Default WPF Themes](https://go.microsoft.com/fwlink/?LinkID=158252).</span></span>

<a name="complete_example"></a>
## <a name="complete-example"></a><span data-ttu-id="87a03-340">Esempio completo</span><span class="sxs-lookup"><span data-stu-id="87a03-340">Complete Example</span></span>
 <span data-ttu-id="87a03-341">Nell'esempio seguente viene illustrata la<xref:System.Windows.Controls.ControlTemplate> di <xref:System.Windows.Controls.Button>completa descritta in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="87a03-341">The following example shows the complete <xref:System.Windows.Controls.Button><xref:System.Windows.Controls.ControlTemplate> that is discussed in this topic.</span></span>

 [!code-xaml[VSMButtonTemplate#3](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#3)]

## <a name="see-also"></a><span data-ttu-id="87a03-342">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="87a03-342">See also</span></span>

- [<span data-ttu-id="87a03-343">Applicazione di stili e modelli</span><span class="sxs-lookup"><span data-stu-id="87a03-343">Styling and Templating</span></span>](styling-and-templating.md)

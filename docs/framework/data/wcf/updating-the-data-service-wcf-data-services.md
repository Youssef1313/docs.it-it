---
title: Aggiornamento del servizio dati (WCF Data Services)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, changing data
- WCF Data Services, client library
ms.assetid: 00d993be-ffed-4dea-baf7-6eea982cdb54
ms.openlocfilehash: 060cdab4f486782e6ad60511fadad95a41255dec
ms.sourcegitcommit: 79a2d6a07ba4ed08979819666a0ee6927bbf1b01
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 11/28/2019
ms.locfileid: "74568814"
---
# <a name="updating-the-data-service-wcf-data-services"></a><span data-ttu-id="574e0-102">Aggiornamento del servizio dati (WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="574e0-102">Updating the Data Service (WCF Data Services)</span></span>
<span data-ttu-id="574e0-103">Quando si utilizza la libreria client di WCF Data Services per utilizzare un feed di Open Data Protocol (OData), la libreria converte le voci del feed in istanze delle classi del servizio dati client.</span><span class="sxs-lookup"><span data-stu-id="574e0-103">When you use the WCF Data Services client library to consume an Open Data Protocol (OData) feed, the library translates the entries in the feed into instances of client data service classes.</span></span> <span data-ttu-id="574e0-104">Queste classi del servizio dati vengono rilevate utilizzando la classe <xref:System.Data.Services.Client.DataServiceContext> a cui appartiene <xref:System.Data.Services.Client.DataServiceQuery%601>.</span><span class="sxs-lookup"><span data-stu-id="574e0-104">These data service classes are tracked by using the <xref:System.Data.Services.Client.DataServiceContext> to which the <xref:System.Data.Services.Client.DataServiceQuery%601> belongs.</span></span> <span data-ttu-id="574e0-105">Il client rileva le modifiche alle entità segnalate utilizzando i metodi su <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="574e0-105">The client tracks changes to entities that you report by using methods on <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="574e0-106">Questi metodi consentono al client di rilevare le entità aggiunte ed eliminate, nonché le modifiche apportate ai valori delle proprietà o alle relazioni tra le istanze di entità.</span><span class="sxs-lookup"><span data-stu-id="574e0-106">These methods enable the client to track added and deleted entities and also changes that you make to property values or to relationships between entity instances.</span></span> <span data-ttu-id="574e0-107">Le modifiche rilevate vengono restituite al servizio dati sotto forma di operazioni basate su REST quando si chiama il metodo <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="574e0-107">Those tracked changes are sent back to the data service as REST-based operations when you call the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="574e0-108">Quando si usa un'istanza di <xref:System.Data.Services.Client.DataServiceCollection%601> per associare i dati ai controlli, le modifiche apportate ai dati nel controllo associato vengono automaticamente segnalate in <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="574e0-108">When you use an instance of <xref:System.Data.Services.Client.DataServiceCollection%601> to bind data to controls, changes made to data in the bound control are automatically reported to the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="574e0-109">Per ulteriori informazioni, vedere [associazione di dati a controlli](binding-data-to-controls-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="574e0-109">For more information, see [Binding Data to Controls](binding-data-to-controls-wcf-data-services.md).</span></span>  
  
## <a name="adding-modifying-and-changing-entities"></a><span data-ttu-id="574e0-110">Aggiunta e modifica delle entità</span><span class="sxs-lookup"><span data-stu-id="574e0-110">Adding, Modifying, and Changing Entities</span></span>  
 <span data-ttu-id="574e0-111">Quando si usa la finestra di dialogo **Aggiungi riferimento al servizio** in Visual Studio per aggiungere un riferimento a un feed OData, le classi del servizio dati client risultanti hanno un metodo di *creazione* statico che accetta un parametro per ogni proprietà di entità non nullable.</span><span class="sxs-lookup"><span data-stu-id="574e0-111">When you use the **Add Service Reference** dialog in Visual Studio to add a reference to an OData feed, the resulting client data service classes each have a static *Create* method that takes one parameter for each non-nullable entity property.</span></span> <span data-ttu-id="574e0-112">È possibile usare questo metodo per creare istanze delle classi di tipo entità, come illustrato nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="574e0-112">You can use this method to create instances of entity type classes, as in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#CreateNewProduct](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#createnewproduct)]
 [!code-vb[Astoria Northwind Client#CreateNewProduct](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#createnewproduct)]  
  
 <span data-ttu-id="574e0-113">Per aggiungere un'istanza di entità, chiamare il metodo *AddTo* appropriato sulla classe <xref:System.Data.Services.Client.DataServiceContext> generata dalla finestra di dialogo **Aggiungi riferimento al servizio** , come nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="574e0-113">To add an entity instance, call the appropriate *AddTo* method on the <xref:System.Data.Services.Client.DataServiceContext> class generated by the **Add Service Reference** dialog box, as in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#AddProductSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#addproductspecific)]
 [!code-vb[Astoria Northwind Client#AddProductSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#addproductspecific)]  
  
 <span data-ttu-id="574e0-114">L'oggetto verrà aggiunto al contesto e inserito nel set di entità corretto.</span><span class="sxs-lookup"><span data-stu-id="574e0-114">This adds the object to the context and into the correct entity set.</span></span> <span data-ttu-id="574e0-115">È inoltre possibile chiamare <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A>, ma in questo caso è necessario fornire il nome del set di entità.</span><span class="sxs-lookup"><span data-stu-id="574e0-115">You can also call <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A>, but you must instead supply the entity set name.</span></span> <span data-ttu-id="574e0-116">Se l'entità aggiunta dispone di una o più relazioni con altre entità, sarà possibile usare il metodo <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A> o uno dei metodi precedenti e definire inoltre in modo esplicito tali collegamenti.</span><span class="sxs-lookup"><span data-stu-id="574e0-116">If the added entity has one or more relationships to other entities, you can either use the <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A> method or use one of the previous methods and also explicitly define those links.</span></span> <span data-ttu-id="574e0-117">Queste operazioni verranno illustrate più avanti in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="574e0-117">These operations are discussed later in this topic.</span></span>  
  
 <span data-ttu-id="574e0-118">Per modificare un'istanza di entità esistente, eseguire innanzitutto una query per tale entità, apportare le modifiche desiderate alle proprietà corrispondenti, quindi chiamare il metodo <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> sull'oggetto <xref:System.Data.Services.Client.DataServiceContext> per indicare alla libreria client la necessità di inviare un aggiornamento per tale oggetto, come illustrato nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="574e0-118">To modify an existing entity instance, first query for that entity, make the desired changes to its properties, and then call the <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> to indicate to the client library that it needs to send an update for that object, as shown in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#ModifyCustomerSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#modifycustomerspecific)]
 [!code-vb[Astoria Northwind Client#ModifyCustomerSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#modifycustomerspecific)]  
  
 <span data-ttu-id="574e0-119">Per eliminare un'istanza di entità, chiamare il metodo <xref:System.Data.Services.Client.DataServiceContext.DeleteObject%2A> sull'oggetto <xref:System.Data.Services.Client.DataServiceContext>, come illustrato nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="574e0-119">To delete an entity instance, call the <xref:System.Data.Services.Client.DataServiceContext.DeleteObject%2A> method on the <xref:System.Data.Services.Client.DataServiceContext>, as shown in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#DeleteProductSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#deleteproductspecific)]
 [!code-vb[Astoria Northwind Client#DeleteProductSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#deleteproductspecific)]  
  
 <span data-ttu-id="574e0-120">Per altre informazioni, vedere [procedura: aggiungere, modificare ed eliminare entità](how-to-add-modify-and-delete-entities-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="574e0-120">For more information, see [How to: Add, Modify, and Delete Entities](how-to-add-modify-and-delete-entities-wcf-data-services.md).</span></span>  
  
## <a name="attaching-entities"></a><span data-ttu-id="574e0-121">Collegamento di entità</span><span class="sxs-lookup"><span data-stu-id="574e0-121">Attaching Entities</span></span>  
 <span data-ttu-id="574e0-122">La libreria client consente di salvare gli aggiornamenti apportati a un'entità senza prima eseguire una query per il caricamento dell'entità in <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="574e0-122">The client library enables you to save updates that you made to an entity without first executing a query to load the entity into the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="574e0-123">Usare il metodo <xref:System.Data.Services.Client.DataServiceContext.AttachTo%2A> per collegare un oggetto esistente a un set di entità specifico nell'oggetto <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="574e0-123">Use the <xref:System.Data.Services.Client.DataServiceContext.AttachTo%2A> method to attach an existing object to a specific entity set in the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="574e0-124">Sarà quindi possibile modificare l'oggetto e salvare le modifiche nel servizio dati.</span><span class="sxs-lookup"><span data-stu-id="574e0-124">You can then modify the object and save the changes to the data service.</span></span> <span data-ttu-id="574e0-125">Nell'esempio seguente un oggetto cliente modificato in precedenza viene collegato al contesto e viene quindi chiamato il metodo <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> per contrassegnare l'oggetto collegato come <xref:System.Data.Services.Client.EntityStates.Modified> prima della chiamata del metodo <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>:</span><span class="sxs-lookup"><span data-stu-id="574e0-125">In the following example, a customer object that has been changed is attached to the context and then <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> is called to mark the attached object as <xref:System.Data.Services.Client.EntityStates.Modified> before <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> is called:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#AttachObjectSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#attachobjectspecific)]
 [!code-vb[Astoria Northwind Client#AttachObjectSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#attachobjectspecific)]  
  
 <span data-ttu-id="574e0-126">Le considerazioni seguenti riguardano la connessione di oggetti:</span><span class="sxs-lookup"><span data-stu-id="574e0-126">The following considerations apply when attaching objects:</span></span>  
  
- <span data-ttu-id="574e0-127">Un oggetto viene collegato nello stato <xref:System.Data.Services.Client.EntityStates.Unchanged>.</span><span class="sxs-lookup"><span data-stu-id="574e0-127">An object is attached in the <xref:System.Data.Services.Client.EntityStates.Unchanged> state.</span></span>  
  
- <span data-ttu-id="574e0-128">Il collegamento di un oggetto non determina il collegamento degli oggetti correlati all'oggetto collegato.</span><span class="sxs-lookup"><span data-stu-id="574e0-128">When an object is attached, objects that are related to the attached object are not also attached.</span></span>  
  
- <span data-ttu-id="574e0-129">Non è possibile collegare un oggetto se l'entità è già in fase di rilevamento da parte del contesto.</span><span class="sxs-lookup"><span data-stu-id="574e0-129">An object cannot be attached if the entity is already being tracked by the context.</span></span>  
  
- <span data-ttu-id="574e0-130">L'overload del metodo <xref:System.Data.Services.Client.DataServiceContext.AttachTo%28System.String%2CSystem.Object%2CSystem.String%29> che accetta un parametro `etag` viene usato quando si collega un oggetto entità ricevuto insieme a un valore eTag.</span><span class="sxs-lookup"><span data-stu-id="574e0-130">The <xref:System.Data.Services.Client.DataServiceContext.AttachTo%28System.String%2CSystem.Object%2CSystem.String%29> method overload that takes an `etag` parameter is used when you attach an entity object that was received along with an eTag value.</span></span> <span data-ttu-id="574e0-131">Questo valore eTag verrà quindi usato per il controllo della concorrenza durante il salvataggio delle modifiche nell'oggetto collegato.</span><span class="sxs-lookup"><span data-stu-id="574e0-131">This eTag value is then used to check for concurrency when changes to the attached object are saved.</span></span>  
  
 <span data-ttu-id="574e0-132">Per altre informazioni, vedere [procedura: alleghi un'entità esistente a DataServiceContext](attach-an-existing-entity-to-dc-wcf-data.md).</span><span class="sxs-lookup"><span data-stu-id="574e0-132">For more information, see [How to: Attach an Existing Entity to the DataServiceContext](attach-an-existing-entity-to-dc-wcf-data.md).</span></span>  
  
## <a name="creating-and-modifying-relationship-links"></a><span data-ttu-id="574e0-133">Creazione e modifica dei collegamenti delle relazioni</span><span class="sxs-lookup"><span data-stu-id="574e0-133">Creating and Modifying Relationship Links</span></span>  
 <span data-ttu-id="574e0-134">Quando si aggiunge una nuova entità utilizzando il metodo <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> o il metodo *AddTo* appropriato della classe <xref:System.Data.Services.Client.DataServiceContext> generata dalla finestra di dialogo **Aggiungi riferimento al servizio** , le relazioni tra la nuova entità e le entità correlate non vengono definite automaticamente.</span><span class="sxs-lookup"><span data-stu-id="574e0-134">When you add a new entity by using either the <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> method or the appropriate *AddTo* method of the <xref:System.Data.Services.Client.DataServiceContext> class that the **Add Service Reference** dialog generates, any relationships between the new entity and related entities are not automatically defined.</span></span>  
  
 <span data-ttu-id="574e0-135">È possibile creare e modificare le relazioni tra istanze di entità e fare in modo che tali modifiche vengano apportate nel servizio dati mediante la libreria client.</span><span class="sxs-lookup"><span data-stu-id="574e0-135">You can create and change relationships between entity instances and have the client library reflect those changes in the data service.</span></span> <span data-ttu-id="574e0-136">Le relazioni tra entità vengono definite come associazioni nel modello e l'oggetto <xref:System.Data.Services.Client.DataServiceContext> rileva ogni relazione come oggetto collegamento nel contesto.</span><span class="sxs-lookup"><span data-stu-id="574e0-136">Relationships between entities are defined as associations in the model, and the <xref:System.Data.Services.Client.DataServiceContext> tracks each relationship as a link object in the context.</span></span> <span data-ttu-id="574e0-137">WCF Data Services fornisce i metodi seguenti nella classe <xref:System.Data.Services.Client.DataServiceContext> per creare, modificare ed eliminare questi collegamenti:</span><span class="sxs-lookup"><span data-stu-id="574e0-137">WCF Data Services provides the following methods on the <xref:System.Data.Services.Client.DataServiceContext> class to create, modify, and delete these links:</span></span>  
  
|<span data-ttu-id="574e0-138">Metodo</span><span class="sxs-lookup"><span data-stu-id="574e0-138">Method</span></span>|<span data-ttu-id="574e0-139">Descrizione</span><span class="sxs-lookup"><span data-stu-id="574e0-139">Description</span></span>|  
|------------|-----------------|  
|<xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A>|<span data-ttu-id="574e0-140">Crea un nuovo collegamento tra due oggetti entità correlati.</span><span class="sxs-lookup"><span data-stu-id="574e0-140">Creates a new link between two related entity objects.</span></span> <span data-ttu-id="574e0-141">La chiamata a questo metodo equivale alla chiamata al metodo <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> e <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> per creare il nuovo oggetto e definire la relazione a un oggetto esistente.</span><span class="sxs-lookup"><span data-stu-id="574e0-141">Calling this method is equivalent to calling <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> and <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> to both create the new object and define the relationship to an existing object.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.AddLink%2A>|<span data-ttu-id="574e0-142">Crea un nuovo collegamento tra due oggetti entità correlati.</span><span class="sxs-lookup"><span data-stu-id="574e0-142">Creates a new link between two related entity objects.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.SetLink%2A>|<span data-ttu-id="574e0-143">Aggiorna un collegamento esistente tra due oggetti entità correlati.</span><span class="sxs-lookup"><span data-stu-id="574e0-143">Updates an existing link between two related entity objects.</span></span> <span data-ttu-id="574e0-144"><xref:System.Data.Services.Client.DataServiceContext.SetLink%2A> viene usato anche per eliminare collegamenti con una cardinalità di zero-o-uno-a-uno (`0..1:1`) e uno-a-uno (`1:1`).</span><span class="sxs-lookup"><span data-stu-id="574e0-144"><xref:System.Data.Services.Client.DataServiceContext.SetLink%2A> is also used to delete links with a cardinality of zero-or-one-to-one (`0..1:1`) and one-to-one (`1:1`).</span></span> <span data-ttu-id="574e0-145">A tale scopo è possibile impostare l'oggetto correlato su `null`.</span><span class="sxs-lookup"><span data-stu-id="574e0-145">You can do this by setting the related object to `null`.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.DeleteLink%2A>|<span data-ttu-id="574e0-146">Contrassegna un collegamento rilevato dal contesto per l'eliminazione quando viene chiamato il metodo <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="574e0-146">Marks a link that the context is tracking for deletion when the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method is called.</span></span> <span data-ttu-id="574e0-147">Usare questo metodo quando si elimina un oggetto correlato o si modifica una relazione eliminando prima il collegamento all'oggetto esistente e aggiungendo quindi un collegamento al nuovo oggetto correlato.</span><span class="sxs-lookup"><span data-stu-id="574e0-147">Use this method when you delete a related object or change a relationship by first deleting the link to an existing object and then adding a link to the new related object.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.AttachLink%2A>|<span data-ttu-id="574e0-148">Notifica al contesto l'esistenza di un collegamento tra due oggetti entità.</span><span class="sxs-lookup"><span data-stu-id="574e0-148">Notifies the context of an existing link between two entity objects.</span></span> <span data-ttu-id="574e0-149">Il contesto presuppone che questa relazione esista già nel servizio dati e non effettua alcun tentativo di creare il collegamento durante la chiamata del metodo <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="574e0-149">The context assumes that this relationship already exists in the data service and does not try to create the link when you call the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method.</span></span> <span data-ttu-id="574e0-150">Usare questo metodo quando si collegano oggetti a un contesto e si ha inoltre la necessità di creare il collegamento tra l'oggetto e il contesto.</span><span class="sxs-lookup"><span data-stu-id="574e0-150">Use this method when you attach objects to a context and need to also attach the link between the two.</span></span> <span data-ttu-id="574e0-151">Se si sta definendo una nuova relazione, è invece necessario usare <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A>.</span><span class="sxs-lookup"><span data-stu-id="574e0-151">If you are defining a new relationship, you should instead use <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A>.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.DetachLink%2A>|<span data-ttu-id="574e0-152">Arresta il rilevamento del collegamento specificato nel contesto.</span><span class="sxs-lookup"><span data-stu-id="574e0-152">Stops tracking the specified link in the context.</span></span> <span data-ttu-id="574e0-153">Questo metodo è usato per eliminare relazioni uno-a-molti (`*:*`).</span><span class="sxs-lookup"><span data-stu-id="574e0-153">This method is used to delete one-to-many (`*:*`) relationships.</span></span> <span data-ttu-id="574e0-154">Per i collegamenti delle relazioni con una cardinalità di uno, è necessario usare invece <xref:System.Data.Services.Client.DataServiceContext.SetLink%2A>.</span><span class="sxs-lookup"><span data-stu-id="574e0-154">For relationship links with a cardinality of one, you must instead use <xref:System.Data.Services.Client.DataServiceContext.SetLink%2A>.</span></span>|  
  
 <span data-ttu-id="574e0-155">Nell'esempio seguente viene illustrato come usare il metodo <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A> per aggiungere un nuovo oggetto `Order_Detail` correlato a un'entità `Orders` esistente.</span><span class="sxs-lookup"><span data-stu-id="574e0-155">The following example shows how to use the <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A> method to add a new `Order_Detail` that is related to an existing `Orders` entity.</span></span> <span data-ttu-id="574e0-156">Dal momento che il nuovo oggetto `Order_Details` viene ora rilevato da <xref:System.Data.Services.Client.DataServiceContext>, la relazione dell'oggetto `Order_Details` aggiunto all'entità `Products` esistente è definita tramite la chiamata al metodo <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A>:</span><span class="sxs-lookup"><span data-stu-id="574e0-156">Because the new `Order_Details` object is now tracked by the <xref:System.Data.Services.Client.DataServiceContext>, the relationship of the added `Order_Details` object to the existing `Products` entity is defined by calling the <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> method:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#AddOrderDetailToOrderSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#addorderdetailtoorderspecific)]
 [!code-vb[Astoria Northwind Client#AddOrderDetailToOrderSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#addorderdetailtoorderspecific)]  
  
 <span data-ttu-id="574e0-157">Mentre il metodo <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> definisce i collegamenti che devono essere creati nel servizio dati, per fare in modo che questi collegamenti vengano riflessi negli oggetti inclusi nel contesto, è inoltre necessario impostare le proprietà di navigazione sugli oggetti stessi.</span><span class="sxs-lookup"><span data-stu-id="574e0-157">While the <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> method defines links that must be created in the data service, to have these links reflected in the objects that are in the context, you must also set the navigation properties on the objects themselves.</span></span> <span data-ttu-id="574e0-158">Nell'esempio precedente le proprietà di navigazione devono essere impostate nel modo seguente:</span><span class="sxs-lookup"><span data-stu-id="574e0-158">In the previous example, you should set the navigation properties as follows:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#SetNavProps](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#setnavprops)]
 [!code-vb[Astoria Northwind Client#SetNavProps](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#setnavprops)]  
  
 <span data-ttu-id="574e0-159">Per altre informazioni, vedere [procedura: definire le relazioni tra entità](how-to-define-entity-relationships-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="574e0-159">For more information, see [How to: Define Entity Relationships](how-to-define-entity-relationships-wcf-data-services.md).</span></span>  
  
## <a name="saving-changes"></a><span data-ttu-id="574e0-160">Salvataggio delle modifiche</span><span class="sxs-lookup"><span data-stu-id="574e0-160">Saving Changes</span></span>  
 <span data-ttu-id="574e0-161">Le modifiche vengono rilevate nell'istanza di <xref:System.Data.Services.Client.DataServiceContext>, ma non vengono inviate immediatamente al server.</span><span class="sxs-lookup"><span data-stu-id="574e0-161">Changes are tracked in the <xref:System.Data.Services.Client.DataServiceContext> instance but not sent to the server immediately.</span></span> <span data-ttu-id="574e0-162">Dopo aver apportato le modifiche necessarie per un'attività specificata, chiamare <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> per inviare tutte le modifiche al servizio dati.</span><span class="sxs-lookup"><span data-stu-id="574e0-162">After you are finished with the required changes for a specified activity, call <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> to submit all the changes to the data service.</span></span> <span data-ttu-id="574e0-163">Per ulteriori informazioni, vedere [gestione del contesto del servizio dati](managing-the-data-service-context-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="574e0-163">For more information, see [Managing the Data Service Context](managing-the-data-service-context-wcf-data-services.md).</span></span> <span data-ttu-id="574e0-164">È inoltre possibile salvare le modifiche in modo asincrono usando i metodi <xref:System.Data.Services.Client.DataServiceContext.BeginSaveChanges%2A> e <xref:System.Data.Services.Client.DataServiceContext.EndSaveChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="574e0-164">You can also save changes asynchronously by using the <xref:System.Data.Services.Client.DataServiceContext.BeginSaveChanges%2A> and <xref:System.Data.Services.Client.DataServiceContext.EndSaveChanges%2A> methods.</span></span> <span data-ttu-id="574e0-165">Per altre informazioni, vedere [operazioni asincrone](asynchronous-operations-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="574e0-165">For more information, see [Asynchronous Operations](asynchronous-operations-wcf-data-services.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="574e0-166">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="574e0-166">See also</span></span>

- [<span data-ttu-id="574e0-167">Libreria client WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="574e0-167">WCF Data Services Client Library</span></span>](wcf-data-services-client-library.md)
- [<span data-ttu-id="574e0-168">Esecuzione di query sul servizio dati</span><span class="sxs-lookup"><span data-stu-id="574e0-168">Querying the Data Service</span></span>](querying-the-data-service-wcf-data-services.md)
- [<span data-ttu-id="574e0-169">Operazioni asincrone</span><span class="sxs-lookup"><span data-stu-id="574e0-169">Asynchronous Operations</span></span>](asynchronous-operations-wcf-data-services.md)
- [<span data-ttu-id="574e0-170">Esecuzione di operazioni in batch</span><span class="sxs-lookup"><span data-stu-id="574e0-170">Batching Operations</span></span>](batching-operations-wcf-data-services.md)
- [<span data-ttu-id="574e0-171">Materializzazione di oggetti</span><span class="sxs-lookup"><span data-stu-id="574e0-171">Object Materialization</span></span>](object-materialization-wcf-data-services.md)
- [<span data-ttu-id="574e0-172">Gestione del contesto del servizio dati</span><span class="sxs-lookup"><span data-stu-id="574e0-172">Managing the Data Service Context</span></span>](managing-the-data-service-context-wcf-data-services.md)

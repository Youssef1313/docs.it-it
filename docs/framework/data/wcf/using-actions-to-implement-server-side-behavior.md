---
title: Utilizzo di azioni per implementare il comportamento lato server
ms.date: 03/30/2017
ms.assetid: 11a372db-7168-498b-80d2-9419ff557ba5
ms.openlocfilehash: 5c71cfe8965cf8edbe07ff7ae4c6be95b437bf80
ms.sourcegitcommit: 5ae5a1a9520b8b8b6164ad728d396717f30edafc
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/11/2019
ms.locfileid: "70894260"
---
# <a name="using-actions-to-implement-server-side-behavior"></a><span data-ttu-id="aa9ac-102">Utilizzo di azioni per implementare il comportamento lato server</span><span class="sxs-lookup"><span data-stu-id="aa9ac-102">Using actions to implement server-side behavior</span></span>

<span data-ttu-id="aa9ac-103">Le azioni OData consentono di implementare un comportamento che agisce su una risorsa recuperata da un servizio OData.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-103">OData Actions provide a way to implement a behavior that acts upon a resource retrieved from an OData service.</span></span> <span data-ttu-id="aa9ac-104">Ad esempio, se si considera come risorsa un filmato digitale, sono diverse le operazioni che è possibile eseguire, ad esempio l'estrazione, la valutazione, l'aggiunta di commenti o l'archiviazione.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-104">For example consider a digital movie as a resource, there are many things you may do with a digital movie: check-out, rate/comment, or check-in.</span></span> <span data-ttu-id="aa9ac-105">Sono tutti esempi di azioni che possono essere implementate da un servizio di WCF Data Services che gestisce i filmati digitali.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-105">These are all examples of Actions that may be implemented by a WCF Data Service that manages digital movies.</span></span> <span data-ttu-id="aa9ac-106">Le azioni vengono descritte in una risposta OData che contiene una risorsa in cui l'azione può essere richiamata.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-106">Actions are described in an OData response that contains a resource on which the Action can be invoked.</span></span> <span data-ttu-id="aa9ac-107">Quando un utente richiede una risorsa che rappresenta un filmato digitale, la risposta restituita da un servizio di WCF Data Services contiene le informazioni sulle azioni disponibili per tale risorsa.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-107">When a user requests a resource that represents a digital movie the response returned from the WCF Data Service contains information about the Actions that are available for that resource.</span></span> <span data-ttu-id="aa9ac-108">La disponibilità di un'azione può dipendere dallo stato del servizio dati o della risorsa.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-108">The availability of an Action can depend on the state of the data service or resource.</span></span> <span data-ttu-id="aa9ac-109">Ad esempio, una volta estratto, un filmato digitale non può essere estratto da un altro utente.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-109">For example once a digital movie is checked out it cannot be checked out by another user.</span></span> <span data-ttu-id="aa9ac-110">I client possono richiamare un'azione semplicemente specificando un URL.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-110">Clients can invoke an action simply by specifying a URL.</span></span> <span data-ttu-id="aa9ac-111">Ad esempio, `http://MyServer/MovieService.svc/Movies(6)` identifica un film digitale specifico e `http://MyServer/MovieService.svc/Movies(6)/Checkout` richiama l'azione sul film specifico.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-111">For example, `http://MyServer/MovieService.svc/Movies(6)` would identify a specific digital movie and `http://MyServer/MovieService.svc/Movies(6)/Checkout` would invoke the action on the specific movie.</span></span> <span data-ttu-id="aa9ac-112">Le azioni consentono di esporre il modello di servizio senza esporre il modello di dati.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-112">Actions allow you to expose you service model without exposing your data model.</span></span> <span data-ttu-id="aa9ac-113">Continuando con l'esempio del servizio del filmato, è possibile che si desideri consentire a un utente di valutare un filmato ma non di esporre direttamente i dati della valutazione come risorsa.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-113">Continuing with the movie service example, you may wish to allow a user to rate a movie, but not directly expose the rating data as a resource.</span></span> <span data-ttu-id="aa9ac-114">È possibile implementare un'azione Rate per consentire all'utente di valutare un filmato ma non di accedere direttamente ai dati della valutazione come risorsa.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-114">You could implement a Rate Action to allow the user to rate a movie but not directly access the rating data as a resource.</span></span>
  
## <a name="implementing-an-action"></a><span data-ttu-id="aa9ac-115">Implementazione di un'azione</span><span class="sxs-lookup"><span data-stu-id="aa9ac-115">Implementing an action</span></span>  
 <span data-ttu-id="aa9ac-116">Per implementare un'azione del servizio, è necessario <xref:System.IServiceProvider>implementare le interfacce, [IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103))e [IDataServiceInvokable](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) .</span><span class="sxs-lookup"><span data-stu-id="aa9ac-116">To implement a service action you must implement the <xref:System.IServiceProvider>, [IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)), and [IDataServiceInvokable](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) interfaces.</span></span> <span data-ttu-id="aa9ac-117"><xref:System.IServiceProvider>consente WCF Data Services di ottenere l'implementazione di [IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)).</span><span class="sxs-lookup"><span data-stu-id="aa9ac-117"><xref:System.IServiceProvider> allows WCF Data Services to get your implementation of [IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)).</span></span> <span data-ttu-id="aa9ac-118">[IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) consente WCF Data Services di creare, trovare, descrivere e richiamare le azioni del servizio.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-118">[IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) allows WCF Data Services to create, find, describe and invoke service actions.</span></span> <span data-ttu-id="aa9ac-119">[IDataServiceInvokable](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) consente di richiamare il codice che implementa il comportamento delle azioni di servizio e di ottenere i risultati, se presenti.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-119">[IDataServiceInvokable](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) allows you to invoke the code that implements the service actions’ behavior and get the results, if any.</span></span> <span data-ttu-id="aa9ac-120">Tenere presente che WCF Data Services contiene servizi WCF "per chiamata", ovvero ogni volta che viene chiamato il servizio, verrà creata una nuova istanza del servizio.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-120">Keep in mind that WCF Data Services are Per-Call WCF Services, a new instance of the service will be created each time the service is called.</span></span>  <span data-ttu-id="aa9ac-121">Assicurarsi che non vengano eseguite operazioni non necessarie quando viene creato il servizio.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-121">Make sure no unnecessary work is done when the service is created.</span></span>  
  
### <a name="iserviceprovider"></a><span data-ttu-id="aa9ac-122">IServiceProvider</span><span class="sxs-lookup"><span data-stu-id="aa9ac-122">IServiceProvider</span></span>  
 <span data-ttu-id="aa9ac-123"><xref:System.IServiceProvider> contiene un metodo denominato <xref:System.IServiceProvider.GetService%2A>.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-123"><xref:System.IServiceProvider> contains a method called <xref:System.IServiceProvider.GetService%2A>.</span></span> <span data-ttu-id="aa9ac-124">Questo metodo viene chiamato da WCF Data Services per recuperare diversi provider di servizi, tra cui provider di servizi di metadati e provider di azioni di servizio dati.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-124">This method is called by WCF Data Services to retrieve a number of service providers, including metadata service providers and data service action providers.</span></span> <span data-ttu-id="aa9ac-125">Quando viene richiesto un provider di azioni di servizio dati, restituire l'implementazione di [IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) .</span><span class="sxs-lookup"><span data-stu-id="aa9ac-125">When asked for a data service action provider, return your [IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) implementation.</span></span>  
  
### <a name="idataserviceactionprovider"></a><span data-ttu-id="aa9ac-126">IDataServiceActionProvider</span><span class="sxs-lookup"><span data-stu-id="aa9ac-126">IDataServiceActionProvider</span></span>  
 <span data-ttu-id="aa9ac-127">[IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) contiene metodi che consentono di recuperare informazioni sulle azioni disponibili.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-127">[IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) contains methods that allow you to retrieve information about the available actions.</span></span> <span data-ttu-id="aa9ac-128">Quando si implementa [IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) si stanno aumentando i metadati per il servizio definito dall'implementazione del servizio di [IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) con azioni e gestendo la distribuzione a tali azioni come appropriato.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-128">When you implement [IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) you are augmenting the metadata for your service which is defined by your service’s implementation of [IDataServiceActionProvider](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) with Actions and handling dispatch to those actions as appropriate.</span></span>  
  
#### <a name="advertiseserviceaction"></a><span data-ttu-id="aa9ac-129">AdvertiseServiceAction</span><span class="sxs-lookup"><span data-stu-id="aa9ac-129">AdvertiseServiceAction</span></span>  
 <span data-ttu-id="aa9ac-130">Viene chiamato il [Metodo AdvertiseServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859971(v=vs.103)) per determinare quali azioni sono disponibili per la risorsa specificata.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-130">The [AdvertiseServiceAction method](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859971(v=vs.103)) is called to determine what actions are available for the specified resource.</span></span> <span data-ttu-id="aa9ac-131">Questo metodo viene chiamato solo per le azioni che non sono sempre disponibili.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-131">This method is only called for actions that are not always available.</span></span> <span data-ttu-id="aa9ac-132">Viene usato per verificare se l'azione deve essere inclusa nella risposta OData in base allo stato della risorsa richiesta o allo stato del servizio.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-132">It is used to check if the action should be included in the OData response based upon the state of the resource being requested or the state of the service.</span></span> <span data-ttu-id="aa9ac-133">La modalità con cui viene eseguita tale verifica viene scelta dall'utente.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-133">How this check is accomplished is completely up to you.</span></span> <span data-ttu-id="aa9ac-134">Se calcolare la disponibilità richiede tempo e la risorsa corrente è presente in un feed, è possibile ignorare la verifica e annunciare l'azione.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-134">If it is an expensive to calculate availability and the current resource is in a feed, it is acceptable to skip the check and advertise the action.</span></span> <span data-ttu-id="aa9ac-135">Il parametro `inFeed` viene impostato su `true` se la risorsa corrente da restituire fa parte di un feed.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-135">The `inFeed` parameter is set to `true` if the current resource being returned is part of a feed.</span></span>  
  
#### <a name="createinvokable"></a><span data-ttu-id="aa9ac-136">CreateInvokable</span><span class="sxs-lookup"><span data-stu-id="aa9ac-136">CreateInvokable</span></span>  
 <span data-ttu-id="aa9ac-137">[CreateInvokable](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859940(v=vs.103)) viene chiamato per creare un [IDataServiceInvokable](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) che contiene un delegato che incapsula il codice che implementa il comportamento dell'azione.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-137">[CreateInvokable](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859940(v=vs.103)) is called to create a [IDataServiceInvokable](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) that contains a delegate that encapsulates the code that implements the action’s behavior.</span></span> <span data-ttu-id="aa9ac-138">In questo modo viene creata l'istanza di [IDataServiceInvokable](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) , ma non viene richiamata l'azione.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-138">This creates the [IDataServiceInvokable](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) instance but does not invoke the action.</span></span> <span data-ttu-id="aa9ac-139">Le azioni di WCF Data Services hanno effetti collaterali e devono essere usate insieme al provider di aggiornamento per salvare le modifiche su disco.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-139">WCF Data Service Actions have side effects and need to work in conjunction with the Update Provider to save those changes to disk.</span></span> <span data-ttu-id="aa9ac-140">Il metodo [IDataServiceInvokable. Invoke](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859924(v=vs.103)) viene chiamato dal metodo SaveChanges () del provider di aggiornamenti.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-140">The [IDataServiceInvokable.Invoke](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh859924(v=vs.103)) method is called from the Update Provider’s SaveChanges() method is called.</span></span>  
  
#### <a name="getserviceactions"></a><span data-ttu-id="aa9ac-141">GetServiceActions</span><span class="sxs-lookup"><span data-stu-id="aa9ac-141">GetServiceActions</span></span>  
 <span data-ttu-id="aa9ac-142">Questo metodo restituisce una raccolta di istanze di [oggetto ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) che rappresentano tutte le azioni esposte da un servizio dati WCF.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-142">This method returns a collection of [ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) instances that represent all of the actions a WCF Data Service exposes.</span></span> <span data-ttu-id="aa9ac-143">[Oggetto ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) è la rappresentazione dei metadati di un'azione che include informazioni quali il nome dell'azione, i relativi parametri e il tipo restituito.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-143">[ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) is the metadata representation of an Action, that includes information like the Action name, its parameters, and its return type.</span></span>  
  
#### <a name="getserviceactionsbybindingparametertype"></a><span data-ttu-id="aa9ac-144">GetServiceActionsByBindingParameterType</span><span class="sxs-lookup"><span data-stu-id="aa9ac-144">GetServiceActionsByBindingParameterType</span></span>  
 <span data-ttu-id="aa9ac-145">Questo metodo restituisce una raccolta di tutte le istanze di [oggetto ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) che possono essere associate al tipo di parametro di associazione specificato.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-145">This method returns a collection of all [ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) instances that can be bound to the specified binding parameter type.</span></span> <span data-ttu-id="aa9ac-146">In altre parole, tutti i [oggetto ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103))che possono agire sul tipo di risorsa specificato (detto anche tipo di parametro di associazione). Viene usato quando il servizio restituisce una risorsa per includere informazioni sulle azioni che possono essere richiamate sulla risorsa.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-146">In other words, all [ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103))s that can act on the specified resource type (also called binding parameter type).This is used when the service returns a resource in order to include information about Actions that can be invoked against that resource.</span></span> <span data-ttu-id="aa9ac-147">Questo metodo deve restituire solo le azioni che è possibile associare al tipo di parametro di associazione esatto (nessun tipo derivato).</span><span class="sxs-lookup"><span data-stu-id="aa9ac-147">This method should only return actions that can bind to the exact binding parameter type (no derived types).</span></span> <span data-ttu-id="aa9ac-148">Il metodo viene chiamato una volta per ogni richiesta per tipo rilevato e il risultato viene memorizzato nella cache da WCF Data Services.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-148">This method is called once per request per type encountered and the result is cached by WCF Data Services.</span></span>  
  
#### <a name="tryresolveserviceaction"></a><span data-ttu-id="aa9ac-149">TryResolveServiceAction</span><span class="sxs-lookup"><span data-stu-id="aa9ac-149">TryResolveServiceAction</span></span>  
 <span data-ttu-id="aa9ac-150">Questo metodo cerca un [oggetto ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) specificato e restituisce `true` se viene trovato [oggetto ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) .</span><span class="sxs-lookup"><span data-stu-id="aa9ac-150">This method searches for a specified [ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) and returns `true` if the [ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) is found.</span></span> <span data-ttu-id="aa9ac-151">Se viene trovato, il [oggetto ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) viene restituito nel `serviceAction` `out` parametro.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-151">If found, the [ServiceAction](https://docs.microsoft.com/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) is returned in the `serviceAction` `out` parameter.</span></span>  
  
### <a name="idataserviceinvokable"></a><span data-ttu-id="aa9ac-152">IDataServiceInvokable</span><span class="sxs-lookup"><span data-stu-id="aa9ac-152">IDataServiceInvokable</span></span>  
 <span data-ttu-id="aa9ac-153">Questa interfaccia consente di eseguire un'azione di WCF Data Services.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-153">This interface provides a way to execute a WCF Data Service Action.</span></span> <span data-ttu-id="aa9ac-154">Quando si implementa IDataServiceInvokable, si è responsabili di tre operazioni:</span><span class="sxs-lookup"><span data-stu-id="aa9ac-154">When implementing IDataServiceInvokable you are responsible for 3 things:</span></span>  
  
1. <span data-ttu-id="aa9ac-155">Acquisizione e marshalling potenziale dei parametri</span><span class="sxs-lookup"><span data-stu-id="aa9ac-155">Capturing and potentially marshaling the parameters</span></span>  
  
2. <span data-ttu-id="aa9ac-156">Distribuzione dei parametri nel codice che implementa effettivamente l'azione quando viene chiamato Invoke()</span><span class="sxs-lookup"><span data-stu-id="aa9ac-156">Dispatching the parameters to the code that actually implements the Action when Invoke() is called</span></span>  
  
3. <span data-ttu-id="aa9ac-157">Archiviazione dei risultati restituiti da Invoke() in modo da poter essere recuperati mediante GetResult()</span><span class="sxs-lookup"><span data-stu-id="aa9ac-157">Storing any results from Invoke() so they can be retrieved using GetResult()</span></span>  
  
 <span data-ttu-id="aa9ac-158">I parametri possono essere passati come token</span><span class="sxs-lookup"><span data-stu-id="aa9ac-158">The parameters may be passed as tokens.</span></span> <span data-ttu-id="aa9ac-159">poiché è possibile scrivere un provider di servizi dati da usare con i token che rappresentano le risorse. In tal caso, potrebbe essere necessario convertire (effettuare il marshalling) i token in risorse effettive prima della distribuzione all'azione effettiva.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-159">This is because it is possible to write a Data Service Provider that works with tokens that represent resources, if this is the case you may need to convert (marshal) these tokens into actual resources before dispatching to the actual action.</span></span> <span data-ttu-id="aa9ac-160">Al termine del marshalling del parametro, lo stato deve essere modificabile, in modo che tutte le modifiche apportate alla risorsa che si verificano quando viene richiamata l'azione verranno salvate e scritte su disco.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-160">After the parameter has been marshaled, it must be in an editable state so that any changes to the resource that occur when the action is invoked will be saved and written to disk.</span></span>  
  
 <span data-ttu-id="aa9ac-161">Questa interfaccia richiede due metodi: Invoke e GetResult.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-161">This interface requires two methods: Invoke and GetResult.</span></span> <span data-ttu-id="aa9ac-162">Invoke richiama il delegato che implementa il comportamento dell'azione e GetResult restituisce il risultato dell'azione.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-162">Invoke invokes the delegate that implements the action’s behavior and GetResult returns the result of the action.</span></span>  
  
## <a name="invoking-a-wcf-data-service-action"></a><span data-ttu-id="aa9ac-163">Richiamo di un'azione di WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="aa9ac-163">Invoking a WCF Data Service Action</span></span>  
 <span data-ttu-id="aa9ac-164">Le azioni vengono richiamate mediante una richiesta HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-164">Actions are invoked using an HTTP POST request.</span></span> <span data-ttu-id="aa9ac-165">L'URL specifica la risorsa seguita dal nome dell'azione.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-165">The URL specifies the resource followed by the action name.</span></span> <span data-ttu-id="aa9ac-166">I parametri vengono passati nel corpo della richiesta.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-166">Parameters are passed in the body of the request.</span></span> <span data-ttu-id="aa9ac-167">Se ad esempio è presente un servizio denominato MovieService che espone un'azione denominata Rate,</span><span class="sxs-lookup"><span data-stu-id="aa9ac-167">For example if there was a service called MovieService which exposed an action called Rate.</span></span> <span data-ttu-id="aa9ac-168">è possibile usare l'URL seguente per richiamare l'azione Rate in un filmato specifico:</span><span class="sxs-lookup"><span data-stu-id="aa9ac-168">You could use the following URL to invoke the Rate action on a specific movie:</span></span>  
  
 `http://MovieServer/MovieService.svc/Movies(1)/Rate`
  
 <span data-ttu-id="aa9ac-169">Movies(1) specifica il filmato che si desidera valutare e Rate specifica l'azione di valutazione.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-169">Movies(1) specifies the movie you wish to rate and Rate specifies the Rate action.</span></span> <span data-ttu-id="aa9ac-170">Il valore effettivo della valutazione sarà presente nel corpo della richiesta HTTP come mostrato nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="aa9ac-170">The actual value of the rating will be in the body of the HTTP request as shown in the following example:</span></span>  
  
```http
POST http://MovieServer/MoviesService.svc/Movies(1)/Rate HTTP/1.1   
Content-Type: application/json   
Content-Length: 20   
Host: localhost:15238  
{   
   "rating": 4   
}  
```  
  
> [!WARNING]
> <span data-ttu-id="aa9ac-171">Il codice di esempio precedente funzionerà solo con WCF Data Services 5.2 e versioni successive che supportano la versione light di JSON.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-171">The above sample code will work only with WCF Data Services 5.2 and later which has support for JSON light.</span></span> <span data-ttu-id="aa9ac-172">Se si usa una versione precedente di WCF Data Services, è necessario specificare il tipo di contenuto json verbose come segue: `application/json;odata=verbose`.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-172">If using an earlier version of WCF Data Services, you must specify the json verbose content-type as follows: `application/json;odata=verbose`.</span></span>  
  
 <span data-ttu-id="aa9ac-173">In alternativa, è possibile richiamare un'azione mediante il client di WCF Data Services come mostrato nel frammento di codice seguente.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-173">Alternatively you can invoke an action using the WCF Data Services Client as shown in the following code snippet.</span></span>  
  
```csharp
MoviesModel context = new MoviesModel (new Uri("http://MyServer/MoviesService.svc/"));  
//...  
context.Execute(new Uri("http://MyServer/MoviesService.svc/Movies(1)/Rate"), "POST", new BodyOperationParameter("rating",4) );
```
  
 <span data-ttu-id="aa9ac-174">Nel frammento di codice precedente la classe `MoviesModel` è stata generata mediante la procedura per aggiungere il riferimento a un servizio WCF Data Services in Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="aa9ac-174">In the code snippet above, the `MoviesModel` class was generated by using Visual Studio to Add Service Reference to a WCF Data Service.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="aa9ac-175">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="aa9ac-175">See also</span></span>

- [<span data-ttu-id="aa9ac-176">WCF Data Services 4.5</span><span class="sxs-lookup"><span data-stu-id="aa9ac-176">WCF Data Services 4.5</span></span>](index.md)
- [<span data-ttu-id="aa9ac-177">Definizione di WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="aa9ac-177">Defining WCF Data Services</span></span>](defining-wcf-data-services.md)
- [<span data-ttu-id="aa9ac-178">Sviluppo e distribuzione di WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="aa9ac-178">Developing and Deploying WCF Data Services</span></span>](developing-and-deploying-wcf-data-services.md)
- [<span data-ttu-id="aa9ac-179">Provider di servizi dati personalizzati</span><span class="sxs-lookup"><span data-stu-id="aa9ac-179">Custom Data Service Providers</span></span>](custom-data-service-providers-wcf-data-services.md)

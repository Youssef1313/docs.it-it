---
title: Creazione di ruoli applicazione in SQL Server
ms.date: 03/30/2017
ms.assetid: 27442435-dfb2-4062-8c59-e2960833a638
ms.openlocfilehash: 212bda6f64829792e965dd6714428a05b30c995b
ms.sourcegitcommit: d2e1dfa7ef2d4e9ffae3d431cf6a4ffd9c8d378f
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/07/2019
ms.locfileid: "70794284"
---
# <a name="creating-application-roles-in-sql-server"></a><span data-ttu-id="888d2-102">Creazione di ruoli applicazione in SQL Server</span><span class="sxs-lookup"><span data-stu-id="888d2-102">Creating Application Roles in SQL Server</span></span>
<span data-ttu-id="888d2-103">I ruoli applicazione consentono di assegnare autorizzazioni a un'applicazione anziché a un ruolo o a un utente del database.</span><span class="sxs-lookup"><span data-stu-id="888d2-103">Application roles provide a way to assign permissions to an application instead of a database role or user.</span></span> <span data-ttu-id="888d2-104">Gli utenti possono connettersi al database, attivare il ruolo applicazione e assumere le autorizzazioni concesse all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="888d2-104">Users can connect to the database, activate the application role, and assume the permissions granted to the application.</span></span> <span data-ttu-id="888d2-105">Le autorizzazioni concesse al ruolo applicazione sono effettive per la durata della connessione.</span><span class="sxs-lookup"><span data-stu-id="888d2-105">The permissions granted to the application role are in force for the duration of the connection.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="888d2-106">I ruoli applicazione vengono attivati quando un'applicazione client fornisce un nome e una password di ruolo applicazione nella stringa di connessione.</span><span class="sxs-lookup"><span data-stu-id="888d2-106">Application roles are activated when a client application supplies an application role name and a password in the connection string.</span></span> <span data-ttu-id="888d2-107">Presentano una vulnerabilità di sicurezza nelle applicazioni a 2 livelli perché la password deve essere archiviata nel computer client.</span><span class="sxs-lookup"><span data-stu-id="888d2-107">They present a security vulnerability in a two-tier application because the password must be stored on the client computer.</span></span> <span data-ttu-id="888d2-108">Nelle applicazioni a 3 livelli è possibile archiviare la password in modo che non sia accessibile agli utenti dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="888d2-108">In a three-tier application, you can store the password so that it cannot be accessed by users of the application.</span></span>  
  
## <a name="application-role-features"></a><span data-ttu-id="888d2-109">Funzionalità dei ruoli applicazione</span><span class="sxs-lookup"><span data-stu-id="888d2-109">Application Role Features</span></span>  
 <span data-ttu-id="888d2-110">Le funzionalità dei ruoli applicazione includono:</span><span class="sxs-lookup"><span data-stu-id="888d2-110">Application roles have the following features:</span></span>  
  
- <span data-ttu-id="888d2-111">A differenza dei ruoli del database, i ruoli applicazione non contengono membri.</span><span class="sxs-lookup"><span data-stu-id="888d2-111">Unlike database roles, application roles contain no members.</span></span>  
  
- <span data-ttu-id="888d2-112">I ruoli applicazione vengono attivati quando un'applicazione fornisce il nome e una password del ruolo applicazione alla stored procedure di sistema `sp_setapprole`.</span><span class="sxs-lookup"><span data-stu-id="888d2-112">Application roles are activated when an application supplies the application role name and a password to the `sp_setapprole` system stored procedure.</span></span>  
  
- <span data-ttu-id="888d2-113">La password deve essere archiviata nel computer client e specificata in fase di esecuzione. I ruoli applicazione non possono essere attivati dall'interno di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="888d2-113">The password must be stored on the client computer and supplied at run time; an application role cannot be activated from inside of SQL Server.</span></span>  
  
- <span data-ttu-id="888d2-114">La password non è crittografata.</span><span class="sxs-lookup"><span data-stu-id="888d2-114">The password is not encrypted.</span></span> <span data-ttu-id="888d2-115">La password con parametri viene archiviata come hash unidirezionale.</span><span class="sxs-lookup"><span data-stu-id="888d2-115">The parameter password is stored as a one-way hash.</span></span>  
  
- <span data-ttu-id="888d2-116">Una volta attivate, le autorizzazioni acquisite tramite il ruolo applicazione rimangono effettive per la durata della connessione.</span><span class="sxs-lookup"><span data-stu-id="888d2-116">Once activated, permissions acquired through the application role remain in effect for the duration of the connection.</span></span>  
  
- <span data-ttu-id="888d2-117">Il ruolo applicazione eredita le autorizzazioni concesse al ruolo `public`.</span><span class="sxs-lookup"><span data-stu-id="888d2-117">The application role inherits permissions granted to the `public` role.</span></span>  
  
- <span data-ttu-id="888d2-118">Se un membro del ruolo predefinito del server `sysadmin` attiva un ruolo applicazione, il contesto di sicurezza diventa quello del ruolo applicazione per la durata della connessione.</span><span class="sxs-lookup"><span data-stu-id="888d2-118">If a member of the `sysadmin` fixed server role activates an application role, the security context switches to that of the application role for the duration of the connection.</span></span>  
  
- <span data-ttu-id="888d2-119">Se si crea un account `guest` in un database che include un ruolo applicazione, non è necessario creare un account utente di database per il ruolo applicazione o per uno degli account di accesso che lo richiamano.</span><span class="sxs-lookup"><span data-stu-id="888d2-119">If you create a `guest` account in a database that has an application role, you do not need to create a database user account for the application role or for any of the logins that invoke it.</span></span> <span data-ttu-id="888d2-120">I ruoli applicazione possono accedere direttamente a un altro database solo se in quest'ultimo esiste un account `guest`.</span><span class="sxs-lookup"><span data-stu-id="888d2-120">Application roles can directly access another database only if a `guest` account exists in the second database</span></span>  
  
- <span data-ttu-id="888d2-121">Le funzioni predefinite che restituiscono nomi di account di accesso, ad esempio SYSTEM_USER, restituiscono il nome dell'account di accesso che ha richiamato il ruolo applicazione.</span><span class="sxs-lookup"><span data-stu-id="888d2-121">Built-in functions that return login names, such as SYSTEM_USER, return the name of the login that invoked the application role.</span></span> <span data-ttu-id="888d2-122">Le funzioni predefinite che restituiscono nomi utente del database restituiscono il nome del ruolo applicazione.</span><span class="sxs-lookup"><span data-stu-id="888d2-122">Built-in functions that return database user names return the name of the application role.</span></span>  
  
### <a name="the-principle-of-least-privilege"></a><span data-ttu-id="888d2-123">Principio dei privilegi minimi</span><span class="sxs-lookup"><span data-stu-id="888d2-123">The Principle of Least Privilege</span></span>  
 <span data-ttu-id="888d2-124">Ai ruoli applicazione è necessario concedere solo le autorizzazioni necessarie in caso la password sia compromessa.</span><span class="sxs-lookup"><span data-stu-id="888d2-124">Application roles should be granted only required permissions in case the password is compromised.</span></span> <span data-ttu-id="888d2-125">Le autorizzazioni al ruolo `public` devono essere revocate in qualsiasi database che usa un ruolo applicazione.</span><span class="sxs-lookup"><span data-stu-id="888d2-125">Permissions to the `public` role should be revoked in any database using an application role.</span></span> <span data-ttu-id="888d2-126">Disabilitare l'account utente `guest` in ogni database a cui non si desidera che i chiamanti del ruolo applicazione abbiano accesso.</span><span class="sxs-lookup"><span data-stu-id="888d2-126">Disable the `guest` account in any database you do not want callers of the application role to have access to.</span></span>  
  
### <a name="application-role-enhancements"></a><span data-ttu-id="888d2-127">Miglioramenti dei ruoli applicazione</span><span class="sxs-lookup"><span data-stu-id="888d2-127">Application Role Enhancements</span></span>  
 <span data-ttu-id="888d2-128">Il contesto di esecuzione può essere restituito al chiamante originale dopo l'attivazione di un ruolo applicazione, eliminando la necessità di disabilitare il pool di connessioni.</span><span class="sxs-lookup"><span data-stu-id="888d2-128">The execution context can be switched back to the original caller after activating an application role, removing the need to disable connection pooling.</span></span> <span data-ttu-id="888d2-129">La procedura `sp_setapprole` include una nuova opzione che crea un cookie, contenente informazioni di contesto sul chiamante.</span><span class="sxs-lookup"><span data-stu-id="888d2-129">The `sp_setapprole` procedure has a new option that creates a cookie, which contains context information about the caller.</span></span> <span data-ttu-id="888d2-130">È possibile ripristinare la sessione chiamando la procedura `sp_unsetapprole`, passando il cookie.</span><span class="sxs-lookup"><span data-stu-id="888d2-130">You can revert the session by calling the `sp_unsetapprole` procedure, passing it the cookie.</span></span>  
  
## <a name="application-role-alternatives"></a><span data-ttu-id="888d2-131">Alternative ai ruoli applicazione</span><span class="sxs-lookup"><span data-stu-id="888d2-131">Application Role Alternatives</span></span>  
 <span data-ttu-id="888d2-132">I ruoli applicazione dipendono dalla sicurezza di una password, che presenta una potenziale vulnerabilità per la sicurezza.</span><span class="sxs-lookup"><span data-stu-id="888d2-132">Application roles depend on the security of a password, which presents a potential security vulnerability.</span></span> <span data-ttu-id="888d2-133">Le password possono essere esposte se vengono incorporate nel codice dell'applicazione o salvate su disco.</span><span class="sxs-lookup"><span data-stu-id="888d2-133">Passwords may be exposed by being embedded in application code or saved on disk.</span></span>  
  
 <span data-ttu-id="888d2-134">Può essere opportuno considerare le seguenti alternative.</span><span class="sxs-lookup"><span data-stu-id="888d2-134">You may want to consider the following alternatives.</span></span>  
  
- <span data-ttu-id="888d2-135">Usare il passaggio di contesto con l'istruzione EXECUTE AS e le relative clausole NO REVERT e WITH COOKIE.</span><span class="sxs-lookup"><span data-stu-id="888d2-135">Use context switching with the EXECUTE AS statement with its NO REVERT and WITH COOKIE clauses.</span></span> <span data-ttu-id="888d2-136">È possibile creare un account utente in un database non mappato a un account di accesso.</span><span class="sxs-lookup"><span data-stu-id="888d2-136">You can create a user account in a database that is not mapped to a login.</span></span> <span data-ttu-id="888d2-137">Assegnare quindi le autorizzazioni a questo account.</span><span class="sxs-lookup"><span data-stu-id="888d2-137">You then assign permissions to this account.</span></span> <span data-ttu-id="888d2-138">L'uzo di EXECUTE AS con un utente senza account di accesso è un sistema più sicuro, perché si basa su autorizzazioni e non su password.</span><span class="sxs-lookup"><span data-stu-id="888d2-138">Using EXECUTE AS with a login-less user is more secure because it is permission-based, not password-based.</span></span> <span data-ttu-id="888d2-139">Per ulteriori informazioni, vedere [personalizzazione delle autorizzazioni con rappresentazione in SQL Server](customizing-permissions-with-impersonation-in-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="888d2-139">For more information, see [Customizing Permissions with Impersonation in SQL Server](customizing-permissions-with-impersonation-in-sql-server.md).</span></span>  
  
- <span data-ttu-id="888d2-140">Firmare le stored procedure con certificati, concedendo solo l'autorizzazione per eseguirle.</span><span class="sxs-lookup"><span data-stu-id="888d2-140">Sign stored procedures with certificates, granting only permission to execute the procedures.</span></span> <span data-ttu-id="888d2-141">Per ulteriori informazioni, vedere la pagina relativa alla [firma di stored procedure in SQL Server](signing-stored-procedures-in-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="888d2-141">For more information, see [Signing Stored Procedures in SQL Server](signing-stored-procedures-in-sql-server.md).</span></span>  
  
## <a name="external-resources"></a><span data-ttu-id="888d2-142">Risorse esterne</span><span class="sxs-lookup"><span data-stu-id="888d2-142">External Resources</span></span>  
 <span data-ttu-id="888d2-143">Per altre informazioni, vedere le seguenti risorse.</span><span class="sxs-lookup"><span data-stu-id="888d2-143">For more information, see the following resources.</span></span>  
  
|<span data-ttu-id="888d2-144">Risorsa</span><span class="sxs-lookup"><span data-stu-id="888d2-144">Resource</span></span>|<span data-ttu-id="888d2-145">Descrizione</span><span class="sxs-lookup"><span data-stu-id="888d2-145">Description</span></span>|  
|--------------|-----------------|  
|[<span data-ttu-id="888d2-146">Ruoli applicazione</span><span class="sxs-lookup"><span data-stu-id="888d2-146">Application Roles</span></span>](/sql/relational-databases/security/authentication-access/application-roles)|<span data-ttu-id="888d2-147">Viene descritto come creare e usare i ruoli applicazione in SQL Server 2008.</span><span class="sxs-lookup"><span data-stu-id="888d2-147">Describes how to create and use application roles in SQL Server 2008.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="888d2-148">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="888d2-148">See also</span></span>

- [<span data-ttu-id="888d2-149">Protezione delle applicazioni ADO.NET</span><span class="sxs-lookup"><span data-stu-id="888d2-149">Securing ADO.NET Applications</span></span>](../securing-ado-net-applications.md)
- [<span data-ttu-id="888d2-150">Cenni preliminari sulla sicurezza in SQL Server</span><span class="sxs-lookup"><span data-stu-id="888d2-150">Overview of SQL Server Security</span></span>](overview-of-sql-server-security.md)
- [<span data-ttu-id="888d2-151">Scenari di sicurezza delle applicazioni in SQL Server</span><span class="sxs-lookup"><span data-stu-id="888d2-151">Application Security Scenarios in SQL Server</span></span>](application-security-scenarios-in-sql-server.md)
- [<span data-ttu-id="888d2-152">Panoramica di ADO.NET</span><span class="sxs-lookup"><span data-stu-id="888d2-152">ADO.NET Overview</span></span>](../ado-net-overview.md)

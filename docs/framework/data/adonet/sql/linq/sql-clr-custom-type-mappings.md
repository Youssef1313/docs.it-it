---
title: Mapping del tipo personalizzato SQL-CLR
ms.date: 03/30/2017
ms.assetid: d916c7fb-4b56-4214-acbe-5e23365047b2
ms.openlocfilehash: 5aff9a78349cbf9443c5b663a41d7c13a109e625
ms.sourcegitcommit: 68653db98c5ea7744fd438710248935f70020dfb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/22/2019
ms.locfileid: "69945051"
---
# <a name="sql-clr-custom-type-mappings"></a><span data-ttu-id="aa3bd-102">Mapping del tipo personalizzato SQL-CLR</span><span class="sxs-lookup"><span data-stu-id="aa3bd-102">SQL-CLR Custom Type Mappings</span></span>
<span data-ttu-id="aa3bd-103">Il mapping dei tipi tra SQL Server e CLR (Common Language Runtime) viene specificato automaticamente quando si usa lo strumento da riga di comando SQLMetal o Progettazione relazionale oggetti.</span><span class="sxs-lookup"><span data-stu-id="aa3bd-103">Type mapping between SQL Server and the common language runtime (CLR) is automatically specified when you use the SQLMetal command-line tool, Object Relational Designer (O/R Designer).</span></span>  
  
 <span data-ttu-id="aa3bd-104">Quando non viene eseguito alcun mapping personalizzato, questi strumenti assegnano i mapping dei tipi predefiniti come descritto in [mapping dei tipi SQL-CLR](../../../../../../docs/framework/data/adonet/sql/linq/sql-clr-type-mapping.md).</span><span class="sxs-lookup"><span data-stu-id="aa3bd-104">When no customized mapping is performed, these tools assign default type mappings as described in [SQL-CLR Type Mapping](../../../../../../docs/framework/data/adonet/sql/linq/sql-clr-type-mapping.md).</span></span> <span data-ttu-id="aa3bd-105">Se si desidera usare mapping dei tipi diversi da quelli predefiniti, è necessario personalizzarli.</span><span class="sxs-lookup"><span data-stu-id="aa3bd-105">If you want to type mappings differently from these defaults, you need to do some customization of the type mappings.</span></span>  
  
 <span data-ttu-id="aa3bd-106">Quando si personalizzano i mapping dei tipi, l'approccio consigliato consiste nell'apportare le modifiche in un file DBML intermedio.</span><span class="sxs-lookup"><span data-stu-id="aa3bd-106">When customizing type mappings, the recommended approach is to make the changes in an intermediary DBML file.</span></span> <span data-ttu-id="aa3bd-107">Il file DBML personalizzato può quindi essere usato quando si creano i file di codice e di mapping con SQLMetal o Progettazione relazionale oggetti.</span><span class="sxs-lookup"><span data-stu-id="aa3bd-107">Then, your customized DBML file should be used when you create you code and mapping files with SQLMetal or O/R Designer.</span></span>  
  
 <span data-ttu-id="aa3bd-108">Dopo aver creato un'istanza dell'oggetto <xref:System.Data.Linq.DataContext> dai file di codice e di mapping, tramite il metodo <xref:System.Data.Linq.DataContext.CreateDatabase%2A?displayProperty=nameWithType> viene creato un database basato sui mapping dei tipi specificati.</span><span class="sxs-lookup"><span data-stu-id="aa3bd-108">Once you instantiate the <xref:System.Data.Linq.DataContext> object from the code and mapping files, the <xref:System.Data.Linq.DataContext.CreateDatabase%2A?displayProperty=nameWithType> method creates a database based on the type mappings that are specified.</span></span> <span data-ttu-id="aa3bd-109">Se non vi sono attributi `type` CLR specificati nei mapping, vengono usati i mapping dei tipi predefiniti.</span><span class="sxs-lookup"><span data-stu-id="aa3bd-109">If there are no CLR `type` attributes specified in the mappings, the default type mappings will be used.</span></span>  
  
## <a name="customization-with-sqlmetal-or-or-designer"></a><span data-ttu-id="aa3bd-110">Personalizzazione con SQLMetal o Progettazione relazionale oggetti</span><span class="sxs-lookup"><span data-stu-id="aa3bd-110">Customization with SQLMetal or O/R Designer</span></span>  
 <span data-ttu-id="aa3bd-111">Con SQLMetal e Progettazione relazionale oggetti è possibile creare automaticamente un modello a oggetti che include le informazioni sul mapping dei tipi all'interno o all'esterno del file di codice.</span><span class="sxs-lookup"><span data-stu-id="aa3bd-111">With SQLMetal and O/R Designer, you can automatically create an object model that includes the type mapping information inside or outside the code file.</span></span> <span data-ttu-id="aa3bd-112">Poiché questi file vengono sovrascritti da SQLMetal o da Progettazione relazionale oggetti ogni volta che si ricreano i mapping, l'approccio consigliato per specificare mapping dei tipi personalizzati consiste nel personalizzare un file DBML.</span><span class="sxs-lookup"><span data-stu-id="aa3bd-112">Because these files are overwritten by SQLMetal or O/R Designer, each time you recreate your mappings, the recommended approach to specifying custom type mappings is to customize a DBML file.</span></span>  
  
 <span data-ttu-id="aa3bd-113">Per personalizzare i mapping dei tipi con SQLMetal o con Progettazione relazionale oggetti, generare innanzitutto un file DBML.</span><span class="sxs-lookup"><span data-stu-id="aa3bd-113">To customize type mappings with SQLMetal or O/R Designer, first generate a DBML file.</span></span> <span data-ttu-id="aa3bd-114">Prima di generare il file di codice o di mapping, modificare quindi il file DBML per identificare i mapping dei tipi desiderati.</span><span class="sxs-lookup"><span data-stu-id="aa3bd-114">Then, before generating the code file or mapping file, modify the DBML file to identify the desired type mappings.</span></span> <span data-ttu-id="aa3bd-115">Con SQLMetal, è necessario modificare manualmente gli attributi `Type` e `DbType` nel file DBML per personalizzare il mapping dei tipi.</span><span class="sxs-lookup"><span data-stu-id="aa3bd-115">With SQLMetal, you have to manually change the `Type` and `DbType` attributes in the DBML file to make your type mapping customizations.</span></span> <span data-ttu-id="aa3bd-116">Con Progettazione relazionale oggetti, è possibile apportare le modifiche all'interno della finestra di progettazione.</span><span class="sxs-lookup"><span data-stu-id="aa3bd-116">With O/R Designer, you can make your changes within the Designer.</span></span> <span data-ttu-id="aa3bd-117">Per ulteriori informazioni sull'utilizzo di O/R Designer, vedere [LINQ to SQL Tools in Visual Studio](/visualstudio/data-tools/linq-to-sql-tools-in-visual-studio2).</span><span class="sxs-lookup"><span data-stu-id="aa3bd-117">For more information about using the O/R Designer, see [LINQ to SQL Tools in Visual Studio](/visualstudio/data-tools/linq-to-sql-tools-in-visual-studio2).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="aa3bd-118">Alcuni mapping dei tipi possono comportare eccezioni di overflow o di perdita di dati durante la conversione da o verso il database.</span><span class="sxs-lookup"><span data-stu-id="aa3bd-118">Some type mappings may result in overflow or data loss exceptions while translating to or from the database.</span></span> <span data-ttu-id="aa3bd-119">Esaminare attentamente la matrice del comportamento in fase di esecuzione del mapping dei tipi nel [mapping del tipo SQL-CLR](../../../../../../docs/framework/data/adonet/sql/linq/sql-clr-type-mapping.md) prima di apportare qualsiasi personalizzazione.</span><span class="sxs-lookup"><span data-stu-id="aa3bd-119">Carefully review the Type Mapping Run-time Behavior Matrix in [SQL-CLR Type Mapping](../../../../../../docs/framework/data/adonet/sql/linq/sql-clr-type-mapping.md) before making any customizations.</span></span>  
  
 <span data-ttu-id="aa3bd-120">Affinché le personalizzazioni del mapping dei tipi siano riconosciute da SQLMetal o da Progettazione relazionale oggetti, è necessario assicurarsi che questi strumenti dispongano del percorso al file DBML personalizzato quando si genera il file di codice o il file di mapping esterno.</span><span class="sxs-lookup"><span data-stu-id="aa3bd-120">In order for your type mapping customizations to be recognized by SQLMetal or O/R Designer, you need to make sure that these tools are supplied with the path to your custom DBML file when you generate your code file or external mapping file.</span></span> <span data-ttu-id="aa3bd-121">Sebbene non sia necessario per la personalizzazione del mapping dei tipi, è consigliabile separare sempre le informazioni sul mapping dei tipi dal file di codice e generare il file di mapping dei tipi esterno aggiuntivo.</span><span class="sxs-lookup"><span data-stu-id="aa3bd-121">Although not required for type mapping customization, it is recommended that you always separate your type mapping information from your code file and generate the additional external type mapping file.</span></span> <span data-ttu-id="aa3bd-122">In questo modo, si garantisce maggiore flessibilità in quanto non è necessaria la ricompilazione del file di codice.</span><span class="sxs-lookup"><span data-stu-id="aa3bd-122">Doing so will leave some flexibility by not requiring that the code file be recompiled.</span></span>  
  
## <a name="incorporating-database-changes"></a><span data-ttu-id="aa3bd-123">Incorporamento delle modifiche al database</span><span class="sxs-lookup"><span data-stu-id="aa3bd-123">Incorporating Database Changes</span></span>  
 <span data-ttu-id="aa3bd-124">Quando il database viene modificato, è necessario aggiornare il file DBML per riflettere tali modifiche.</span><span class="sxs-lookup"><span data-stu-id="aa3bd-124">When your database changes, you will need to update your DBML file to reflect those changes.</span></span> <span data-ttu-id="aa3bd-125">Questo può essere effettuato creando un nuovo file DBML e quindi eseguendo di nuovo le personalizzazioni del mapping dei tipi.</span><span class="sxs-lookup"><span data-stu-id="aa3bd-125">One way to do this is to automatically create a new DBML file and then re-do your type mapping customizations.</span></span> <span data-ttu-id="aa3bd-126">In alternativa, è possibile confrontare le differenze tra il nuovo file DBML e il file DBML personalizzato e aggiornare il file DBML personalizzato manualmente per riflettere le modifiche al database.</span><span class="sxs-lookup"><span data-stu-id="aa3bd-126">Alternatively, you could compare the differences between your new DBML file and your customized DBML file and update your custom DBML file manually to reflect the database change.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="aa3bd-127">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="aa3bd-127">See also</span></span>

- [<span data-ttu-id="aa3bd-128">Mapping del tipo SQL-CLR</span><span class="sxs-lookup"><span data-stu-id="aa3bd-128">SQL-CLR Type Mapping</span></span>](../../../../../../docs/framework/data/adonet/sql/linq/sql-clr-type-mapping.md)
- [<span data-ttu-id="aa3bd-129">Generazione di codice in LINQ to SQL</span><span class="sxs-lookup"><span data-stu-id="aa3bd-129">Code Generation in LINQ to SQL</span></span>](../../../../../../docs/framework/data/adonet/sql/linq/code-generation-in-linq-to-sql.md)

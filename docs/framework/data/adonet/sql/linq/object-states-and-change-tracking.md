---
title: Stati di oggetti e rilevamento di modifiche
ms.date: 03/30/2017
ms.assetid: 7a808b00-9c3c-479a-aa94-717280fefd71
ms.openlocfilehash: a9df200f4d2e5f64bf5883c7bc513ba7129dcaad
ms.sourcegitcommit: d2e1dfa7ef2d4e9ffae3d431cf6a4ffd9c8d378f
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/07/2019
ms.locfileid: "70781281"
---
# <a name="object-states-and-change-tracking"></a><span data-ttu-id="b3eea-102">Stati di oggetti e rilevamento di modifiche</span><span class="sxs-lookup"><span data-stu-id="b3eea-102">Object States and Change-Tracking</span></span>

[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]<span data-ttu-id="b3eea-103">gli oggetti partecipano sempre a uno *stato*.</span><span class="sxs-lookup"><span data-stu-id="b3eea-103">objects always participate in some *state*.</span></span> <span data-ttu-id="b3eea-104">Ad esempio, quando in [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] viene creato un nuovo oggetto, lo stato dell'oggetto è `Unchanged`.</span><span class="sxs-lookup"><span data-stu-id="b3eea-104">For example, when [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] creates a new object, the object is in `Unchanged` state.</span></span> <span data-ttu-id="b3eea-105">Un nuovo oggetto creato è sconosciuto a <xref:System.Data.Linq.DataContext> e si trova nello `Untracked` stato.</span><span class="sxs-lookup"><span data-stu-id="b3eea-105">A new object that you yourself create is unknown to the <xref:System.Data.Linq.DataContext> and is in `Untracked` state.</span></span> <span data-ttu-id="b3eea-106">Dopo la corretta esecuzione di <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, tutti gli oggetti riconosciuti da [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] sono nello stato `Unchanged`.</span><span class="sxs-lookup"><span data-stu-id="b3eea-106">Following successful execution of <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, all objects known to [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] are in `Unchanged` state.</span></span> <span data-ttu-id="b3eea-107">La sola eccezione è rappresentata dagli oggetti eliminati dal database che sono nello stato `Deleted` e di conseguenza inutilizzabili in quell'istanza di <xref:System.Data.Linq.DataContext>.</span><span class="sxs-lookup"><span data-stu-id="b3eea-107">(The single exception is represented by those that have been successfully deleted from the database, which are in `Deleted` state and unusable in that <xref:System.Data.Linq.DataContext> instance.)</span></span>

## <a name="object-states"></a><span data-ttu-id="b3eea-108">Stati degli oggetti</span><span class="sxs-lookup"><span data-stu-id="b3eea-108">Object States</span></span>

<span data-ttu-id="b3eea-109">Nella tabella riportata di seguito sono elencati gli stati possibili per gli oggetti [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)].</span><span class="sxs-lookup"><span data-stu-id="b3eea-109">The following table lists the possible states for [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] objects.</span></span>

|<span data-ttu-id="b3eea-110">Stato</span><span class="sxs-lookup"><span data-stu-id="b3eea-110">State</span></span>|<span data-ttu-id="b3eea-111">Descrizione</span><span class="sxs-lookup"><span data-stu-id="b3eea-111">Description</span></span>|
|-----------|-----------------|
|`Untracked`|<span data-ttu-id="b3eea-112">Un oggetto non registrato da [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)].</span><span class="sxs-lookup"><span data-stu-id="b3eea-112">An object not tracked by [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)].</span></span> <span data-ttu-id="b3eea-113">Di seguito vengono forniti alcuni esempi:</span><span class="sxs-lookup"><span data-stu-id="b3eea-113">Examples include the following:</span></span><br /><br /> <span data-ttu-id="b3eea-114">-Oggetto non sottoposto a query tramite l' <xref:System.Data.Linq.DataContext> oggetto corrente, ad esempio un oggetto appena creato.</span><span class="sxs-lookup"><span data-stu-id="b3eea-114">-   An object not queried through the current <xref:System.Data.Linq.DataContext> (such as a newly created object).</span></span><br /><span data-ttu-id="b3eea-115">: Oggetto creato tramite la deserializzazione.</span><span class="sxs-lookup"><span data-stu-id="b3eea-115">-   An object created through deserialization</span></span><br /><span data-ttu-id="b3eea-116">-Oggetto su cui è stata eseguita una <xref:System.Data.Linq.DataContext>query tramite un oggetto diverso.</span><span class="sxs-lookup"><span data-stu-id="b3eea-116">-   An object queried through a different <xref:System.Data.Linq.DataContext>.</span></span>|
|`Unchanged`|<span data-ttu-id="b3eea-117">Un oggetto recuperato usando l'istanza corrente di <xref:System.Data.Linq.DataContext> e che non risulta modificato da quando è stato creato.</span><span class="sxs-lookup"><span data-stu-id="b3eea-117">An object retrieved by using the current <xref:System.Data.Linq.DataContext> and not known to have been modified since it was created.</span></span>|
|`PossiblyModified`|<span data-ttu-id="b3eea-118">Oggetto *associato* a un <xref:System.Data.Linq.DataContext>oggetto.</span><span class="sxs-lookup"><span data-stu-id="b3eea-118">An object which is *attached* to a <xref:System.Data.Linq.DataContext>.</span></span> <span data-ttu-id="b3eea-119">Per ulteriori informazioni, vedere [recupero di dati e operazioni CUD in applicazioni a più livelli (LINQ to SQL)](data-retrieval-and-cud-operations-in-n-tier-applications.md).</span><span class="sxs-lookup"><span data-stu-id="b3eea-119">For more information, see [Data Retrieval and CUD Operations in N-Tier Applications (LINQ to SQL)](data-retrieval-and-cud-operations-in-n-tier-applications.md).</span></span>|
|`ToBeInserted`|<span data-ttu-id="b3eea-120">Un oggetto non recuperato usando l'istanza corrente di <xref:System.Data.Linq.DataContext>.</span><span class="sxs-lookup"><span data-stu-id="b3eea-120">An object not retrieved by using the current <xref:System.Data.Linq.DataContext>.</span></span> <span data-ttu-id="b3eea-121">In questo caso viene eseguita un'operazione `INSERT` in un database durante l'esecuzione di <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="b3eea-121">This causes a database `INSERT` during <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span></span>|
|`ToBeUpdated`|<span data-ttu-id="b3eea-122">Un oggetto che risulta modificato da quando è stato recuperato.</span><span class="sxs-lookup"><span data-stu-id="b3eea-122">An object known to have been modified since it was retrieved.</span></span> <span data-ttu-id="b3eea-123">In questo caso viene eseguita un'operazione `UPDATE` in un database durante l'esecuzione di <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="b3eea-123">This causes a database `UPDATE` during <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span></span>|
|`ToBeDeleted`|<span data-ttu-id="b3eea-124">Un oggetto contrassegnato per l'eliminazione, che causa un'operazione `DELETE` in un database durante l'esecuzione di <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="b3eea-124">An object marked for deletion, causing a database `DELETE` during <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span></span>|
|`Deleted`|<span data-ttu-id="b3eea-125">Un oggetto eliminato nel database.</span><span class="sxs-lookup"><span data-stu-id="b3eea-125">An object that has been deleted in the database.</span></span> <span data-ttu-id="b3eea-126">Questo stato è finale e non consente transizioni aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="b3eea-126">This state is final and does not allow for additional transitions.</span></span>|

## <a name="inserting-objects"></a><span data-ttu-id="b3eea-127">Inserimento di oggetti</span><span class="sxs-lookup"><span data-stu-id="b3eea-127">Inserting Objects</span></span>

<span data-ttu-id="b3eea-128">È possibile richiedere `Inserts` usando <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A> in modo esplicito.</span><span class="sxs-lookup"><span data-stu-id="b3eea-128">You can explicitly request `Inserts` by using <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>.</span></span> <span data-ttu-id="b3eea-129">In alternativa, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] può dedurre `Inserts` individuando gli oggetti connessi a uno degli oggetti noti che devono essere aggiornati.</span><span class="sxs-lookup"><span data-stu-id="b3eea-129">Alternatively, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] can infer `Inserts` by finding objects connected to one of the known objects that must be updated.</span></span> <span data-ttu-id="b3eea-130">Se ad esempio si `Untracked` aggiunge un oggetto a un <xref:System.Data.Linq.EntitySet%601> oggetto o si imposta <xref:System.Data.Linq.EntityRef%601> un oggetto `Untracked` su un oggetto, l' `Untracked` oggetto viene reso raggiungibile tramite oggetti rilevati nel grafico.</span><span class="sxs-lookup"><span data-stu-id="b3eea-130">For example, if you add an `Untracked` object to an <xref:System.Data.Linq.EntitySet%601> or set an <xref:System.Data.Linq.EntityRef%601> to an `Untracked` object, you make the `Untracked` object reachable by way of tracked objects in the graph.</span></span> <span data-ttu-id="b3eea-131">Durante l' <xref:System.Data.Linq.DataContext.SubmitChanges%2A>elaborazione [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] , attraversa gli oggetti rilevati e individua tutti gli oggetti persistenti raggiungibili che non vengono rilevati.</span><span class="sxs-lookup"><span data-stu-id="b3eea-131">While processing <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] traverses the tracked objects and discovers any reachable persistent objects that are not tracked.</span></span> <span data-ttu-id="b3eea-132">Tali oggetti sono candidati per l'inserimento nel database.</span><span class="sxs-lookup"><span data-stu-id="b3eea-132">Such objects are candidates for insertion into the database.</span></span>

<span data-ttu-id="b3eea-133">Per le classi in una gerarchia di <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>ereditarietà`o`, () imposta anche il valore del membro designato come *discriminatore* in modo che corrisponda al `o`tipo dell'oggetto.</span><span class="sxs-lookup"><span data-stu-id="b3eea-133">For classes in an inheritance hierarchy, <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>(`o`) also sets the value of the member designated as the *discriminator* to match the type of the object `o`.</span></span> <span data-ttu-id="b3eea-134">Qualora un tipo dovesse corrispondere al valore discriminante predefinito, questa azione causerà la sovrascrittura del valore discriminante con il valore predefinito.</span><span class="sxs-lookup"><span data-stu-id="b3eea-134">In the case of a type matching the default discriminator value, this action causes the discriminator value to be overwritten with the default value.</span></span> <span data-ttu-id="b3eea-135">Per ulteriori informazioni, vedere [supporto](inheritance-support.md)per l'ereditarietà.</span><span class="sxs-lookup"><span data-stu-id="b3eea-135">For more information, see [Inheritance Support](inheritance-support.md).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="b3eea-136">Un oggetto aggiunto a un oggetto `Table` non si trova nella cache delle identità,</span><span class="sxs-lookup"><span data-stu-id="b3eea-136">An object added to a `Table` is not in the identity cache.</span></span> <span data-ttu-id="b3eea-137">che riflette solo gli oggetti recuperati dal database.</span><span class="sxs-lookup"><span data-stu-id="b3eea-137">The identity cache reflects only what is retrieved from the database.</span></span> <span data-ttu-id="b3eea-138">Dopo una chiamata a <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>, l'entità aggiunta non viene visualizzata nelle query eseguite sul database finché non si completerà <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="b3eea-138">After a call to <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>, the added entity does not appear in queries against the database until <xref:System.Data.Linq.DataContext.SubmitChanges%2A> is successfully completed.</span></span>

## <a name="deleting-objects"></a><span data-ttu-id="b3eea-139">Eliminazione di oggetti</span><span class="sxs-lookup"><span data-stu-id="b3eea-139">Deleting Objects</span></span>

<span data-ttu-id="b3eea-140">Per contrassegnare per l'eliminazione un oggetto `o` rilevato, chiamare <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>(o) sull'oggetto <xref:System.Data.Linq.Table%601> appropriato.</span><span class="sxs-lookup"><span data-stu-id="b3eea-140">You mark a tracked object `o` for deletion by calling <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>(o) on the appropriate <xref:System.Data.Linq.Table%601>.</span></span> [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]<span data-ttu-id="b3eea-141">Considera la rimozione di un oggetto da un <xref:System.Data.Linq.EntitySet%601> oggetto come operazione di aggiornamento e il valore di chiave esterna corrispondente è impostato su null.</span><span class="sxs-lookup"><span data-stu-id="b3eea-141">considers the removal of an object from an <xref:System.Data.Linq.EntitySet%601> as an update operation, and the corresponding foreign key value is set to null.</span></span> <span data-ttu-id="b3eea-142">La destinazione dell'operazione (`o`) non viene eliminata dalla relativa tabella.</span><span class="sxs-lookup"><span data-stu-id="b3eea-142">The target of the operation (`o`) is not deleted from its table.</span></span> <span data-ttu-id="b3eea-143">Ad esempio, `cust.Orders.DeleteOnSubmit(ord)` indica un aggiornamento in cui la relazione tra `cust` e `ord` viene interrotta mediante l'impostazione della chiave esterna `ord.CustomerID` su null.</span><span class="sxs-lookup"><span data-stu-id="b3eea-143">For example, `cust.Orders.DeleteOnSubmit(ord)` indicates an update where the relationship between `cust` and `ord` is severed by setting the foreign key `ord.CustomerID` to null.</span></span> <span data-ttu-id="b3eea-144">Non causa l'eliminazione della riga che corrisponde a `ord`.</span><span class="sxs-lookup"><span data-stu-id="b3eea-144">It does not cause the deletion of the row corresponding to `ord`.</span></span>

[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]<span data-ttu-id="b3eea-145">esegue l'elaborazione seguente quando un oggetto viene eliminato (<xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>) dalla tabella:</span><span class="sxs-lookup"><span data-stu-id="b3eea-145">performs the following processing when an object is deleted (<xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>) from its table:</span></span>

- <span data-ttu-id="b3eea-146">Quando si chiama <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, per quell'oggetto viene eseguita un'operazione `DELETE`.</span><span class="sxs-lookup"><span data-stu-id="b3eea-146">When <xref:System.Data.Linq.DataContext.SubmitChanges%2A> is called, a `DELETE` operation is performed for that object.</span></span>

- <span data-ttu-id="b3eea-147">La rimozione non viene propagata agli oggetti correlati, indipendentemente dallo stato di caricamento.</span><span class="sxs-lookup"><span data-stu-id="b3eea-147">The removal is not propagated to related objects regardless of whether they are loaded.</span></span> <span data-ttu-id="b3eea-148">In particolare, gli oggetti correlati non vengono caricati per aggiornare la proprietà della relazione.</span><span class="sxs-lookup"><span data-stu-id="b3eea-148">Specifically, related objects are not loaded for updating the relationship property.</span></span>

- <span data-ttu-id="b3eea-149">Dopo la corretta esecuzione di <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, gli oggetti vengono impostati sullo stato `Deleted`.</span><span class="sxs-lookup"><span data-stu-id="b3eea-149">After successful execution of <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, the objects are set to the `Deleted` state.</span></span> <span data-ttu-id="b3eea-150">Di conseguenza non sarà possibile usare l'oggetto o il relativo `id` in un'istanza di <xref:System.Data.Linq.DataContext>.</span><span class="sxs-lookup"><span data-stu-id="b3eea-150">As a result, you cannot use the object or its `id` in that <xref:System.Data.Linq.DataContext>.</span></span> <span data-ttu-id="b3eea-151">La cache interna gestita da un'istanza di <xref:System.Data.Linq.DataContext> non elimina gli oggetti recuperati o aggiunti come nuovi, anche dopo che sono stati eliminati nel database.</span><span class="sxs-lookup"><span data-stu-id="b3eea-151">The internal cache maintained by a <xref:System.Data.Linq.DataContext> instance does not eliminate objects that are retrieved or added as new, even after the objects have been deleted in the database.</span></span>

<span data-ttu-id="b3eea-152">È possibile chiamare <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A> solo su un oggetto registrato da <xref:System.Data.Linq.DataContext>.</span><span class="sxs-lookup"><span data-stu-id="b3eea-152">You can call <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A> only on an object tracked by the <xref:System.Data.Linq.DataContext>.</span></span> <span data-ttu-id="b3eea-153">Per un oggetto `Untracked` è necessario chiamare <xref:System.Data.Linq.Table%601.Attach%2A> prima di <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>.</span><span class="sxs-lookup"><span data-stu-id="b3eea-153">For an `Untracked` object, you must call <xref:System.Data.Linq.Table%601.Attach%2A> before you call <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>.</span></span> <span data-ttu-id="b3eea-154">Chiamando <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A> su un oggetto`Untracked`, verrà generata un'eccezione.</span><span class="sxs-lookup"><span data-stu-id="b3eea-154">Calling <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A> on an `Untracked` object throws an exception.</span></span>

> [!NOTE]
> <span data-ttu-id="b3eea-155">La rimozione di un oggetto da una [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] tabella indica a di generare `DELETE` un comando SQL corrispondente al <xref:System.Data.Linq.DataContext.SubmitChanges%2A>momento della.</span><span class="sxs-lookup"><span data-stu-id="b3eea-155">Removing an object from a table tells [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] to generate a corresponding SQL `DELETE` command at the time of <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span></span> <span data-ttu-id="b3eea-156">Questa azione non rimuove l'oggetto dalla cache, né propaga l'eliminazione agli oggetti correlati.</span><span class="sxs-lookup"><span data-stu-id="b3eea-156">This action does not remove the object from the cache or propagate the deletion to related objects.</span></span>
>
> <span data-ttu-id="b3eea-157">Per recuperare l'`id` di un oggetto eliminato, usare una nuova istanza di <xref:System.Data.Linq.DataContext>.</span><span class="sxs-lookup"><span data-stu-id="b3eea-157">To reclaim the `id` of a deleted object, use a new <xref:System.Data.Linq.DataContext> instance.</span></span> <span data-ttu-id="b3eea-158">Per la pulizia di oggetti correlati, è possibile utilizzare la funzionalità di *eliminazione a catena* del database, altrimenti eliminare manualmente gli oggetti correlati.</span><span class="sxs-lookup"><span data-stu-id="b3eea-158">For cleanup of related objects, you can use the *cascade delete* feature of the database, or else manually delete the related objects.</span></span>
>
> <span data-ttu-id="b3eea-159">Non è necessario, a differenza del database, eliminare gli oggetti correlati in un ordine particolare.</span><span class="sxs-lookup"><span data-stu-id="b3eea-159">The related objects do not have to be deleted in any special order (unlike in the database).</span></span>

## <a name="updating-objects"></a><span data-ttu-id="b3eea-160">Aggiornamento di oggetti</span><span class="sxs-lookup"><span data-stu-id="b3eea-160">Updating Objects</span></span>

<span data-ttu-id="b3eea-161">È possibile rilevare l'esecuzione di `Updates` osservando le notifiche delle modifiche,</span><span class="sxs-lookup"><span data-stu-id="b3eea-161">You can detect `Updates` by observing notifications of changes.</span></span> <span data-ttu-id="b3eea-162">che vengono fornite tramite l'evento <xref:System.ComponentModel.INotifyPropertyChanging.PropertyChanging> nei metodi per l'impostazione delle proprietà.</span><span class="sxs-lookup"><span data-stu-id="b3eea-162">Notifications are provided through the <xref:System.ComponentModel.INotifyPropertyChanging.PropertyChanging> event in property setters.</span></span> <span data-ttu-id="b3eea-163">Quando [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] riceve una notifica della prima modifica a un oggetto, crea una copia dell'oggetto e lo considera candidato per la generazione di un'istruzione `Update`.</span><span class="sxs-lookup"><span data-stu-id="b3eea-163">When [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] is notified of the first change to an object, it creates a copy of the object and considers the object a candidate for generating an `Update` statement.</span></span>

<span data-ttu-id="b3eea-164">Per gli oggetti che non <xref:System.ComponentModel.INotifyPropertyChanging>implementano [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] , in viene mantenuta una copia dei valori utilizzati dagli oggetti quando sono stati materializzati per la prima volta.</span><span class="sxs-lookup"><span data-stu-id="b3eea-164">For objects that do not implement <xref:System.ComponentModel.INotifyPropertyChanging>, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] maintains a copy of the values that objects had when they were first materialized.</span></span> <span data-ttu-id="b3eea-165">Quando si chiama <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] Confronta i valori correnti e originali per decidere se l'oggetto è stato modificato.</span><span class="sxs-lookup"><span data-stu-id="b3eea-165">When you call <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] compares the current and original values to decide whether the object has been changed.</span></span>

<span data-ttu-id="b3eea-166">Per gli aggiornamenti delle relazioni, il riferimento dal figlio al padre, ovvero il riferimento che corrisponde alla chiave esterna, viene considerato autorevole.</span><span class="sxs-lookup"><span data-stu-id="b3eea-166">For updates to relationships, the reference from the child to the parent (that is, the reference corresponding to the foreign key) is considered the authority.</span></span> <span data-ttu-id="b3eea-167">Il riferimento nella direzione inversa, ovvero da padre a figlio, è facoltativo.</span><span class="sxs-lookup"><span data-stu-id="b3eea-167">The reference in the reverse direction (that is, from parent to child) is optional.</span></span> <span data-ttu-id="b3eea-168">Le classi di relazione (<xref:System.Data.Linq.EntitySet%601> e <xref:System.Data.Linq.EntityRef%601>) assicurano che i riferimenti bidirezionali siano coerenti per le relazioni uno-a-molti e uno-a-uno.</span><span class="sxs-lookup"><span data-stu-id="b3eea-168">Relationship classes (<xref:System.Data.Linq.EntitySet%601> and <xref:System.Data.Linq.EntityRef%601>) guarantee that the bidirectional references are consistent for one-to-many and one-to-one relationships.</span></span> <span data-ttu-id="b3eea-169">Se il modello a oggetti non usa <xref:System.Data.Linq.EntitySet%601> o <xref:System.Data.Linq.EntityRef%601> e se è presente il riferimento inverso, sarà necessario mantenerlo coerente con il riferimento in avanti quando viene aggiornata la relazione.</span><span class="sxs-lookup"><span data-stu-id="b3eea-169">If the object model does not use <xref:System.Data.Linq.EntitySet%601> or <xref:System.Data.Linq.EntityRef%601>, and if the reverse reference is present, it is your responsibility to keep it consistent with the forward reference when the relationship is updated.</span></span>

<span data-ttu-id="b3eea-170">Se si aggiornano sia il riferimento obbligatorio che la chiave esterna corrispondente, è necessario assicurarsi che corrispondano.</span><span class="sxs-lookup"><span data-stu-id="b3eea-170">If you update both the required reference and the corresponding foreign key, you must make sure that they agree.</span></span> <span data-ttu-id="b3eea-171">Se non sono entrambi sincronizzati quando si chiama <xref:System.InvalidOperationException>, verrà generata un'eccezione <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="b3eea-171">An <xref:System.InvalidOperationException> exception is thrown if the two are not synchronized at the time that you call <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span></span> <span data-ttu-id="b3eea-172">Anche se le modifiche dei valori della chiave esterna sono sufficienti per interessare un aggiornamento della riga sottostante, è necessario modificare il riferimento per mantenere la connettività dell'oggetto grafico e la coerenza bidirezionale delle relazioni.</span><span class="sxs-lookup"><span data-stu-id="b3eea-172">Although foreign key value changes are sufficient for affecting an update of the underlying row, you should change the reference to maintain connectivity of the object graph and bidirectional consistency of relationships.</span></span>

## <a name="see-also"></a><span data-ttu-id="b3eea-173">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="b3eea-173">See also</span></span>

- [<span data-ttu-id="b3eea-174">Informazioni di base</span><span class="sxs-lookup"><span data-stu-id="b3eea-174">Background Information</span></span>](background-information.md)
- [<span data-ttu-id="b3eea-175">Operazioni di inserimento, aggiornamento ed eliminazione</span><span class="sxs-lookup"><span data-stu-id="b3eea-175">Insert, Update, and Delete Operations</span></span>](insert-update-and-delete-operations.md)

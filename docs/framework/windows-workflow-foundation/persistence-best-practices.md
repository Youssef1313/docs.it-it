---
title: Procedure consigliate per la persistenza
ms.date: 03/30/2017
ms.assetid: 6974c5a4-1af8-4732-ab53-7d694608a3a0
ms.openlocfilehash: 8ffbb3ebfa8f85e2b0052a9df9ada30766accd8e
ms.sourcegitcommit: 32a575bf4adccc901f00e264f92b759ced633379
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 12/04/2019
ms.locfileid: "74802518"
---
# <a name="persistence-best-practices"></a><span data-ttu-id="26e22-102">Procedure consigliate per la persistenza</span><span class="sxs-lookup"><span data-stu-id="26e22-102">Persistence Best Practices</span></span>
<span data-ttu-id="26e22-103">In questo documento vengono descritte le procedure consigliate per la progettazione e la configurazione del flusso di lavoro al fine di mantenerne la persistenza.</span><span class="sxs-lookup"><span data-stu-id="26e22-103">This document covers best practices for workflow design and configuration related to workflow persistence.</span></span>  
  
## <a name="design-and-implementation-of-durable-workflows"></a><span data-ttu-id="26e22-104">Progettazione e implementazione di flussi di lavoro durevoli</span><span class="sxs-lookup"><span data-stu-id="26e22-104">Design and Implementation of Durable Workflows</span></span>  
 <span data-ttu-id="26e22-105">In generale, in un flusso di lavoro le attività vengono eseguite in periodi brevi separati da intervalli durante i quali il flusso di lavoro è inattivo perché in attesa di un evento,</span><span class="sxs-lookup"><span data-stu-id="26e22-105">In general, workflows perform work in short periods that are interleaved with times during which the workflow is idle because it is waiting for an event.</span></span> <span data-ttu-id="26e22-106">ad esempio un messaggio o la scadenza di un timer.</span><span class="sxs-lookup"><span data-stu-id="26e22-106">This event can be such things as a message or an expiring timer.</span></span> <span data-ttu-id="26e22-107">Per essere in grado di scaricare l'istanza del flusso di lavoro quando diventa inattiva, l'host del servizio deve renderla persistente.</span><span class="sxs-lookup"><span data-stu-id="26e22-107">To be able to unload the workflow instance when it becomes idle, the service host must persist the workflow instance.</span></span> <span data-ttu-id="26e22-108">Questa operazione è possibile solo se l'istanza del flusso di lavoro non si trova in un'area di non persistenza, ad esempio in attesa di un callback asincrono o del completamento di una transazione.</span><span class="sxs-lookup"><span data-stu-id="26e22-108">This is possible only if the workflow instance is not in a no-persist zone (for example, waiting for a transaction to complete, or waiting for an asynchronous callback).</span></span> <span data-ttu-id="26e22-109">Per consentire a un'istanza del flusso di lavoro inattiva di essere scaricata, l'autore del flusso di lavoro deve usare ambiti di transazione e attività asincrone solo per azioni di breve durata.</span><span class="sxs-lookup"><span data-stu-id="26e22-109">To allow an idle workflow instance to unload, the workflow author should use transaction scopes and asynchronous activities for short-lived actions only.</span></span> <span data-ttu-id="26e22-110">In particolare, le attività di ritardo all'interno di tali aree di non persistenza devono essere le più brevi possibili.</span><span class="sxs-lookup"><span data-stu-id="26e22-110">In particular, the author should keep delay activities within these no-persist zones as short as possible.</span></span>  
  
 <span data-ttu-id="26e22-111">Un flusso di lavoro può essere reso persistente solo se tutti i tipi di dati usati sono serializzabili.</span><span class="sxs-lookup"><span data-stu-id="26e22-111">A workflow can only be persisted if all of the data types used by the workflow are serializable.</span></span> <span data-ttu-id="26e22-112">I tipi personalizzati usati in flussi di lavoro persistenti, inoltre, devono essere serializzabili tramite <xref:System.Runtime.Serialization.NetDataContractSerializer> per essere resi persistenti da <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>.</span><span class="sxs-lookup"><span data-stu-id="26e22-112">In addition, custom types used in persisted workflows must be serializable with <xref:System.Runtime.Serialization.NetDataContractSerializer> in order to be persisted by <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>.</span></span>  
  
 <span data-ttu-id="26e22-113">Se un'istanza del flusso di lavoro non è stata resa persistente, non è possibile recuperarla in caso in cui si verifichi un errore nell'host o nel computer.</span><span class="sxs-lookup"><span data-stu-id="26e22-113">A workflow instance cannot be recovered in case of a host or computer failure if it has not been persisted.</span></span> <span data-ttu-id="26e22-114">In generale, si consiglia di rendere subito persistente un'istanza del flusso di lavoro nel relativo ciclo di vita.</span><span class="sxs-lookup"><span data-stu-id="26e22-114">In general, we recommend that you persist a workflow instance early in the workflow’s life cycle.</span></span>  
  
 <span data-ttu-id="26e22-115">Se il flusso di lavoro è occupato per un periodo di tempo prolungato, si consiglia di rendere persistente la relativa istanza regolarmente durante tutto il periodo.</span><span class="sxs-lookup"><span data-stu-id="26e22-115">If your workflow is busy for a long time, we recommend that you persist the workflow instance regularly throughout its busy period.</span></span> <span data-ttu-id="26e22-116">A tale scopo, aggiungere le attività <xref:System.Activities.Statements.Persist> durante tutta la sequenza di operazioni che tengono occupata l'istanza del flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="26e22-116">You can do this by adding <xref:System.Activities.Statements.Persist> activities throughout the sequence of activities that keep the workflow instance busy.</span></span> <span data-ttu-id="26e22-117">In questo modo il riciclo del dominio applicazione o eventuali errori nell'host o nel computer non provocano l'esecuzione del rollback del sistema all'inizio del periodo in cui il flusso di lavoro è occupato.</span><span class="sxs-lookup"><span data-stu-id="26e22-117">In this manner, application domain recycling, host failures, or computer failures do not cause the system to be rolled back to the start of the busy period.</span></span> <span data-ttu-id="26e22-118">Tenere presente che l'aggiunta di attività <xref:System.Activities.Statements.Persist> al flusso di lavoro potrebbe provocare una riduzione delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="26e22-118">Be aware that adding <xref:System.Activities.Statements.Persist> activities to your workflow could lead to a degradation of performance.</span></span>  
  
 <span data-ttu-id="26e22-119">Windows Server AppFabric consente di semplificare notevolmente la configurazione e l'uso della persistenza.</span><span class="sxs-lookup"><span data-stu-id="26e22-119">Windows Server App Fabric greatly simplifies the configuration and use of persistence.</span></span> <span data-ttu-id="26e22-120">Per altre informazioni, vedere [persistenza di Windows Server](https://docs.microsoft.com/previous-versions/appfabric/ee677272(v=azure.10)) AppFabric</span><span class="sxs-lookup"><span data-stu-id="26e22-120">For more information, see [Windows Server App Fabric Persistence](https://docs.microsoft.com/previous-versions/appfabric/ee677272(v=azure.10))</span></span>  
  
## <a name="configuration-of-scalability-parameters"></a><span data-ttu-id="26e22-121">Configurazione dei parametri di scalabilità</span><span class="sxs-lookup"><span data-stu-id="26e22-121">Configuration of Scalability Parameters</span></span>  
 <span data-ttu-id="26e22-122">I requisiti relativi alla scalabilità e alle prestazione determinano le impostazioni dei parametri seguenti:</span><span class="sxs-lookup"><span data-stu-id="26e22-122">Scalability and performance requirements determine the settings of the following parameters:</span></span>  
  
- <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToPersist%2A>  
  
- <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A>  
  
- <xref:System.ServiceModel.Activities.Description.SqlWorkflowInstanceStoreBehavior.InstanceLockedExceptionAction%2A>  
  
 <span data-ttu-id="26e22-123">In base allo scenario corrente, tali parametri dovrebbero essere impostati nel modo indicato di seguito.</span><span class="sxs-lookup"><span data-stu-id="26e22-123">These parameters should be set as follows, according to the current scenario.</span></span>  
  
### <a name="scenario-a-small-number-of-workflow-instances-that-require-optimal-response-time"></a><span data-ttu-id="26e22-124">Scenario: presenza di un numero ridotto di istanze del flusso di lavoro che richiedono un tempo di risposta ottimale</span><span class="sxs-lookup"><span data-stu-id="26e22-124">Scenario: A Small Number of Workflow Instances That Require Optimal Response Time</span></span>  
 <span data-ttu-id="26e22-125">In questo scenario tutte le istanze del flusso di lavoro devono rimanere caricate quando diventano inattive.</span><span class="sxs-lookup"><span data-stu-id="26e22-125">In this scenario, all workflow instances should remain loaded when they become idle.</span></span> <span data-ttu-id="26e22-126">Impostare <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> su un valore elevato.</span><span class="sxs-lookup"><span data-stu-id="26e22-126">Set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> to a large value.</span></span> <span data-ttu-id="26e22-127">Questa impostazione consente di impedire che un'istanza del flusso di lavoro si sposti tra computer.</span><span class="sxs-lookup"><span data-stu-id="26e22-127">The use of this setting prevents a workflow instance from moving between computers.</span></span> <span data-ttu-id="26e22-128">Usare questa impostazione solo se si verifica una o più delle condizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="26e22-128">Use this setting only if one or more of the following are true:</span></span>  
  
- <span data-ttu-id="26e22-129">Un'istanza del flusso del lavoro riceve un unico messaggio in tutta la durata.</span><span class="sxs-lookup"><span data-stu-id="26e22-129">A workflow instance receives a single message throughout its lifetime.</span></span>  
  
- <span data-ttu-id="26e22-130">Tutte le istanze del flusso di lavoro vengono eseguite in un unico computer.</span><span class="sxs-lookup"><span data-stu-id="26e22-130">All workflow instances run on a single computer</span></span>  
  
- <span data-ttu-id="26e22-131">Tutti i messaggi ricevuti da un'istanza del flusso di lavoro vengono recapitati nello stesso computer.</span><span class="sxs-lookup"><span data-stu-id="26e22-131">All messages that are received by a workflow instance are received by the same computer.</span></span>  
  
 <span data-ttu-id="26e22-132">Usare attività <xref:System.Activities.Statements.Persist> o impostare <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToPersist%2A> su 0 per abilitare il recupero dell'istanza del flusso di lavoro dopo eventuali errori dell'host del servizio o del computer.</span><span class="sxs-lookup"><span data-stu-id="26e22-132">Use <xref:System.Activities.Statements.Persist> activities or set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToPersist%2A> to 0 to enable recovery of your workflow instance after service host or computer failures.</span></span>  
  
### <a name="scenario-workflow-instances-are-idle-for-long-periods-of-time"></a><span data-ttu-id="26e22-133">Scenario: inattività delle istanze del flusso di lavoro per periodi di tempo prolungati</span><span class="sxs-lookup"><span data-stu-id="26e22-133">Scenario: Workflow Instances Are Idle for Long Periods of Time</span></span>  
 <span data-ttu-id="26e22-134">In questo scenario impostare <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> su 0 per rilasciare le risorse il prima possibile.</span><span class="sxs-lookup"><span data-stu-id="26e22-134">In this scenario, set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> to 0 to release resources as soon as possible.</span></span>  
  
### <a name="scenario-workflow-instances-receive-multiple-messages-in-a-short-period-of-time"></a><span data-ttu-id="26e22-135">Scenario: le istanze del flusso di lavoro ricevono più messaggi in un breve periodo di tempo</span><span class="sxs-lookup"><span data-stu-id="26e22-135">Scenario: Workflow Instances Receive Multiple Messages in a Short Period of Time</span></span>  
 <span data-ttu-id="26e22-136">In questo scenario impostare <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> su 60 secondi se i messaggi vengono ricevuti dallo stesso computer.</span><span class="sxs-lookup"><span data-stu-id="26e22-136">In this scenario, set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> to 60 seconds if these messages are received by the same computer.</span></span> <span data-ttu-id="26e22-137">In questo modo si impedisce che un'istanza del flusso di lavoro venga scaricata e caricata rapidamente</span><span class="sxs-lookup"><span data-stu-id="26e22-137">This prevents a rapid sequence of unloading and loading of a workflow instance.</span></span> <span data-ttu-id="26e22-138">e che l'istanza rimanga in memoria per un periodo di tempo eccessivo.</span><span class="sxs-lookup"><span data-stu-id="26e22-138">This also does not keep the instance in memory for too long.</span></span>  
  
 <span data-ttu-id="26e22-139">Impostare <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> su 0 e <xref:System.ServiceModel.Activities.Description.SqlWorkflowInstanceStoreBehavior.InstanceLockedExceptionAction%2A> su BasicRetry o AggressiveRetry se tali messaggi possono essere ricevuti da computer diversi.</span><span class="sxs-lookup"><span data-stu-id="26e22-139">Set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> to 0, and set <xref:System.ServiceModel.Activities.Description.SqlWorkflowInstanceStoreBehavior.InstanceLockedExceptionAction%2A> to BasicRetry or AggressiveRetry if these messages may be received by different computers.</span></span> <span data-ttu-id="26e22-140">In questo modo l'istanza del flusso di lavoro può essere caricata da un altro computer.</span><span class="sxs-lookup"><span data-stu-id="26e22-140">This allows the workflow instance to be loaded by another computer.</span></span>  
  
### <a name="scenario-workflow-uses-delay-activities-with-short-durations"></a><span data-ttu-id="26e22-141">Scenario: il flusso di lavoro usa le attività di ritardo con durate brevi</span><span class="sxs-lookup"><span data-stu-id="26e22-141">Scenario: Workflow Uses Delay Activities with Short Durations</span></span>  
 <span data-ttu-id="26e22-142">In questo scenario <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> esegue regolarmente il polling sul database di persistenza per istanze che devono essere caricate a causa di un'attività <xref:System.Activities.Statements.Delay> scaduta.</span><span class="sxs-lookup"><span data-stu-id="26e22-142">In this scenario, the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> regularly polls the persistence database for instances that should be loaded because of an expired <xref:System.Activities.Statements.Delay> activity.</span></span> <span data-ttu-id="26e22-143">Se <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> trova un timer che scadrà nell'intervallo di polling successivo, l'archivio di istanze del flusso di lavoro SQL riduce l'intervallo di polling.</span><span class="sxs-lookup"><span data-stu-id="26e22-143">If the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> finds a timer that will expire in the next polling interval, the SQL Workflow Instance Store shortens the polling interval.</span></span> <span data-ttu-id="26e22-144">Il polling successivo verrà eseguito subito dopo la scadenza del timer.</span><span class="sxs-lookup"><span data-stu-id="26e22-144">The next poll will then occur right after the timer has expired.</span></span> <span data-ttu-id="26e22-145">In questo modo si ottiene un'elevata precisione per i timer in esecuzione da più tempo rispetto all'intervallo di polling, impostato da <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>.</span><span class="sxs-lookup"><span data-stu-id="26e22-145">This way, the SQL Workflow Instance Store achieves a high accuracy of timers that run longer than the polling interval, which is set by <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>.</span></span> <span data-ttu-id="26e22-146">Per abilitare un'elaborazione corretta di ritardi più brevi, l'istanza del flusso di lavoro deve rimanere in memoria almeno per la durata di un intervallo di polling.</span><span class="sxs-lookup"><span data-stu-id="26e22-146">To enable timely processing of shorter delays, the workflow instance must remain in memory for at least one polling interval.</span></span>  
  
 <span data-ttu-id="26e22-147">Impostare <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToPersist%2A> su 0 per scrivere la scadenza nel database di persistenza.</span><span class="sxs-lookup"><span data-stu-id="26e22-147">Set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToPersist%2A> to 0 to write the expiration time to the persistence database.</span></span>  
  
 <span data-ttu-id="26e22-148">Impostare <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> su un valore maggiore o uguale a <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> per mantenere l'istanza in memoria almeno per la durata di un intervallo di polling.</span><span class="sxs-lookup"><span data-stu-id="26e22-148">Set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> to longer than or equal to <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> to keep the instance in memory for at least one polling interval.</span></span>  
  
 <span data-ttu-id="26e22-149">Si consiglia di non ridurre il valore di <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> per non aumentare il carico sul database di persistenza.</span><span class="sxs-lookup"><span data-stu-id="26e22-149">We do not recommend reducing the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> because this leads to an increased load on the persistence database.</span></span> <span data-ttu-id="26e22-150">Ogni host del servizio che usa <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> esegue il polling sul database una volta per periodo del rilevamento.</span><span class="sxs-lookup"><span data-stu-id="26e22-150">Each service host that uses the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> polls the database one time per detection period.</span></span> <span data-ttu-id="26e22-151">Se si imposta <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> su un intervallo di tempo troppo breve, le prestazioni del sistema potrebbero diminuire nel caso in cui il numero di host del servizio sia elevato.</span><span class="sxs-lookup"><span data-stu-id="26e22-151">Setting <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> to too small a time interval may cause your system's performance to decrease if the number of service hosts is large.</span></span>  
  
## <a name="configuring-the-sql-workflow-instance-store"></a><span data-ttu-id="26e22-152">Configurazione dell'archivio di istanze del flusso di lavoro SQL</span><span class="sxs-lookup"><span data-stu-id="26e22-152">Configuring the SQL Workflow Instance Store</span></span>  
 <span data-ttu-id="26e22-153">All'archivio di istanze del flusso di lavoro SQL sono associati i parametri di configurazione seguenti:</span><span class="sxs-lookup"><span data-stu-id="26e22-153">The SQL Workflow Instance Store has the following configuration parameters:</span></span>  
  
 <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceEncodingOption%2A>  
 <span data-ttu-id="26e22-154">Questo parametro indica a <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> di comprimere lo stato dell'istanza del flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="26e22-154">This parameter instructs the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> to compress the workflow instance state.</span></span> <span data-ttu-id="26e22-155">La compressione consente di ridurre la quantità di dati archiviata nel database di persistenza e di diminuire il traffico di rete nel caso in cui il database di persistenza si trovi in un server database dedicato.</span><span class="sxs-lookup"><span data-stu-id="26e22-155">Compression reduces the amount of data that is stored in the persistence database and reduces network traffic in case the persistence database resides on a dedicated database server.</span></span> <span data-ttu-id="26e22-156">Se usata, la compressione richiede risorse computazionali per comprimere ed estrarre lo stato dell'istanza.</span><span class="sxs-lookup"><span data-stu-id="26e22-156">If compression is used, it requires computational resources to compress and extract the instance state.</span></span> <span data-ttu-id="26e22-157">Nella maggior parte dei casi la compressione consente di aumentare le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="26e22-157">In most cases, compression yields increased performance.</span></span>  
  
 <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceCompletionAction%2A>  
 <span data-ttu-id="26e22-158">Questo parametro indica a <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> di mantenere o eliminare istanze completate.</span><span class="sxs-lookup"><span data-stu-id="26e22-158">This parameter instructs the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> to either keep or delete completed instances.</span></span> <span data-ttu-id="26e22-159">Se le istanze completate non vengono eliminate, i requisiti di archiviazione del database di persistenza e la dimensione delle tabelle aumentano, con un conseguente incremento dei tempi di ricerca.</span><span class="sxs-lookup"><span data-stu-id="26e22-159">Keeping completed instances increases the persistence database storage requirements and leads to larger tables, which increases table lookup times.</span></span> <span data-ttu-id="26e22-160">È consigliabile pertanto indicare a <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> di eliminare le istanze completate, a meno che queste ultime non siano necessarie per l'esecuzione di attività di debug o di controllo.</span><span class="sxs-lookup"><span data-stu-id="26e22-160">Unless completed instances are required for debugging or auditing, it is best to instruct the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> to delete completed instances.</span></span> <span data-ttu-id="26e22-161">Le istanze eliminate devono essere mantenute solo se l'utente definisce un processo per l'eventuale rimozione.</span><span class="sxs-lookup"><span data-stu-id="26e22-161">Deleted instances should be kept only if the user establishes a process for eventually removing them.</span></span> <span data-ttu-id="26e22-162">Si noti che non è possibile riutilizzare chiavi di correlazione fino a quando l'istanza del flusso di lavoro completata è presente nell'archivio di istanze.</span><span class="sxs-lookup"><span data-stu-id="26e22-162">Note that correlation keys cannot be reused as long as the completed workflow instance resides in the instance store.</span></span>  
  
 <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>  
 <span data-ttu-id="26e22-163">Questo parametro definisce l'intervallo massimo in base al quale <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> esegue il polling sul database di persistenza per istanze che devono essere caricate quando un'attività <xref:System.Activities.Statements.Delay> scade.</span><span class="sxs-lookup"><span data-stu-id="26e22-163">This parameter defines the maximum interval with which the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> polls the persistence database for instances that should be loaded when a <xref:System.Activities.Statements.Delay> activity expires.</span></span> <span data-ttu-id="26e22-164">Se <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> trova un timer che scadrà nell'intervallo di polling successivo, l'intervallo di polling verrà ridotto in modo che il polling successivo venga eseguito subito dopo la scadenza del timer.</span><span class="sxs-lookup"><span data-stu-id="26e22-164">If the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> finds a timer that will expire in the next polling interval, it shortens the polling interval so that the next poll will occur right after the timer has expired.</span></span> <span data-ttu-id="26e22-165">In questo modo si ottiene un'elevata precisione per i timer in esecuzione da più tempo rispetto a <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>.</span><span class="sxs-lookup"><span data-stu-id="26e22-165">This way, the SQL Workflow Instance Store achieves a high accuracy of timers that run longer than <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>.</span></span>  
  
 <span data-ttu-id="26e22-166">Si consiglia di non ridurre il valore di <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> per non aumentare il carico sul database di persistenza.</span><span class="sxs-lookup"><span data-stu-id="26e22-166">We do not recommend reducing the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>, because this leads to an increased load on the persistence database.</span></span> <span data-ttu-id="26e22-167">Ogni host del servizio che usa <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> esegue il polling sul database una volta per periodo del rilevamento.</span><span class="sxs-lookup"><span data-stu-id="26e22-167">Each service host that uses the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> polls the database one time per detection period.</span></span> <span data-ttu-id="26e22-168">Se si imposta <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> su un intervallo di tempo troppo breve, le prestazioni del sistema potrebbero diminuire nel caso in cui il numero di host del servizio sia elevato.</span><span class="sxs-lookup"><span data-stu-id="26e22-168">Setting <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> to too small an interval may cause your system's performance to decrease if the number of service hosts is large.</span></span>  
  
 <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.HostLockRenewalPeriod%2A>  
 <span data-ttu-id="26e22-169">Questo parametro definisce l'intervallo in base al l'host rinnova il blocco nel database di persistenza.</span><span class="sxs-lookup"><span data-stu-id="26e22-169">This parameter defines the interval with which the host renews its lock in the persistence database.</span></span> <span data-ttu-id="26e22-170">La riduzione dell'intervallo consentirà un recupero più rapido delle istanze del flusso di lavoro in caso di errore dell'host o del computer.</span><span class="sxs-lookup"><span data-stu-id="26e22-170">Shortening this interval will enable a quicker recovery of the workflow instances in case a host or computer fails.</span></span> <span data-ttu-id="26e22-171">Un periodo di rinnovo del blocco più breve, tuttavia, provoca l'aumento del carico sul database di persistenza.</span><span class="sxs-lookup"><span data-stu-id="26e22-171">On the other hand, a short lock renewal period increases the load on the persistence database.</span></span> <span data-ttu-id="26e22-172">Ogni host del servizio che usa <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> aggiornerà i blocchi nel database una volta per periodo di rinnovo.</span><span class="sxs-lookup"><span data-stu-id="26e22-172">Each service host that uses the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> will update its locks in the database one time per renewal period.</span></span> <span data-ttu-id="26e22-173">Se in un computer sono in esecuzione numerosi host del servizio, verificare che il carico causato dal rinnovo del blocco non diminuisca le prestazioni del sistema.</span><span class="sxs-lookup"><span data-stu-id="26e22-173">If a computer runs many service hosts, make sure that the load caused by lock renewal does not decrease your system's performance.</span></span> <span data-ttu-id="26e22-174">Se questo accade, provare ad aumentare il valore di <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.HostLockRenewalPeriod%2A>.</span><span class="sxs-lookup"><span data-stu-id="26e22-174">If it does, consider increasing the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.HostLockRenewalPeriod%2A>.</span></span>  
  
 <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceLockedExceptionAction%2A>  
 <span data-ttu-id="26e22-175">Se abilitato, <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> tenta nuovamente di caricare un'istanza bloccata per i successivi 30 secondi.</span><span class="sxs-lookup"><span data-stu-id="26e22-175">If enabled, the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> retries to load a locked instance for the next 30 seconds.</span></span> <span data-ttu-id="26e22-176">Impostare <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceLockedExceptionAction%2A> su BasicRetry o AggressiveRetry se il flusso di lavoro riceve più messaggi in un breve periodo di tempo e tali messaggi vengono recapitati in computer diversi.</span><span class="sxs-lookup"><span data-stu-id="26e22-176">Set <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceLockedExceptionAction%2A> to BasicRetry or AggressiveRetry if the workflow receives multiple messages in a short time, and these messages are received by different computers.</span></span>  
  
 <span data-ttu-id="26e22-177">Poiché il meccanismo di ricaricamento non introduce alcun sovraccarico nelle prestazioni finché l'operazione non viene tentata, è necessario abilitare sempre <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceLockedExceptionAction%2A>.</span><span class="sxs-lookup"><span data-stu-id="26e22-177">Because the load retry mechanism does not introduce any performance overhead as long as load retries are not tried, <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceLockedExceptionAction%2A> should always be enabled.</span></span>

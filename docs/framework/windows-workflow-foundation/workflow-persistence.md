---
title: Persistenza flusso di lavoro
ms.date: 03/30/2017
helpviewer_keywords:
- programming [WF], persistence
ms.assetid: 39e69d1f-b771-4c16-9e18-696fa43b65b2
ms.openlocfilehash: c49e287c6132103d4bb85a8ae892a76f9b582274
ms.sourcegitcommit: a4f9b754059f0210e29ae0578363a27b9ba84b64
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 12/05/2019
ms.locfileid: "74837532"
---
# <a name="workflow-persistence"></a><span data-ttu-id="a43d9-102">Persistenza flusso di lavoro</span><span class="sxs-lookup"><span data-stu-id="a43d9-102">Workflow Persistence</span></span>
<span data-ttu-id="a43d9-103">La persistenza del flusso di lavoro è l'acquisizione durevole di uno stato di un'istanza del flusso di lavoro, indipendentemente dalle informazioni relative al processo o al computer.</span><span class="sxs-lookup"><span data-stu-id="a43d9-103">Workflow persistence is the durable capture of a workflow instance's state, independent of process or computer information.</span></span> <span data-ttu-id="a43d9-104">In questo modo viene fornito un punto noto di ripristino dell'istanza del flusso di lavoro in caso di errore di sistema o viene conservata memoria scaricando istanze del flusso di lavoro il cui funzionamento non viene eseguito in modo attivo o ancora viene spostato lo stato dell'istanza del flusso di lavoro da un nodo a un altro in una server farm.</span><span class="sxs-lookup"><span data-stu-id="a43d9-104">This is done to provide a well-known point of recovery for the workflow instance in the event of system failure, or to preserve memory by unloading workflow instances that are not actively doing work, or to move the state of the workflow instance from one node to another node in a server farm.</span></span>  
  
 <span data-ttu-id="a43d9-105">La persistenza abilita agilità di processo, scalabilità, ripristino nonostante errori e la possibilità di gestire la memoria in modo più efficiente.</span><span class="sxs-lookup"><span data-stu-id="a43d9-105">Persistence enables process agility, scalability, recovery in the face of failure, and the ability to manage memory more efficiently.</span></span> <span data-ttu-id="a43d9-106">Il processo di persistenza include l'identificazione di un punto di persistenza, la raccolta dei dati da salvare e infine la delega dell'archiviazione effettiva dei dati a un provider di persistenza.</span><span class="sxs-lookup"><span data-stu-id="a43d9-106">The persistence process includes the identification of a persistence point, the gathering of the data to be saved, and finally the delegation of the actual storage of the data to a persistence provider.</span></span>  
  
 <span data-ttu-id="a43d9-107">Per abilitare la persistenza per un flusso di lavoro, è necessario associare un archivio di istanze a **WorkflowApplication** o **WorkflowServiceHost** come indicato in [procedura: abilitare la persistenza per i flussi di lavoro e i servizi flusso di lavoro](how-to-enable-persistence-for-workflows-and-workflow-services.md).</span><span class="sxs-lookup"><span data-stu-id="a43d9-107">To enable persistence for a workflow, you need to associate an instance store with the **WorkflowApplication** or **WorkflowServiceHost** as mentioned in [How to: Enable Persistence for Workflows and Workflow Services](how-to-enable-persistence-for-workflows-and-workflow-services.md).</span></span> <span data-ttu-id="a43d9-108">**WorkflowApplication** e **WorkflowServiceHost** utilizzano l'archivio di istanze associato per consentire la persistenza delle istanze del flusso di lavoro in un archivio di persistenza e il caricamento di istanze del flusso di lavoro in memoria basate sui dati dell'istanza del flusso di lavoro archiviati nell'archivio di persistenza.</span><span class="sxs-lookup"><span data-stu-id="a43d9-108">The **WorkflowApplication** and **WorkflowServiceHost** use the instance store associated with them to enable persisting workflow instances into a persistence store and loading workflow instances into memory based on the workflow instance data stored in the persistence store.</span></span>  
  
 <span data-ttu-id="a43d9-109">Il [!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] viene fornito con la classe **SqlWorkflowInstanceStore** , che consente la persistenza dei dati e dei metadati relativi alle istanze del flusso di lavoro in un database SQL Server 2005 o SQL Server 2008.</span><span class="sxs-lookup"><span data-stu-id="a43d9-109">The [!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] ships with the **SqlWorkflowInstanceStore** class, which allows persistence of data and metadata about workflow instances into a SQL Server 2005 or SQL Server 2008 database.</span></span> <span data-ttu-id="a43d9-110">Per ulteriori informazioni, vedere l' [Archivio di istanze del flusso di lavoro SQL](sql-workflow-instance-store.md) .</span><span class="sxs-lookup"><span data-stu-id="a43d9-110">See [SQL Workflow Instance Store](sql-workflow-instance-store.md) for more details.</span></span>  
  
 <span data-ttu-id="a43d9-111">Per archiviare e caricare i dati specifici dell'applicazione insieme alle informazioni correlate all'istanza del flusso di lavoro, è possibile creare partecipanti di persistenza che estendono la classe <xref:System.Activities.Persistence.PersistenceParticipant>.</span><span class="sxs-lookup"><span data-stu-id="a43d9-111">To store and load your application-specific data along with the workflow instance-related information, you can create persistence participants that extend the <xref:System.Activities.Persistence.PersistenceParticipant> class.</span></span> <span data-ttu-id="a43d9-112">Un partecipante di persistenza fa parte del processo di persistenza per salvare dati serializzabili personalizzati nell'archivio di persistenza, per caricare i dati dall'archivio di istanze in memoria ed eseguire qualsiasi logica aggiuntiva in una transazione di persistenza.</span><span class="sxs-lookup"><span data-stu-id="a43d9-112">A persistence participant participates in the persistence process to save custom serializable data into the persistence store, to load the data from the instance store into memory, and to perform any additional logic under a persistence transaction.</span></span> <span data-ttu-id="a43d9-113">Per ulteriori informazioni, vedere [partecipanti di persistenza](persistence-participants.md).</span><span class="sxs-lookup"><span data-stu-id="a43d9-113">For more information, see [Persistence Participants](persistence-participants.md).</span></span>  
  
 <span data-ttu-id="a43d9-114">Windows Server AppFabric semplifica il processo di configurazione della persistenza.</span><span class="sxs-lookup"><span data-stu-id="a43d9-114">Windows Server App Fabric simplifies the process of configuring persistence.</span></span> <span data-ttu-id="a43d9-115">Per altre informazioni, vedere [concetti relativi alla persistenza con Windows Server](https://docs.microsoft.com/previous-versions/appfabric/ee677272(v=azure.10)) AppFabric</span><span class="sxs-lookup"><span data-stu-id="a43d9-115">For more information, see [Persistence Concepts with Windows Server App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677272(v=azure.10))</span></span>  
  
## <a name="implicit-persistence-points"></a><span data-ttu-id="a43d9-116">Punti di persistenza impliciti</span><span class="sxs-lookup"><span data-stu-id="a43d9-116">Implicit Persistence Points</span></span>  
 <span data-ttu-id="a43d9-117">Nell'elenco seguente sono contenuti esempi di condizioni in base alle quali un flusso di lavoro viene reso persistente quando un archivio di istanze è associato a un flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="a43d9-117">The following list contains examples of the conditions upon which a workflow is persisted when an instance store is associated with a workflow.</span></span>  
  
- <span data-ttu-id="a43d9-118">Quando un'attività **TransactionScope** viene completata o viene completata un'attività **TransactedReceiveScope** .</span><span class="sxs-lookup"><span data-stu-id="a43d9-118">When a **TransactionScope** activity completes or a **TransactedReceiveScope** activity completes.</span></span>  
  
- <span data-ttu-id="a43d9-119">Quando un'istanza del flusso di lavoro diventa inattiva e **WorkflowIdleBehavior** viene impostato sull'host del flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="a43d9-119">When a workflow instance becomes idle and the **WorkflowIdleBehavior** is set on workflow host.</span></span> <span data-ttu-id="a43d9-120">Questa situazione si verifica, ad esempio, quando si usano attività di messaggistica o un'attività di **ritardo** .</span><span class="sxs-lookup"><span data-stu-id="a43d9-120">This occurs, for example, when you use messaging activities or a **Delay** activity.</span></span>  
  
- <span data-ttu-id="a43d9-121">Quando un WorkflowApplication diventa inattivo e la proprietà **PersistableIdle** dell'applicazione è impostata su **PersistableIdleAction. perseverare**.</span><span class="sxs-lookup"><span data-stu-id="a43d9-121">When a WorkflowApplication becomes idle and the **PersistableIdle** property of the application is set to **PersistableIdleAction.Persist**.</span></span>  
  
- <span data-ttu-id="a43d9-122">Quando a un'applicazione host viene richiesto di rendere persistente o scaricare un'istanza del flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="a43d9-122">When a host application is instructed to persist or unload a workflow instance.</span></span>  
  
- <span data-ttu-id="a43d9-123">Quando un'istanza del flusso di lavoro viene terminata o termina.</span><span class="sxs-lookup"><span data-stu-id="a43d9-123">When a workflow instance is terminated or finishes.</span></span>  
  
- <span data-ttu-id="a43d9-124">Quando viene eseguita un'attività di **salvataggio permanente** .</span><span class="sxs-lookup"><span data-stu-id="a43d9-124">When a **Persist** activity executes.</span></span>  
  
- <span data-ttu-id="a43d9-125">Quando un'istanza di un flusso di lavoro sviluppata usando una versione precedente di Windows Workflow Foundation incontra un punto di persistenza durante l'esecuzione interoperativa.</span><span class="sxs-lookup"><span data-stu-id="a43d9-125">When an instance of a workflow developed using a previous version of Windows Workflow Foundation encounters a persistence point during interoperable execution.</span></span>  
  
## <a name="in-this-section"></a><span data-ttu-id="a43d9-126">Contenuto della sezione</span><span class="sxs-lookup"><span data-stu-id="a43d9-126">In This Section</span></span>  
  
- [<span data-ttu-id="a43d9-127">Archivio di istanze del flusso di lavoro SQL</span><span class="sxs-lookup"><span data-stu-id="a43d9-127">SQL Workflow Instance Store</span></span>](sql-workflow-instance-store.md)  
  
- [<span data-ttu-id="a43d9-128">Archivi di istanze</span><span class="sxs-lookup"><span data-stu-id="a43d9-128">Instance Stores</span></span>](instance-stores.md)  
  
- [<span data-ttu-id="a43d9-129">Partecipanti di persistenza</span><span class="sxs-lookup"><span data-stu-id="a43d9-129">Persistence Participants</span></span>](persistence-participants.md)  
  
- [<span data-ttu-id="a43d9-130">Procedure consigliate per la persistenza</span><span class="sxs-lookup"><span data-stu-id="a43d9-130">Persistence Best Practices</span></span>](persistence-best-practices.md)  
  
- [<span data-ttu-id="a43d9-131">Istanze del flusso di lavoro non persistenti</span><span class="sxs-lookup"><span data-stu-id="a43d9-131">Non-Persisted Workflow Instances</span></span>](non-persisted-workflow-instances.md)  
  
- [<span data-ttu-id="a43d9-132">Sospensione e ripresa di un flusso di lavoro</span><span class="sxs-lookup"><span data-stu-id="a43d9-132">Pausing and Resuming a Workflow</span></span>](pausing-and-resuming-a-workflow.md)

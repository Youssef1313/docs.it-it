---
title: Come il runtime individua gli assembly
ms.date: 03/30/2017
helpviewer_keywords:
- app.config files, assembly locations
- deploying applications [.NET Framework], assembly locations
- application configuration files, locating assemblies
- .NET Framework application deployment, locating assemblies
- locating assemblies
- assemblies [.NET Framework], location
ms.assetid: 772ac6f4-64d2-4cfb-92fd-58096dcd6c34
author: mairaw
ms.author: mairaw
ms.openlocfilehash: 2ddec748dc400418c21bfa8fab6fd2735d74af6d
ms.sourcegitcommit: 68653db98c5ea7744fd438710248935f70020dfb
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 08/22/2019
ms.locfileid: "69941791"
---
# <a name="how-the-runtime-locates-assemblies"></a><span data-ttu-id="cd8a5-102">Come il runtime individua gli assembly</span><span class="sxs-lookup"><span data-stu-id="cd8a5-102">How the Runtime Locates Assemblies</span></span>
<span data-ttu-id="cd8a5-103">Per distribuire correttamente l'applicazione .NET Framework, è necessario comprendere in che modo Common Language Runtime individua e associa gli assembly che costituiscono l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-103">To successfully deploy your .NET Framework application, you must understand how the common language runtime locates and binds to the assemblies that make up your application.</span></span> <span data-ttu-id="cd8a5-104">Per impostazione predefinita, il runtime tenta di eseguire l'associazione con la versione esatta di un assembly con cui è stata compilata l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-104">By default, the runtime attempts to bind with the exact version of an assembly that the application was built with.</span></span> <span data-ttu-id="cd8a5-105">Questo comportamento predefinito può essere sottoposto a override dalle impostazioni del file di configurazione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-105">This default behavior can be overridden by configuration file settings.</span></span>  
  
 <span data-ttu-id="cd8a5-106">Quando si tenta di individuare un assembly e risolvere un riferimento ad assembly, Common Language Runtime esegue una serie di passaggi.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-106">The common language runtime performs a number of steps when attempting to locate an assembly and resolve an assembly reference.</span></span> <span data-ttu-id="cd8a5-107">Ogni passaggio è descritto nelle sezioni seguenti.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-107">Each step is explained in the following sections.</span></span> <span data-ttu-id="cd8a5-108">Il termine "individuazione tramite probe" viene usato quando si descrive la modalità di individuazione degli assembly mediante runtime e fa riferimento al set di euristiche usato per individuare l'assembly in base al nome e alle impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-108">The term probing is often used when describing how the runtime locates assemblies; it refers to the set of heuristics used to locate the assembly based on its name and culture.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="cd8a5-109">Per visualizzare le informazioni di associazione nel file di log, usare il [Visualizzatore log associazioni assembly (Fuslogvw.exe)](../../../docs/framework/tools/fuslogvw-exe-assembly-binding-log-viewer.md), incluso in Windows SDK.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-109">You can view binding information in the log file using the [Assembly Binding Log Viewer (Fuslogvw.exe)](../../../docs/framework/tools/fuslogvw-exe-assembly-binding-log-viewer.md), which is included in the Windows SDK.</span></span>  
  
## <a name="initiating-the-bind"></a><span data-ttu-id="cd8a5-110">Avvio dell'associazione</span><span class="sxs-lookup"><span data-stu-id="cd8a5-110">Initiating the Bind</span></span>  
 <span data-ttu-id="cd8a5-111">Il processo di individuazione e associazione di un assembly inizia quando il runtime tenta di risolvere un riferimento a un altro assembly.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-111">The process of locating and binding to an assembly begins when the runtime attempts to resolve a reference to another assembly.</span></span> <span data-ttu-id="cd8a5-112">Questo riferimento può essere statico o dinamico.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-112">This reference can be either static or dynamic.</span></span> <span data-ttu-id="cd8a5-113">I compilatore registra i riferimenti statici nei metadati del manifesto dell'assembly in fase di compilazione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-113">The compiler records static references in the assembly manifest's metadata at build time.</span></span> <span data-ttu-id="cd8a5-114">I riferimenti dinamici vengono costruiti nel momento in cui vengono chiamati i diversi metodi, ad esempio <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-114">Dynamic references are constructed on the fly as a result of calling various methods, such as <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>.</span></span>  
  
 <span data-ttu-id="cd8a5-115">Il modo migliore per fare riferimento a un assembly consiste nell'usare un riferimento completo che includa il nome dell'assembly, la versione, le impostazioni cultura il e token di chiave pubblica (se presente).</span><span class="sxs-lookup"><span data-stu-id="cd8a5-115">The preferred way to reference an assembly is to use a full reference, including the assembly name, version, culture, and public key token (if one exists).</span></span> <span data-ttu-id="cd8a5-116">Il runtime usa queste informazioni per individuare l'assembly, seguendo i passaggi descritti più avanti in questa sezione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-116">The runtime uses this information to locate the assembly, following the steps described later in this section.</span></span> <span data-ttu-id="cd8a5-117">Il runtime usa lo stesso processo di risoluzione a prescindere che il riferimento riguardi un assembly statico o dinamico.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-117">The runtime uses the same resolution process regardless of whether the reference is for a static or dynamic assembly.</span></span>  
  
 <span data-ttu-id="cd8a5-118">Un riferimento dinamico a un assembly può essere eseguito anche fornendo il metodo di chiamata solo con informazioni parziali sull'assembly, ad esempio specificando solo il nome dell'assembly.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-118">You can also make a dynamic reference to an assembly by providing the calling method with only partial information about the assembly, such as specifying only the assembly name.</span></span> <span data-ttu-id="cd8a5-119">In questo caso, l'assembly viene cercato solo nella directory dell'applicazione e non vengono eseguiti altri controlli.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-119">In this case, only the application directory is searched for the assembly, and no other checking occurs.</span></span> <span data-ttu-id="cd8a5-120">È possibile creare un riferimento parziale usando uno dei diversi metodi per il caricamento degli assembly, ad esempio <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType> o <xref:System.AppDomain.Load%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-120">You make a partial reference using any of the various methods for loading assemblies such as <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType> or <xref:System.AppDomain.Load%2A?displayProperty=nameWithType>.</span></span>  
  
 <span data-ttu-id="cd8a5-121">È infine possibile creare un riferimento dinamico usando un metodo come <xref:System.Reflection.Assembly.Load*?displayProperty=nameWithType> e specificare solo informazioni parziali. In seguito verranno specificate informazioni complete sul riferimento usando l'elemento [\<qualifyAssembly>](../../../docs/framework/configure-apps/file-schema/runtime/qualifyassembly-element.md) nel file di configurazione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-121">Finally, you can make a dynamic reference using a method such as <xref:System.Reflection.Assembly.Load*?displayProperty=nameWithType> and provide only partial information; you then qualify the reference using the [\<qualifyAssembly>](../../../docs/framework/configure-apps/file-schema/runtime/qualifyassembly-element.md) element in the application configuration file.</span></span> <span data-ttu-id="cd8a5-122">Questo elemento consente di specificare le informazioni di riferimento complete (nome, versione, impostazioni cultura e, se applicabile, il token di chiave pubblica) nel file di configurazione dell'applicazione anziché nel codice.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-122">This element allows you to provide the full reference information (name, version, culture and, if applicable, the public key token) in your application configuration file instead of in your code.</span></span> <span data-ttu-id="cd8a5-123">Questa tecnica si usa quando si vuole completare un riferimento a un assembly di fuori della directory dell'applicazione oppure se si vuole fare riferimento a un assembly nella Global Assembly Cache, ma si preferisce definirlo in modo completo nel file di configurazione anziché nel codice.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-123">You would use this technique if you wanted to fully qualify a reference to an assembly outside the application directory, or if you wanted to reference an assembly in the global assembly cache but you wanted the convenience of specifying the full reference in the configuration file instead of in your code.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="cd8a5-124">Questo tipo di riferimento parziale non deve essere usato con gli assembly condivisi tra diverse applicazioni.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-124">This type of partial reference should not be used with assemblies that are shared among several applications.</span></span> <span data-ttu-id="cd8a5-125">Poiché le impostazioni di configurazione vengono applicate per applicazione e non per assembly, per usare questo tipo di riferimento parziale in un assembly condiviso ogni applicazione che usa l'assembly condiviso dovrebbe disporre delle informazioni complete nel file di configurazione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-125">Because configuration settings are applied per application and not per assembly, a shared assembly using this type of partial reference would require each application using the shared assembly to have the qualifying information in its configuration file.</span></span>  
  
 <span data-ttu-id="cd8a5-126">Il runtime usa la procedura seguente per risolvere un riferimento ad assembly:</span><span class="sxs-lookup"><span data-stu-id="cd8a5-126">The runtime uses the following steps to resolve an assembly reference:</span></span>  
  
1. <span data-ttu-id="cd8a5-127">[Determina la versione corretta dell'assembly](#step1) esaminando i file di configurazione applicabili, tra cui il file di configurazione dell'applicazione, il file dei criteri editore e il file di configurazione del computer.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-127">[Determines the correct assembly version](#step1) by examining applicable configuration files, including the application configuration file, publisher policy file, and machine configuration file.</span></span> <span data-ttu-id="cd8a5-128">Se il file di configurazione si trova in un computer remoto, il runtime deve prima individuare e scaricare il file di configurazione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-128">If the configuration file is located on a remote machine, the runtime must locate and download the application configuration file first.</span></span>  
  
2. <span data-ttu-id="cd8a5-129">[Controlla se il nome dell'assembly è stato associato in precedenza](#step2) e, in questo caso, usa l'assembly caricato in precedenza.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-129">[Checks whether the assembly name has been bound to before](#step2) and, if so, uses the previously loaded assembly.</span></span> <span data-ttu-id="cd8a5-130">Se una richiesta precedente di caricamento dell'assembly non è riuscita, la richiesta viene interrotta immediatamente senza effettuare alcun tentativo di caricamento dell'assembly.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-130">If a previous request to load the assembly failed, the request is failed immediately without attempting to load the assembly.</span></span>  
  
    > [!NOTE]
    > <span data-ttu-id="cd8a5-131">La memorizzazione nella cache di errori relativi all'associazione di assembly è stata introdotta in .NET Framework versione 2.0.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-131">The caching of assembly binding failures is new in the .NET Framework version 2.0.</span></span>  
  
3. <span data-ttu-id="cd8a5-132">[Controlla la Global Assembly Cache](#step3).</span><span class="sxs-lookup"><span data-stu-id="cd8a5-132">[Checks the global assembly cache](#step3).</span></span> <span data-ttu-id="cd8a5-133">Se viene trovato nella Global Assembly Cache, il runtime usa questo assembly.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-133">If the assembly is found there, the runtime uses this assembly.</span></span>  
  
4. <span data-ttu-id="cd8a5-134">[Individua tramite probe l'assembly](#step4) usando la procedura seguente:</span><span class="sxs-lookup"><span data-stu-id="cd8a5-134">[Probes for the assembly](#step4) using the following steps:</span></span>  
  
    1. <span data-ttu-id="cd8a5-135">Se i criteri dell'editore e della configurazione non hanno effetto sul riferimento originale e se la richiesta di associazione è stata creata usando il metodo <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType>, il runtime cerca suggerimenti per la posizione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-135">If configuration and publisher policy do not affect the original reference and if the bind request was created using the <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType> method, the runtime checks for location hints.</span></span>  
  
    2. <span data-ttu-id="cd8a5-136">Se viene trovata una codebase nei file di configurazione, il runtime controlla solo questo percorso.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-136">If a codebase is found in the configuration files, the runtime checks only this location.</span></span> <span data-ttu-id="cd8a5-137">Se la probe non riesce, il runtime determina che la richiesta di associazione non è riuscita e non vengono eseguite altre individuazioni tramite probe.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-137">If this probe fails, the runtime determines that the binding request failed and no other probing occurs.</span></span>  
  
    3. <span data-ttu-id="cd8a5-138">Le probe per l'assembly che usa le euristiche descritte nella [sezione relativa all'individuazione tramite probe](#step4).</span><span class="sxs-lookup"><span data-stu-id="cd8a5-138">Probes for the assembly using the heuristics described in the [probing section](#step4).</span></span> <span data-ttu-id="cd8a5-139">Se l'assembly non è stato trovato dopo l'individuazione tramite probe, il runtime lo richiede a Windows Installer.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-139">If the assembly is not found after probing, the runtime requests the Windows Installer to provide the assembly.</span></span> <span data-ttu-id="cd8a5-140">Questa operazione opera come una funzionalità di installazione su richiesta.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-140">This acts as an install-on-demand feature.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="cd8a5-141">Per gli assembly senza nomi sicuri non vengono eseguiti controlli della versione né controlli nella Global Assembly Cache con il runtime.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-141">There is no version checking for assemblies without strong names, nor does the runtime check in the global assembly cache for assemblies without strong names.</span></span>  
  
<a name="step1"></a>   
## <a name="step-1-examining-the-configuration-files"></a><span data-ttu-id="cd8a5-142">Passaggio 1: Esame dei file di configurazione</span><span class="sxs-lookup"><span data-stu-id="cd8a5-142">Step 1: Examining the Configuration Files</span></span>  
 <span data-ttu-id="cd8a5-143">Il comportamento dell'associazione di assembly può essere configurato a livelli diversi in base a tre file XML:</span><span class="sxs-lookup"><span data-stu-id="cd8a5-143">Assembly binding behavior can be configured at different levels based on three XML files:</span></span>  
  
- <span data-ttu-id="cd8a5-144">File di configurazione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-144">Application configuration file.</span></span>  
  
- <span data-ttu-id="cd8a5-145">File dei criteri editore.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-145">Publisher policy file.</span></span>  
  
- <span data-ttu-id="cd8a5-146">File di configurazione del computer.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-146">Machine configuration file.</span></span>  
  
 <span data-ttu-id="cd8a5-147">Questi file seguono la stessa sintassi e forniscono informazioni quali i reindirizzamenti delle associazioni, la posizione del codice e le modalità di associazione per determinati assembly.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-147">These files follow the same syntax and provide information such as binding redirects, the location of code, and binding modes for particular assemblies.</span></span> <span data-ttu-id="cd8a5-148">Ogni file di configurazione può contenere un elemento [\<assemblyBinding>](../../../docs/framework/configure-apps/file-schema/runtime/assemblybinding-element-for-runtime.md) che reindirizza il processo di associazione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-148">Each configuration file can contain an [\<assemblyBinding> element](../../../docs/framework/configure-apps/file-schema/runtime/assemblybinding-element-for-runtime.md) that redirects the binding process.</span></span> <span data-ttu-id="cd8a5-149">Negli elementi figlio dell'elemento [\<assemblyBinding>](../../../docs/framework/configure-apps/file-schema/runtime/assemblybinding-element-for-runtime.md) è incluso l'elemento [\<dependentAssembly>](../../../docs/framework/configure-apps/file-schema/runtime/dependentassembly-element.md).</span><span class="sxs-lookup"><span data-stu-id="cd8a5-149">The child elements of the [\<assemblyBinding> element](../../../docs/framework/configure-apps/file-schema/runtime/assemblybinding-element-for-runtime.md) include the [\<dependentAssembly> element](../../../docs/framework/configure-apps/file-schema/runtime/dependentassembly-element.md).</span></span> <span data-ttu-id="cd8a5-150">Negli elementi figlio dell'elemento [\<dependentAssembly>](../../../docs/framework/configure-apps/file-schema/runtime/dependentassembly-element.md) sono inclusi gli elementi [\<assemblyIdentity>](/visualstudio/deployment/assemblyidentity-element-clickonce-deployment), [\<bindingRedirect>](../../../docs/framework/configure-apps/file-schema/runtime/bindingredirect-element.md) e [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md).</span><span class="sxs-lookup"><span data-stu-id="cd8a5-150">The children of [\<dependentAssembly> element](../../../docs/framework/configure-apps/file-schema/runtime/dependentassembly-element.md) include the [\<assemblyIdentity> element](/visualstudio/deployment/assemblyidentity-element-clickonce-deployment), the [\<bindingRedirect> element](../../../docs/framework/configure-apps/file-schema/runtime/bindingredirect-element.md), and the [\<codeBase> element](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="cd8a5-151">Le informazioni di configurazione sono disponibili nei tre file di configurazione; non tutti gli elementi sono validi in tutti i file di configurazione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-151">Configuration information can be found in the three configuration files; not all elements are valid in all configuration files.</span></span> <span data-ttu-id="cd8a5-152">Ad esempio, le informazioni sulla modalità di associazione e sul percorso privato possono trovarsi solo nel file di configurazione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-152">For example, binding mode and private path information can only be in the application configuration file.</span></span> <span data-ttu-id="cd8a5-153">Per un elenco completo delle informazioni contenute in ciascun file, vedere [Configurazione delle app con file di configurazione](../../../docs/framework/configure-apps/index.md).</span><span class="sxs-lookup"><span data-stu-id="cd8a5-153">For a complete list of the information that is contained in each file, see [Configuring Apps by Using Configuration Files](../../../docs/framework/configure-apps/index.md).</span></span>  
  
### <a name="application-configuration-file"></a><span data-ttu-id="cd8a5-154">File di configurazione dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="cd8a5-154">Application Configuration File</span></span>  
 <span data-ttu-id="cd8a5-155">Common Language Runtime controlla innanzitutto il file di configurazione dell'applicazione per le informazioni che eseguono l'override delle informazioni sulla versione memorizzate nel manifesto dell'assembly chiamante.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-155">First, the common language runtime checks the application configuration file for information that overrides the version information stored in the calling assembly's manifest.</span></span> <span data-ttu-id="cd8a5-156">Il file di configurazione dell'applicazione può essere distribuito con un'applicazione, ma non è necessario per la sua esecuzione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-156">The application configuration file can be deployed with an application, but is not required for application execution.</span></span> <span data-ttu-id="cd8a5-157">In genere il recupero di questo file è quasi istantaneo, ma in situazioni in cui la base dell'applicazione si trova in un computer remoto, ad esempio in uno scenario basato su Web di Internet Explorer, il file di configurazione deve essere scaricato.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-157">Usually the retrieval of this file is almost instantaneous, but in situations where the application base is on a remote computer, such as in an Internet Explorer Web-based scenario, the configuration file must be downloaded.</span></span>  
  
 <span data-ttu-id="cd8a5-158">Per gli eseguibili del client, il file di configurazione dell'applicazione si trova nella stessa directory del file eseguibile dell'applicazione e ha lo stesso nome di base dell'eseguibile con estensione config.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-158">For client executables, the application configuration file resides in the same directory as the application's executable and has the same base name as the executable with a .config extension.</span></span> <span data-ttu-id="cd8a5-159">Ad esempio, il file di configurazione per C:\Programmi\Myapp\Myapp.exe è C:\Programmi\Myapp\Myapp.exe.config. In un scenario basato sul browser nel file HTML deve essere usato l'elemento **\<link>** per puntare in modo esplicito al file di configurazione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-159">For example, the configuration file for C:\Program Files\Myapp\Myapp.exe is C:\Program Files\Myapp\Myapp.exe.config. In a browser-based scenario, the HTML file must use the **\<link>** element to explicitly point to the configuration file.</span></span>  
  
 <span data-ttu-id="cd8a5-160">Il codice seguente fornisce un esempio semplice di un file di configurazione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-160">The following code provides a simple example of an application configuration file.</span></span> <span data-ttu-id="cd8a5-161">Questo esempio aggiunge <xref:System.Diagnostics.TextWriterTraceListener> a una raccolta <xref:System.Diagnostics.Debug.Listeners%2A> per consentire la registrazione di informazioni di debug in un file.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-161">This example adds a <xref:System.Diagnostics.TextWriterTraceListener> to the <xref:System.Diagnostics.Debug.Listeners%2A> collection to enable recording debug information to a file.</span></span>  
  
```xml  
<configuration>  
   <system.diagnostics>  
      <trace useGlobalLock="false" autoflush="true" indentsize="0">  
         <listeners>  
            <add name="myListener" type="System.Diagnostics.TextWriterTraceListener, system version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" initializeData="c:\myListener.log" />  
         </listeners>  
      </trace>  
   </system.diagnostics>  
</configuration>  
```  
  
### <a name="publisher-policy-file"></a><span data-ttu-id="cd8a5-162">File dei criteri editore</span><span class="sxs-lookup"><span data-stu-id="cd8a5-162">Publisher Policy File</span></span>  
 <span data-ttu-id="cd8a5-163">In secondo luogo, il runtime esamina il file dei criteri editore, se presente.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-163">Second, the runtime examines the publisher policy file, if one exists.</span></span> <span data-ttu-id="cd8a5-164">I file dei criteri editore vengono distribuiti da un editore del componente, ad esempio una correzione o un aggiornamento, a un componente condiviso.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-164">Publisher policy files are distributed by a component publisher as a fix or update to a shared component.</span></span> <span data-ttu-id="cd8a5-165">Questi file contengono le informazioni sulla compatibilità dell'editore del componente condiviso che indirizzano un riferimento ad assembly a una nuova versione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-165">These files contain compatibility information issued by the publisher of the shared component that directs an assembly reference to a new version.</span></span> <span data-ttu-id="cd8a5-166">A differenza dei file di configurazione del computer e dell'applicazione, i file dei criteri editore sono contenuti nei propri assembly che devono essere installati nella Global Assembly Cache.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-166">Unlike application and machine configuration files, publisher policy files are contained in their own assembly that must be installed in the global assembly cache.</span></span>  
  
 <span data-ttu-id="cd8a5-167">Di seguito è riportato un esempio di un file di configurazione dei criteri editore:</span><span class="sxs-lookup"><span data-stu-id="cd8a5-167">The following is an example of a Publisher Policy configuration file:</span></span>  
  
```xml  
<configuration>  
    <runtime>  
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">  
  
            <dependentAssembly>  
                <assemblyIdentity name="asm6" publicKeyToken="c0305c36380ba429" />   
                <bindingRedirect oldVersion="3.0.0.0" newVersion="2.0.0.0"/>    
            </dependentAssembly>  
  
        </assemblyBinding>  
    </runtime>  
</configuration>  
```  
  
 <span data-ttu-id="cd8a5-168">Per creare un assembly, è possibile usare lo strumento [Al.exe (Assembly Linker)](../../../docs/framework/tools/al-exe-assembly-linker.md) con un comando analogo al seguente:</span><span class="sxs-lookup"><span data-stu-id="cd8a5-168">To create an assembly, you can use the [Al.exe (Assembly Linker)](../../../docs/framework/tools/al-exe-assembly-linker.md) tool with a command such as the following:</span></span>  
  
```  
Al.exe /link:asm6.exe.config /out:policy.3.0.asm6.dll /keyfile: compatkey.dat /v:3.0.0.0  
```  
  
 <span data-ttu-id="cd8a5-169">`compatkey.dat` è un file di chiave con nome sicuro.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-169">`compatkey.dat` is a strong-name key file.</span></span> <span data-ttu-id="cd8a5-170">Questo comando crea un assembly con nome sicuro che è possibile inserire nella Global Assembly Cache.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-170">This command creates a strong-named assembly you can place in the global assembly cache.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="cd8a5-171">I criteri dell'editore hanno effetto su tutte le applicazioni che usano un componente condiviso.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-171">Publisher policy affects all applications that use a shared component.</span></span>  
  
 <span data-ttu-id="cd8a5-172">Il file di configurazione dei criteri editore esegue l'override delle informazioni sulla versione provenienti dall'applicazione (ovvero, dal manifesto dell'assembly o dal file di configurazione dell'applicazione).</span><span class="sxs-lookup"><span data-stu-id="cd8a5-172">The publisher policy configuration file overrides version information that comes from the application (that is, from the assembly manifest or from the application configuration file).</span></span> <span data-ttu-id="cd8a5-173">Se non è presente alcuna istruzione nel file di configurazione dell'applicazione per reindirizzare la versione specificata nel manifesto dell'assembly, il file dei criteri editore esegue l'override della versione specificata nel manifesto dell'assembly.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-173">If there is no statement in the application configuration file to redirect the version specified in the assembly manifest, the publisher policy file overrides the version specified in the assembly manifest.</span></span> <span data-ttu-id="cd8a5-174">Tuttavia, se esiste un'istruzione di reindirizzamento nel file di configurazione dell'applicazione, i criteri editore eseguono l'override di questa versione e non di quella specificata nel manifesto.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-174">However, if there is a redirecting statement in the application configuration file, publisher policy overrides that version rather than the one specified in the manifest.</span></span>  
  
 <span data-ttu-id="cd8a5-175">Un file dei criteri editore viene usato quando un componente condiviso viene aggiornato e la nuova versione del componente condiviso deve essere selezionata da tutte le applicazioni che usano il componente.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-175">A publisher policy file is used when a shared component is updated and the new version of the shared component should be picked up by all applications using that component.</span></span> <span data-ttu-id="cd8a5-176">Le impostazioni nel file dei criteri editore eseguono l'override delle impostazioni nel file di configurazione dell'applicazione, a meno che quest'ultimo non attivi la modalità sicura.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-176">The settings in the publisher policy file override settings in the application configuration file, unless the application configuration file enforces safe mode.</span></span>  
  
#### <a name="safe-mode"></a><span data-ttu-id="cd8a5-177">Modalità sicura</span><span class="sxs-lookup"><span data-stu-id="cd8a5-177">Safe Mode</span></span>  
 <span data-ttu-id="cd8a5-178">I file dei criteri editore vengono generalmente installati in maniera esplicita insieme a un Service Pack o a un aggiornamento di un programma.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-178">Publisher policy files are usually explicitly installed as part of a service pack or program update.</span></span> <span data-ttu-id="cd8a5-179">Se si verifica un problema con il componente condiviso aggiornato, è possibile ignorare gli override nel file dei criteri editore usando la modalità sicura.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-179">If there is any problem with the upgraded shared component, you can ignore the overrides in the publisher policy file using safe mode.</span></span> <span data-ttu-id="cd8a5-180">La modalità provvisoria è determinata dall'elemento **\<publisherPolicy apply="yes**&#124;**no"/>** , disponibile solo nel file di configurazione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-180">Safe mode is determined by the **\<publisherPolicy apply="yes**&#124;**no"/>** element, located only in the application configuration file.</span></span> <span data-ttu-id="cd8a5-181">Specifica se le informazioni di configurazione dei criteri editore devono essere rimosse dal processo di associazione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-181">It specifies whether the publisher policy configuration information should be removed from the binding process.</span></span>  
  
 <span data-ttu-id="cd8a5-182">La modalità sicura può essere impostata per l'intera applicazione o per gli assembly selezionati.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-182">Safe mode can be set for the entire application or for selected assemblies.</span></span> <span data-ttu-id="cd8a5-183">In altre parole è possibile disattivare i criteri per tutti gli assembly che costituiscono l'applicazione o attivarlo solo in alcuni assembly.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-183">That is, you can turn off the policy for all assemblies that make up the application, or turn it on for some assemblies but not others.</span></span> <span data-ttu-id="cd8a5-184">Per applicare i criteri dell'editore solo agli assembly che costituiscono un'applicazione, impostare **\<publisherPolicy apply\=no/>** e specificare gli assembly da includere usando l'elemento \<**dependentAssembly**>.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-184">To selectively apply publisher policy to assemblies that make up an application, set **\<publisherPolicy apply\=no/>** and specify which assemblies you want to be affected using the \<**dependentAssembly**> element.</span></span> <span data-ttu-id="cd8a5-185">Per applicare i criteri dell'editore a tutti gli assembly che costituiscono un'applicazione, impostare **\<publisherPolicy apply\=no/>** senza usare gli elementi relativi agli assembly dipendenti.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-185">To apply publisher policy to all assemblies that make up the application, set **\<publisherPolicy apply\=no/>** with no dependent assembly elements.</span></span> <span data-ttu-id="cd8a5-186">Per altre informazioni sulla configurazione, vedere [Configurazione delle app con file di configurazione](../../../docs/framework/configure-apps/index.md).</span><span class="sxs-lookup"><span data-stu-id="cd8a5-186">For more about configuration, see [Configuring Apps by using Configuration Files](../../../docs/framework/configure-apps/index.md).</span></span>  
  
### <a name="machine-configuration-file"></a><span data-ttu-id="cd8a5-187">File di configurazione del computer</span><span class="sxs-lookup"><span data-stu-id="cd8a5-187">Machine Configuration File</span></span>  
 <span data-ttu-id="cd8a5-188">In terzo luogo, il runtime esamina il file di configurazione del computer.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-188">Third, the runtime examines the machine configuration file.</span></span> <span data-ttu-id="cd8a5-189">Questo file, denominato Machine.config, si trova nel computer locale nella sottodirectory Config della directory radice in cui è installato il runtime.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-189">This file, called Machine.config, resides on the local computer in the Config subdirectory of the root directory where the runtime is installed.</span></span> <span data-ttu-id="cd8a5-190">Questo file può essere usato dagli amministratori per specificare le restrizioni relative all'associazione di assembly locali nel computer.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-190">This file can be used by administrators to specify assembly binding restrictions that are local to that computer.</span></span> <span data-ttu-id="cd8a5-191">Le impostazioni nel file di configurazione del computer hanno la precedenza su tutte le altre impostazioni di configurazione. Tuttavia, ciò non implica che tutte le impostazioni di configurazione debbano essere inserite in questo file.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-191">The settings in the machine configuration file take precedence over all other configuration settings; however, this does not mean that all configuration settings should be put in this file.</span></span> <span data-ttu-id="cd8a5-192">La versione determinata dal file dei criteri amministratore è finale e non può essere sottoposta a override.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-192">The version determined by the administrator policy file is final, and cannot be overridden.</span></span> <span data-ttu-id="cd8a5-193">Gli override specificati nel file Machine.config file hanno effetto su tutte le applicazioni.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-193">Overrides specified in the Machine.config file affect all applications.</span></span> <span data-ttu-id="cd8a5-194">Per altre informazioni sui file di configurazione, vedere [Configurazione delle app con file di configurazione](../../../docs/framework/configure-apps/index.md).</span><span class="sxs-lookup"><span data-stu-id="cd8a5-194">For more information about configuration files, see [Configuring Apps by using Configuration Files](../../../docs/framework/configure-apps/index.md).</span></span>  
  
<a name="step2"></a>   
## <a name="step-2-checking-for-previously-referenced-assemblies"></a><span data-ttu-id="cd8a5-195">Passaggio 2: Controllo di assembly a cui è stato fatto riferimento in precedenza</span><span class="sxs-lookup"><span data-stu-id="cd8a5-195">Step 2: Checking for Previously Referenced Assemblies</span></span>  
 <span data-ttu-id="cd8a5-196">Se l'assembly è stato richiesto anche nelle chiamate precedenti, Common Language Runtime usa l'assembly è già caricato.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-196">If the requested assembly has also been requested in previous calls, the common language runtime uses the assembly that is already loaded.</span></span> <span data-ttu-id="cd8a5-197">Ciò può avere implicazioni per la denominazione di assembly che costituiscono un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-197">This can have ramifications when naming assemblies that make up an application.</span></span> <span data-ttu-id="cd8a5-198">Per altre informazioni sulla denominazione degli assembly, vedere [Nomi degli assembly](../../../docs/framework/app-domains/assembly-names.md).</span><span class="sxs-lookup"><span data-stu-id="cd8a5-198">For more information about naming assemblies, see [Assembly Names](../../../docs/framework/app-domains/assembly-names.md).</span></span>  
  
 <span data-ttu-id="cd8a5-199">Se una richiesta precedente per l'assembly non è riuscita, le richieste successive verranno interrotte immediatamente senza effettuare alcun tentativo di caricamento dell'assembly.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-199">If a previous request for the assembly failed, subsequent requests for the assembly are failed immediately without attempting to load the assembly.</span></span> <span data-ttu-id="cd8a5-200">A partire da .NET Framework versione 2.0, gli errori relativi all'associazione di assembly vengono memorizzati nella cache e le informazioni memorizzate nella cache vengono usate per determinare se tentare di caricare l'assembly.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-200">Starting with the .NET Framework version 2.0, assembly binding failures are cached, and the cached information is used to determine whether to attempt to load the assembly.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="cd8a5-201">Per ripristinare il comportamento di .NET Framework versioni 1.0 e 1.1, che non memorizza nella cache gli errori di associazione, includere l'elemento [\<disableCachingBindingFailures>](../../../docs/framework/configure-apps/file-schema/runtime/disablecachingbindingfailures-element.md) nel file di configurazione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-201">To revert to the behavior of the .NET Framework versions 1.0 and 1.1, which did not cache binding failures, include the [\<disableCachingBindingFailures> Element](../../../docs/framework/configure-apps/file-schema/runtime/disablecachingbindingfailures-element.md) in your configuration file.</span></span>  
  
<a name="step3"></a>   
## <a name="step-3-checking-the-global-assembly-cache"></a><span data-ttu-id="cd8a5-202">Passaggio 3: Controllo della Global Assembly Cache</span><span class="sxs-lookup"><span data-stu-id="cd8a5-202">Step 3: Checking the Global Assembly Cache</span></span>  
 <span data-ttu-id="cd8a5-203">Per gli assembly con nome sicuro, il processo di associazione prosegue con la ricerca nella Global Assembly Cache.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-203">For strong-named assemblies, the binding process continues by looking in the global assembly cache.</span></span> <span data-ttu-id="cd8a5-204">Gli assembly che possono essere usati da più applicazioni in un computer vengono archiviati nella Global Assembly Cache.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-204">The global assembly cache stores assemblies that can be used by several applications on a computer.</span></span> <span data-ttu-id="cd8a5-205">Tutti gli assembly nella Global Assembly Cache devono avere nomi sicuri.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-205">All assemblies in the global assembly cache must have strong names.</span></span>  
  
<a name="step4"></a>   
## <a name="step-4-locating-the-assembly-through-codebases-or-probing"></a><span data-ttu-id="cd8a5-206">Passaggio 4: Individuazione dell'assembly mediante codebase o probe</span><span class="sxs-lookup"><span data-stu-id="cd8a5-206">Step 4: Locating the Assembly through Codebases or Probing</span></span>  
 <span data-ttu-id="cd8a5-207">Dopo aver determinato la versione corretta dell'assembly usando le informazioni nel riferimento dell'assembly chiamante e nei file di configurazione e dopo aver archiviato tale versione nella Global Assembly Cache (solo per assembly con nome sicuro), Common Language Runtime tenta di trovare l'assembly.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-207">After the correct assembly version has been determined by using the information in the calling assembly's reference and in the configuration files, and after it has checked in the global assembly cache (only for strong-named assemblies), the common language runtime attempts to find the assembly.</span></span> <span data-ttu-id="cd8a5-208">Il processo di individuazione di un assembly prevede i seguenti passaggi:</span><span class="sxs-lookup"><span data-stu-id="cd8a5-208">The process of locating an assembly involves the following steps:</span></span>  
  
1. <span data-ttu-id="cd8a5-209">Se nel file di configurazione dell'applicazione viene rilevato un elemento [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md), il percorso specificato viene verificato dal runtime.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-209">If a [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element is found in the application configuration file, the runtime checks the specified location.</span></span> <span data-ttu-id="cd8a5-210">Se viene rilevata una corrispondenza, viene usato l'assembly trovato e non vengono eseguite individuazioni tramite probe.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-210">If a match is found, that assembly is used and no probing occurs.</span></span> <span data-ttu-id="cd8a5-211">Se l'assembly non viene trovato, la richiesta di associazione non riesce.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-211">If the assembly is not found there, the binding request fails.</span></span>  
  
2. <span data-ttu-id="cd8a5-212">Il runtime esegue quindi l'individuazione tramite probe per l'assembly di riferimento usando le regole specificate più avanti in questa sezione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-212">The runtime then probes for the referenced assembly using the rules specified later in this section.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="cd8a5-213">Se sono presenti più versioni di un assembly in una directory e si vuole fare riferimento a una versione specifica, è necessario usare l'elemento [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) invece dell'attributo `privatePath` dell'elemento [\<probing>](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md).</span><span class="sxs-lookup"><span data-stu-id="cd8a5-213">If you have multiple versions of an assembly in a directory and you want to reference a particular version of that assembly, you must use the [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element instead of the `privatePath` attribute of the [\<probing>](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md) element.</span></span> <span data-ttu-id="cd8a5-214">Se si usa l'elemento [\<probing>](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md), il runtime arresta l'individuazione tramite probe non appena viene trovato un assembly che corrisponde al nome semplice dell'assembly a cui viene fatto riferimento, indipendentemente dalla correttezza della corrispondenza.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-214">If you use the [\<probing>](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md) element, the runtime stops probing the first time it finds an assembly that matches the simple assembly name referenced, whether it is a correct match or not.</span></span> <span data-ttu-id="cd8a5-215">Se la corrispondenza è corretta, viene usato questo assembly.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-215">If it is a correct match, that assembly is used.</span></span> <span data-ttu-id="cd8a5-216">Se la corrispondenza non è corretta, l'individuazione tramite probe si arresta e l'associazione non riesce.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-216">If it is not a correct match, probing stops and binding fails.</span></span>  
  
### <a name="locating-the-assembly-through-codebases"></a><span data-ttu-id="cd8a5-217">Individuazione dell'assembly mediante codebase</span><span class="sxs-lookup"><span data-stu-id="cd8a5-217">Locating the Assembly through Codebases</span></span>  
 <span data-ttu-id="cd8a5-218">È possibile specificare le informazioni relative alla codebase usando un elemento [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) in un file di configurazione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-218">Codebase information can be provided by using a [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element in a configuration file.</span></span> <span data-ttu-id="cd8a5-219">Questa codebase viene sempre controllata prima che il runtime tenti l'individuazione tramite probe per l'assembly di riferimento.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-219">This codebase is always checked before the runtime attempts to probe for the referenced assembly.</span></span> <span data-ttu-id="cd8a5-220">Se in un file dei criteri dell'editore contenente le informazioni per il reindirizzamento a una versione finale è incluso anche un elemento [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md), verrà usato l'elemento [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md).</span><span class="sxs-lookup"><span data-stu-id="cd8a5-220">If a publisher policy file containing the final version redirect also contains a [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element, that [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element is the one that is used.</span></span> <span data-ttu-id="cd8a5-221">Ad esempio, se il file di configurazione dell'applicazione specifica un elemento [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) e anche un file dei criteri dell'editore tramite cui viene eseguito l'override delle informazioni dell'applicazione specifica un elemento [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md), verrà usato l'elemento [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) presente nel file dei criteri dell'editore.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-221">For example, if your application configuration file specifies a [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element, and a publisher policy file that is overriding the application information also specifies a [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element, the [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element in the publisher policy file is used.</span></span>  
  
 <span data-ttu-id="cd8a5-222">Se nel percorso specificato dall'elemento [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) non viene individuato alcun assembly, la richiesta di associazione non viene completata e non vengono eseguite altre operazioni.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-222">If no match is found at the location specified by the [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element, the bind request fails and no further steps are taken.</span></span> <span data-ttu-id="cd8a5-223">Se il runtime determina che un assembly soddisfa i criteri dell'assembly chiamante, viene usato questo assembly.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-223">If the runtime determines that an assembly matches the calling assembly's criteria, it uses that assembly.</span></span> <span data-ttu-id="cd8a5-224">Quando viene caricato il file indicato dall'elemento [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) specificato, tramite il runtime viene controllato che il nome, la versione, le impostazioni cultura e la chiave pubblica corrispondano al riferimento dell'assembly chiamante.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-224">When the file specified by the given [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element is loaded, the runtime checks to make sure that the name, version, culture, and public key match the calling assembly's reference.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="cd8a5-225">Gli assembly a cui viene fatto riferimento che sono esterni alla directory radice dell'applicazione devono avere nomi sicuri e devono essere installati nella Global Assembly Cache o specificati mediante l'elemento [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md).</span><span class="sxs-lookup"><span data-stu-id="cd8a5-225">Referenced assemblies outside the application's root directory must have strong names and must either be installed in the global assembly cache or specified using the [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element.</span></span>  
  
### <a name="locating-the-assembly-through-probing"></a><span data-ttu-id="cd8a5-226">Individuazione dell'assembly mediante l'individuazione tramite probe</span><span class="sxs-lookup"><span data-stu-id="cd8a5-226">Locating the Assembly through Probing</span></span>  
 <span data-ttu-id="cd8a5-227">Se nel file di configurazione dell'applicazione non è stato specificato alcun elemento [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md), il runtime esegue la ricerca dell'assembly usando quattro criteri:</span><span class="sxs-lookup"><span data-stu-id="cd8a5-227">If there is no [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element in the application configuration file, the runtime probes for the assembly using four criteria:</span></span>  
  
- <span data-ttu-id="cd8a5-228">La base dell'applicazione, ovvero il percorso radice in cui viene eseguita l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-228">Application base, which is the root location where the application is being executed.</span></span>  
  
- <span data-ttu-id="cd8a5-229">Le impostazioni cultura, ovvero l'attributo delle impostazioni cultura dell'assembly di riferimento.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-229">Culture, which is the culture attribute of the assembly being referenced.</span></span>  
  
- <span data-ttu-id="cd8a5-230">Il nome, ovvero il nome dell'assembly di riferimento.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-230">Name, which is the name of the referenced assembly.</span></span>  
  
- <span data-ttu-id="cd8a5-231">L'attributo `privatePath` dell'elemento [\<probing>](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md), ovvero l'elenco definito dall'utente delle sottodirectory del percorso radice.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-231">The `privatePath` attribute of the [\<probing>](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md) element, which is the user-defined list of subdirectories under the root location.</span></span> <span data-ttu-id="cd8a5-232">Questo percorso può essere specificato nel file di configurazione dell'applicazione e nel codice gestito mediante la proprietà <xref:System.AppDomainSetup.PrivateBinPath?displayProperty=nameWithType> di un dominio applicazione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-232">This location can be specified in the application configuration file and in managed code using the <xref:System.AppDomainSetup.PrivateBinPath?displayProperty=nameWithType> property for an application domain.</span></span> <span data-ttu-id="cd8a5-233">Quando è specificato nel codice gestito, viene eseguita prima l'individuazione tramite probe del codice gestito `privatePath`, seguita dal percorso specificato nel file di configurazione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-233">When specified in managed code, the managed code `privatePath` is probed first, followed by the path specified in the application configuration file.</span></span>  
  
#### <a name="probing-the-application-base-and-culture-directories"></a><span data-ttu-id="cd8a5-234">Individuazione tramite probe delle directory Application Base e Culture</span><span class="sxs-lookup"><span data-stu-id="cd8a5-234">Probing the Application Base and Culture Directories</span></span>  
 <span data-ttu-id="cd8a5-235">Il runtime avvia sempre l'individuazione tramite probe nella base dell'applicazione, che può essere un URL o la directory radice dell'applicazione in un computer.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-235">The runtime always begins probing in the application's base, which can be either a URL or the application's root directory on a computer.</span></span> <span data-ttu-id="cd8a5-236">Se l'assembly di riferimento non viene trovato nella base dell'applicazione e non viene fornita alcuna informazione sulle impostazioni cultura, il runtime cerca il nome dell'assembly in tutte le sottodirectory.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-236">If the referenced assembly is not found in the application base and no culture information is provided, the runtime searches any subdirectories with the assembly name.</span></span> <span data-ttu-id="cd8a5-237">Le directory di cui viene eseguita l'individuazione tramite probe includono:</span><span class="sxs-lookup"><span data-stu-id="cd8a5-237">The directories probed include:</span></span>  
  
 <span data-ttu-id="cd8a5-238">[application base]/[assembly name].dll</span><span class="sxs-lookup"><span data-stu-id="cd8a5-238">[application base] / [assembly name].dll</span></span>  
  
 <span data-ttu-id="cd8a5-239">[application base]/[assembly name]/[assembly name].dll</span><span class="sxs-lookup"><span data-stu-id="cd8a5-239">[application base] / [assembly name] / [assembly name].dll</span></span>  
  
 <span data-ttu-id="cd8a5-240">Se si specificano le informazioni sulle impostazioni cultura per l'assembly di riferimento, l'individuazione tramite probe viene eseguita solo sulle seguenti directory:</span><span class="sxs-lookup"><span data-stu-id="cd8a5-240">If culture information is specified for the referenced assembly, only the following directories are probed:</span></span>  
  
 <span data-ttu-id="cd8a5-241">[application base]/[culture]/[assembly name].dll</span><span class="sxs-lookup"><span data-stu-id="cd8a5-241">[application base] / [culture] / [assembly name].dll</span></span>  
  
 <span data-ttu-id="cd8a5-242">[application base]/[culture]/[assembly name]/[assembly name].dll</span><span class="sxs-lookup"><span data-stu-id="cd8a5-242">[application base] / [culture] / [assembly name] / [assembly name].dll</span></span>  
  
#### <a name="probing-with-the-privatepath-attribute"></a><span data-ttu-id="cd8a5-243">Individuazione tramite probe con l'attributo privatePath</span><span class="sxs-lookup"><span data-stu-id="cd8a5-243">Probing with the privatePath Attribute</span></span>  
 <span data-ttu-id="cd8a5-244">Oltre alle sottodirectory relative alle impostazioni cultura e a quelle specificate per l'assembly a cui viene fatto riferimento, il runtime esegue la ricerca anche nelle directory specificate dall'attributo `privatePath` dell'elemento [\<probing>](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md).</span><span class="sxs-lookup"><span data-stu-id="cd8a5-244">In addition to the culture subdirectories and the subdirectories named for the referenced assembly, the runtime also probes directories specified using the `privatePath` attribute of the [\<probing>](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md) element.</span></span> <span data-ttu-id="cd8a5-245">Le directory specificate usando l'attributo `privatePath` devono essere sottodirectory della directory radice dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-245">The directories specified using the `privatePath` attribute must be subdirectories of the application's root directory.</span></span> <span data-ttu-id="cd8a5-246">Le directory con individuazione tramite probe variano a seconda che le informazioni sulle impostazioni cultura siano incluse o meno nella richiesta dell'assembly di riferimento.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-246">The directories probed vary depending on whether culture information is included in the referenced assembly request.</span></span>  
  
 <span data-ttu-id="cd8a5-247">Il runtime arresta l'individuazione tramite probe appena trova un assembly che corrisponde al nome semplice dell'assembly indicato, senza tenere conto della correttezza della corrispondenza.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-247">The runtime stops probing the first time it finds an assembly that matches the simple assembly name referenced, whether it is a correct match or not.</span></span> <span data-ttu-id="cd8a5-248">Se la corrispondenza è corretta, viene usato questo assembly.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-248">If it is a correct match, that assembly is used.</span></span> <span data-ttu-id="cd8a5-249">Se la corrispondenza non è corretta, l'individuazione tramite probe si arresta e l'associazione non riesce.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-249">If it is not a correct match, probing stops and binding fails.</span></span>  
  
 <span data-ttu-id="cd8a5-250">Se le impostazioni cultura sono incluse, l'individuazione tramite probe viene eseguita sulle seguenti directory:</span><span class="sxs-lookup"><span data-stu-id="cd8a5-250">If culture is included, the following directories are probed:</span></span>  
  
 <span data-ttu-id="cd8a5-251">[application base]/[binpath]/[culture]/[assembly name].dll</span><span class="sxs-lookup"><span data-stu-id="cd8a5-251">[application base] / [binpath] / [culture] / [assembly name].dll</span></span>  
  
 <span data-ttu-id="cd8a5-252">[application base]/[binpath]/[culture]/[assembly name]/[assembly name].dll</span><span class="sxs-lookup"><span data-stu-id="cd8a5-252">[application base] / [binpath] / [culture] / [assembly name] / [assembly name].dll</span></span>  
  
 <span data-ttu-id="cd8a5-253">Se le informazioni sulle impostazioni cultura non sono incluse, l'individuazione tramite probe viene eseguita sulle seguenti directory:</span><span class="sxs-lookup"><span data-stu-id="cd8a5-253">If culture information is not included, the following directories are probed:</span></span>  
  
 <span data-ttu-id="cd8a5-254">[application base]/[binpath]/[assembly name].dll</span><span class="sxs-lookup"><span data-stu-id="cd8a5-254">[application base] / [binpath] / [assembly name].dll</span></span>  
  
 <span data-ttu-id="cd8a5-255">[application base]/[binpath]/[assembly name]/[assembly name].dll</span><span class="sxs-lookup"><span data-stu-id="cd8a5-255">[application base] / [binpath] / [assembly name] / [assembly name].dll</span></span>  
  
#### <a name="probing-examples"></a><span data-ttu-id="cd8a5-256">Esempi di individuazione tramite probe</span><span class="sxs-lookup"><span data-stu-id="cd8a5-256">Probing Examples</span></span>  
 <span data-ttu-id="cd8a5-257">Date le seguenti informazioni:</span><span class="sxs-lookup"><span data-stu-id="cd8a5-257">Given the following information:</span></span>  
  
- <span data-ttu-id="cd8a5-258">Nome dell'assembly di riferimento: myAssembly</span><span class="sxs-lookup"><span data-stu-id="cd8a5-258">Referenced assembly name: myAssembly</span></span>  
  
- <span data-ttu-id="cd8a5-259">Directory radice dell'applicazione: `http://www.code.microsoft.com`</span><span class="sxs-lookup"><span data-stu-id="cd8a5-259">Application root directory: `http://www.code.microsoft.com`</span></span>  
  
- <span data-ttu-id="cd8a5-260">Elemento [\<probing>](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md) specificato nel file di configurazione: bin</span><span class="sxs-lookup"><span data-stu-id="cd8a5-260">[\<probing>](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md) element in configuration file specifies: bin</span></span>  
  
- <span data-ttu-id="cd8a5-261">Impostazioni cultura: de</span><span class="sxs-lookup"><span data-stu-id="cd8a5-261">Culture: de</span></span>  
  
 <span data-ttu-id="cd8a5-262">Il runtime esegue l'individuazione tramite probe dei seguenti URL:</span><span class="sxs-lookup"><span data-stu-id="cd8a5-262">The runtime probes the following URLs:</span></span>  
  
 `http://www.code.microsoft.com/de/myAssembly.dll`
  
 `http://www.code.microsoft.com/de/myAssembly/myAssembly.dll`
  
 `http://www.code.microsoft.com/bin/de/myAssembly.dll`
  
 `http://www.code.microsoft.com/bin/de/myAssembly/myAssembly.dll`
  
##### <a name="multiple-assemblies-with-the-same-name"></a><span data-ttu-id="cd8a5-263">Più assembly con lo stesso nome</span><span class="sxs-lookup"><span data-stu-id="cd8a5-263">Multiple Assemblies with the Same Name</span></span>  
 <span data-ttu-id="cd8a5-264">L'esempio seguente mostra come configurare più assembly con lo stesso nome.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-264">The following example shows how to configure multiple assemblies with the same name.</span></span>  
  
```xml  
<dependentAssembly>  
   <assemblyIdentity name="Server" publicKeyToken="c0305c36380ba429" />   
   <codeBase version="1.0.0.0" href="v1/Server.dll" />  
   <codeBase version="2.0.0.0" href="v2/Server.dll" />  
</dependentAssembly>  
```  
  
#### <a name="other-locations-probed"></a><span data-ttu-id="cd8a5-265">Altri percorsi con individuazione tramite probe</span><span class="sxs-lookup"><span data-stu-id="cd8a5-265">Other Locations Probed</span></span>  
 <span data-ttu-id="cd8a5-266">Il percorso dell'assembly può essere determinato anche usando il contesto di associazione corrente.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-266">Assembly location can also be determined using the current binding context.</span></span> <span data-ttu-id="cd8a5-267">Questa situazione si verifica spesso quando il metodo <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType> viene usato in scenari di interoperabilità COM.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-267">This most often occurs when the <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType> method is used and in COM interop scenarios.</span></span> <span data-ttu-id="cd8a5-268">Se un assembly usa il metodo <xref:System.Reflection.Assembly.LoadFrom%2A> per fare riferimento a un altro assembly, il percorso dell'assembly chiamante viene considerato come un suggerimento su dove trovare l'assembly di riferimento.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-268">If an assembly uses the <xref:System.Reflection.Assembly.LoadFrom%2A> method to reference another assembly, the calling assembly's location is considered to be a hint about where to find the referenced assembly.</span></span> <span data-ttu-id="cd8a5-269">Se viene trovata una corrispondenza, l'assembly viene caricato.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-269">If a match is found, that assembly is loaded.</span></span> <span data-ttu-id="cd8a5-270">Se non viene trovata alcuna corrispondenza, il runtime continua con la semantica di ricerca, quindi esegue una query in Windows Installer per richiedere l'assembly.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-270">If no match is found, the runtime continues with its search semantics and then queries the Windows Installer to provide the assembly.</span></span> <span data-ttu-id="cd8a5-271">Se non vengono forniti assembly corrispondenti alla richiesta di associazione, viene generata un'eccezione.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-271">If no assembly is provided that matches the binding request, an exception is thrown.</span></span> <span data-ttu-id="cd8a5-272">Questa eccezione è <xref:System.TypeLoadException> nel codice gestito, se è stato fatto riferimento a un tipo, oppure <xref:System.IO.FileNotFoundException> se l'assembly in fase di caricamento non è stato trovato.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-272">This exception is a <xref:System.TypeLoadException> in managed code if a type was referenced, or a <xref:System.IO.FileNotFoundException> if an assembly being loaded was not found.</span></span>  
  
 <span data-ttu-id="cd8a5-273">Se ad esempio Assembly1 fa riferimento ad Assembly2 e Assembly1 è stato scaricato da `http://www.code.microsoft.com/utils`, il percorso viene considerato come un suggerimento su dove trovare Assembly2.dll.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-273">For example, if Assembly1 references Assembly2 and Assembly1 was downloaded from `http://www.code.microsoft.com/utils`, that location is considered to be a hint about where to find Assembly2.dll.</span></span> <span data-ttu-id="cd8a5-274">Il runtime quindi verifica la presenza dell'assembly in `http://www.code.microsoft.com/utils/Assembly2.dll` e `http://www.code.microsoft.com/utils/Assembly2/Assembly2.dll`.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-274">The runtime then probes for the assembly in `http://www.code.microsoft.com/utils/Assembly2.dll` and `http://www.code.microsoft.com/utils/Assembly2/Assembly2.dll`.</span></span> <span data-ttu-id="cd8a5-275">Se Assembly2 non viene trovato nei percorsi indicati, il runtime esegue una query in Windows Installer.</span><span class="sxs-lookup"><span data-stu-id="cd8a5-275">If Assembly2 is not found at either of those locations, the runtime queries the Windows Installer.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="cd8a5-276">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="cd8a5-276">See also</span></span>

- [<span data-ttu-id="cd8a5-277">Procedure consigliate per il caricamento di assembly</span><span class="sxs-lookup"><span data-stu-id="cd8a5-277">Best Practices for Assembly Loading</span></span>](../../../docs/framework/deployment/best-practices-for-assembly-loading.md)
- [<span data-ttu-id="cd8a5-278">Distribuzione</span><span class="sxs-lookup"><span data-stu-id="cd8a5-278">Deployment</span></span>](../../../docs/framework/deployment/index.md)

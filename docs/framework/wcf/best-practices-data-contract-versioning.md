---
title: 'Procedure consigliate: controllo delle versioni del contratto dati'
ms.date: 03/30/2017
helpviewer_keywords:
- data contracts
- service contracts
- best practices [WCF], data contract versioning
- Windows Communication Foundation, data contracts
ms.assetid: bf0ab338-4d36-4e12-8002-8ebfdeb346cb
ms.openlocfilehash: 4d500c37efa4a90e24b06cd2e886147e1f159d4e
ms.sourcegitcommit: 628e8147ca10187488e6407dab4c4e6ebe0cac47
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/15/2019
ms.locfileid: "72320784"
---
# <a name="best-practices-data-contract-versioning"></a><span data-ttu-id="6113a-102">Procedure consigliate: controllo delle versioni del contratto dati</span><span class="sxs-lookup"><span data-stu-id="6113a-102">Best Practices: Data Contract Versioning</span></span>
<span data-ttu-id="6113a-103">In questo argomento vengono elencate le procedure consigliate per la creazione di contratti dati che possono evolvere facilmente nel tempo.</span><span class="sxs-lookup"><span data-stu-id="6113a-103">This topic lists the best practices for creating data contracts that can evolve easily over time.</span></span> <span data-ttu-id="6113a-104">Per ulteriori informazioni sui contratti dati, vedere gli argomenti relativi all' [utilizzo di contratti dati](./feature-details/using-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="6113a-104">For more information about data contracts, see the topics in [Using Data Contracts](./feature-details/using-data-contracts.md).</span></span>  
  
## <a name="note-on-schema-validation"></a><span data-ttu-id="6113a-105">Note sulla convalida dello schema</span><span class="sxs-lookup"><span data-stu-id="6113a-105">Note on Schema Validation</span></span>  
 <span data-ttu-id="6113a-106">Quando si discute il controllo delle versioni dei contratti dati, è importante notare che lo schema del contratto dati esportato da Windows Communication Foundation (WCF) non dispone di alcun supporto per il controllo delle versioni, tranne per il fatto che gli elementi sono contrassegnati come facoltativi per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="6113a-106">In discussing data contract versioning, it is important to note that the data contract schema exported by Windows Communication Foundation (WCF) does not have any versioning support, other than the fact that elements are marked as optional by default.</span></span>  
  
 <span data-ttu-id="6113a-107">Di conseguenza, anche lo scenario di controllo delle versioni più comune, quale l'aggiunta di un nuovo membro dati, non può essere implementato agevolmente rispetto a un schema specificato.</span><span class="sxs-lookup"><span data-stu-id="6113a-107">This means that even the most common versioning scenario, such as adding a new data member, cannot be implemented in a way that is seamless with regard to a given schema.</span></span> <span data-ttu-id="6113a-108">Le versioni più recenti di un contratto dati (ad esempio con un nuovo membro dati) non vengono convalidate usando lo schema obsoleto.</span><span class="sxs-lookup"><span data-stu-id="6113a-108">The newer versions of a data contract (with a new data member, for example) do not validate using the old schema.</span></span>  
  
 <span data-ttu-id="6113a-109">Esistono tuttavia molti scenari in cui non è richiesta una totale conformità allo schema.</span><span class="sxs-lookup"><span data-stu-id="6113a-109">However, there are many scenarios in which strict schema compliance is not required.</span></span> <span data-ttu-id="6113a-110">Molte piattaforme di servizi Web, tra cui WCF e i servizi Web XML creati tramite ASP.NET, non eseguono la convalida dello schema per impostazione predefinita e pertanto tollerano elementi aggiuntivi non descritti dallo schema.</span><span class="sxs-lookup"><span data-stu-id="6113a-110">Many Web services platforms, including WCF and XML Web services created using ASP.NET, do not perform schema validation by default and therefore tolerate extra elements that are not described by the schema.</span></span> <span data-ttu-id="6113a-111">Se si usano tali piattaforme, l'implementazione di molti scenari di controllo delle versioni risulta più semplice.</span><span class="sxs-lookup"><span data-stu-id="6113a-111">When working with such platforms, many versioning scenarios are easier to implement.</span></span>  
  
 <span data-ttu-id="6113a-112">Sono pertanto disponibili due set di linee guida per il controllo delle versioni di un contratto dati: un set per gli scenari in cui la rigorosa validità dello schema è importante e un altro set per gli scenari in cui non lo è.</span><span class="sxs-lookup"><span data-stu-id="6113a-112">Thus, there are two sets of data contract versioning guidelines: one set for scenarios where strict schema validity is important, and another set for scenarios when it is not.</span></span>  
  
## <a name="versioning-when-schema-validation-is-required"></a><span data-ttu-id="6113a-113">Controllo delle versioni quando la convalida dello schema è necessaria</span><span class="sxs-lookup"><span data-stu-id="6113a-113">Versioning When Schema Validation Is Required</span></span>  
 <span data-ttu-id="6113a-114">Se la rigorosa validità dello schema è necessaria in tutte le direzioni (da nuovo a vecchio e da vecchio a nuovo), i contratti dati devono essere considerati immutabili.</span><span class="sxs-lookup"><span data-stu-id="6113a-114">If strict schema validity is required in all directions (new-to-old and old-to-new), data contracts should be considered immutable.</span></span> <span data-ttu-id="6113a-115">Se occorre eseguire il controllo delle versioni, è necessario creare un nuovo contratto dati, con un nome o uno spazio dei nomi diverso e il contratto di servizio che usa il tipo di dati deve essere sottoposto al controllo delle versioni.</span><span class="sxs-lookup"><span data-stu-id="6113a-115">If versioning is required, a new data contract should be created, with a different name or namespace, and the service contract using the data type should be versioned accordingly.</span></span>  
  
 <span data-ttu-id="6113a-116">Ad esempio, un contratto di servizio che elabora un ordine di acquisto denominato `PoProcessing` con un'operazione `PostPurchaseOrder` accetta un parametro basato su un contratto dati `PurchaseOrder`.</span><span class="sxs-lookup"><span data-stu-id="6113a-116">For example, a purchase order processing service contract named `PoProcessing` with a `PostPurchaseOrder` operation takes a parameter that conforms to a `PurchaseOrder` data contract.</span></span> <span data-ttu-id="6113a-117">Se è necessario modificare il contratto `PurchaseOrder`, creare un nuovo contratto dati, ovvero `PurchaseOrder2`, che includa le modifiche.</span><span class="sxs-lookup"><span data-stu-id="6113a-117">If the `PurchaseOrder` contract has to change, you must create a new data contract, that is, `PurchaseOrder2`, which includes the changes.</span></span> <span data-ttu-id="6113a-118">È quindi necessario gestire il controllo delle versioni a livello del contratto di servizio.</span><span class="sxs-lookup"><span data-stu-id="6113a-118">You must then handle the versioning at the service contract level.</span></span> <span data-ttu-id="6113a-119">Ad esempio, creando un'operazione `PostPurchaseOrder2` che accetta il parametro `PurchaseOrder2` o creando un contratto di servizio `PoProcessing2` in cui l'operazione `PostPurchaseOrder` accetta un contratto dati `PurchaseOrder2`.</span><span class="sxs-lookup"><span data-stu-id="6113a-119">For example, by creating a `PostPurchaseOrder2` operation that takes the `PurchaseOrder2` parameter, or by creating a `PoProcessing2` service contract where the `PostPurchaseOrder` operation takes a `PurchaseOrder2` data contract.</span></span>  
  
 <span data-ttu-id="6113a-120">Si noti che se altri contratti dati fanno riferimento alle modifiche apportate ai contratti dati, queste si estenderanno anche a livello del modello di servizio.</span><span class="sxs-lookup"><span data-stu-id="6113a-120">Note that changes in data contracts that are referenced by other data contracts also extend to the service model layer.</span></span> <span data-ttu-id="6113a-121">Ad esempio, si supponga che nello scenario precedente il contratto dati `PurchaseOrder` non abbia bisogno di modifiche.</span><span class="sxs-lookup"><span data-stu-id="6113a-121">For example, in the previous scenario the `PurchaseOrder` data contract does not need to change.</span></span> <span data-ttu-id="6113a-122">Tale contratto tuttavia contiene un membro dati di un contratto dati `Customer` che, a sua volta, contiene un membro dati del contratto dati `Address` che deve essere modificato.</span><span class="sxs-lookup"><span data-stu-id="6113a-122">However, it contains a data member of a `Customer` data contract, which in turn contained a data member of the `Address` data contract, which does need to be changed.</span></span> <span data-ttu-id="6113a-123">In tal caso, è necessario creare un contratto dati `Address2` con le modifiche necessarie, un contratto dati `Customer2` contenente il membro dati `Address2` e un contratto dati `PurchaseOrder2` contenente il membro dati `Customer2`.</span><span class="sxs-lookup"><span data-stu-id="6113a-123">In that case, you would need to create an `Address2` data contract with the required changes, a `Customer2` data contract that contains the `Address2` data member, and a `PurchaseOrder2` data contract that contains a `Customer2` data member.</span></span> <span data-ttu-id="6113a-124">Come nel caso precedente, anche il contratto di servizio deve essere sottoposto al controllo delle versioni.</span><span class="sxs-lookup"><span data-stu-id="6113a-124">As in the previous case, the service contract would have to be versioned as well.</span></span>  
  
 <span data-ttu-id="6113a-125">Sebbene in questi esempi i nomi sono stati modificati (aggiungendo "2"), è consigliabile modificare gli spazi dei nomi anziché i nomi, aggiungendo un numero di versione o una data ai nuovi spazi dei nomi.</span><span class="sxs-lookup"><span data-stu-id="6113a-125">Although in these examples names are changed (by appending a "2"), the recommendation is to change namespaces instead of names by appending new namespaces with a version number or a date.</span></span> <span data-ttu-id="6113a-126">Ad esempio, il contratto dati `http://schemas.contoso.com/2005/05/21/PurchaseOrder` diventerebbe il contratto dati `http://schemas.contoso.com/2005/10/14/PurchaseOrder`.</span><span class="sxs-lookup"><span data-stu-id="6113a-126">For example, the `http://schemas.contoso.com/2005/05/21/PurchaseOrder` data contract would change to the `http://schemas.contoso.com/2005/10/14/PurchaseOrder` data contract.</span></span>  
  
 <span data-ttu-id="6113a-127">Per ulteriori informazioni, vedere procedure consigliate: [controllo delle versioni dei servizi](service-versioning.md).</span><span class="sxs-lookup"><span data-stu-id="6113a-127">For more information, see Best Practices: [Service Versioning](service-versioning.md).</span></span>  
  
 <span data-ttu-id="6113a-128">In alcuni casi è necessario garantire la rigorosa conformità allo schema per i messaggi inviati dall'applicazione, ma non è possibile basarsi sui messaggi in ingresso per essere rigorosamente conformi allo schema.</span><span class="sxs-lookup"><span data-stu-id="6113a-128">Occasionally, you must guarantee strict schema compliance for messages sent by your application, but cannot rely on the incoming messages to be strictly schema-compliant.</span></span> <span data-ttu-id="6113a-129">In questo caso, vi è il rischio che un messaggio in ingresso contenga dati estranei.</span><span class="sxs-lookup"><span data-stu-id="6113a-129">In this case, there is a danger that an incoming message might contain extraneous data.</span></span> <span data-ttu-id="6113a-130">I valori estranei vengono archiviati e restituiti da WCF e pertanto generano messaggi non validi per lo schema.</span><span class="sxs-lookup"><span data-stu-id="6113a-130">The extraneous values are stored and returned by WCF and thus results in schema-invalid messages being sent.</span></span> <span data-ttu-id="6113a-131">Per evitare questo problema, è necessario disattivare la funzionalità di creazione di sequenze di andata e ritorno.</span><span class="sxs-lookup"><span data-stu-id="6113a-131">To avoid this problem, the round-tripping feature should be turned off.</span></span> <span data-ttu-id="6113a-132">È possibile ottenere questo risultato in due modi.</span><span class="sxs-lookup"><span data-stu-id="6113a-132">There are two ways to do this.</span></span>  
  
- <span data-ttu-id="6113a-133">Non implementare l'interfaccia <xref:System.Runtime.Serialization.IExtensibleDataObject> sui tipi usati.</span><span class="sxs-lookup"><span data-stu-id="6113a-133">Do not implement the <xref:System.Runtime.Serialization.IExtensibleDataObject> interface on any of your types.</span></span>  
  
- <span data-ttu-id="6113a-134">Applicare un attributo <xref:System.ServiceModel.ServiceBehaviorAttribute> al contratto di servizio con la proprietà <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> impostata su `true`.</span><span class="sxs-lookup"><span data-stu-id="6113a-134">Apply a <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute to your service contract with the <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> property set to `true`.</span></span>  
  
 <span data-ttu-id="6113a-135">Per ulteriori informazioni sul round trip, vedere [contratti dati compatibili con](./feature-details/forward-compatible-data-contracts.md)le versioni successive.</span><span class="sxs-lookup"><span data-stu-id="6113a-135">For more information about round-tripping, see [Forward-Compatible Data Contracts](./feature-details/forward-compatible-data-contracts.md).</span></span>  
  
## <a name="versioning-when-schema-validation-is-not-required"></a><span data-ttu-id="6113a-136">Controllo delle versioni quando la convalida dello schema non è necessaria</span><span class="sxs-lookup"><span data-stu-id="6113a-136">Versioning When Schema Validation Is Not Required</span></span>  
 <span data-ttu-id="6113a-137">La rigorosa conformità allo schema è richiesta raramente.</span><span class="sxs-lookup"><span data-stu-id="6113a-137">Strict schema compliance is rarely required.</span></span> <span data-ttu-id="6113a-138">Molte piattaforme tollerano elementi aggiuntivi non descritti da un schema.</span><span class="sxs-lookup"><span data-stu-id="6113a-138">Many platforms tolerate extra elements not described by a schema.</span></span> <span data-ttu-id="6113a-139">Fino a quando questo è tollerato, è possibile usare il set completo di funzionalità descritte nei contratti dati di [controllo delle versioni](./feature-details/data-contract-versioning.md) dei contratti dati e di [dati compatibili con](./feature-details/forward-compatible-data-contracts.md) le versioni successive.</span><span class="sxs-lookup"><span data-stu-id="6113a-139">As long as this is tolerated, the full set of features described in [Data Contract Versioning](./feature-details/data-contract-versioning.md) and [Forward-Compatible Data Contracts](./feature-details/forward-compatible-data-contracts.md) can be used.</span></span> <span data-ttu-id="6113a-140">Di seguito sono riportate alcune linee guida consigliate.</span><span class="sxs-lookup"><span data-stu-id="6113a-140">The following guidelines are recommended.</span></span>  
  
 <span data-ttu-id="6113a-141">È necessario attenersi esattamente ad alcune linee guida per inviare versioni nuove di un tipo quando ne è previsto uno precedente o inviare un tipo obsoleto quando ne è previsto uno nuovo.</span><span class="sxs-lookup"><span data-stu-id="6113a-141">Some of the guidelines must be followed exactly in order to send new versions of a type where an older one is expected or send an old one where the new one is expected.</span></span> <span data-ttu-id="6113a-142">Altre linee guida non sono strettamente necessarie, ma sono elencate perché potrebbero essere interessate dagli sviluppi futuri del controllo delle versioni sullo schema.</span><span class="sxs-lookup"><span data-stu-id="6113a-142">Other guidelines are not strictly required, but are listed here because they may be affected by the future of schema versioning.</span></span>  
  
1. <span data-ttu-id="6113a-143">Non controllare le versioni dei contratti dati in base all'ereditarietà del tipo.</span><span class="sxs-lookup"><span data-stu-id="6113a-143">Do not attempt to version data contracts by type inheritance.</span></span> <span data-ttu-id="6113a-144">Per creare versioni più recenti, modificare il contratto dati su un tipo esistente o creare un nuovo tipo non correlato.</span><span class="sxs-lookup"><span data-stu-id="6113a-144">To create later versions, either change the data contract on an existing type or create a new unrelated type.</span></span>  
  
2. <span data-ttu-id="6113a-145">L'utilizzo dell'ereditarietà insieme ai contratti dati è consentito, purché l'ereditarietà non venga usata come un meccanismo di controllo delle versioni e vengano seguite determinate regole.</span><span class="sxs-lookup"><span data-stu-id="6113a-145">The use of inheritance together with data contracts is allowed, provided that inheritance is not used as a versioning mechanism and that certain rules are followed.</span></span> <span data-ttu-id="6113a-146">Se un tipo deriva da un determinato tipo di base, non è possibile fare in modo che derivi da un tipo di base diverso in una versione futura (a meno che abbia lo stesso contratto dati).</span><span class="sxs-lookup"><span data-stu-id="6113a-146">If a type derives from a certain base type, do not make it derive from a different base type in a future version (unless it has the same data contract).</span></span> <span data-ttu-id="6113a-147">Esiste un'unica eccezione a questa condizione: è possibile inserire un tipo nella gerarchia tra un tipo di contratto dati e il relativo tipo di base, ma solo se non contiene membri dati con nomi identici a quelli di altri membri in qualsiasi possibile versione degli altri tipi nella gerarchia.</span><span class="sxs-lookup"><span data-stu-id="6113a-147">There is one exception to this: you can insert a type into the hierarchy between a data contract type and its base type, but only if it does not contain data members with the same names as other members in any possible versions of the other types in the hierarchy.</span></span> <span data-ttu-id="6113a-148">In generale, l'uso di membri dati con nomi identici a livelli diversi della stessa gerarchia di ereditarietà può causare gravi problemi di controllo delle versioni e deve essere evitato.</span><span class="sxs-lookup"><span data-stu-id="6113a-148">In general, using data members with the same names at different levels of the same inheritance hierarchy can lead to serious versioning problems and should be avoided.</span></span>  
  
3. <span data-ttu-id="6113a-149">A partire dalla prima versione di un contratto dati, implementare sempre <xref:System.Runtime.Serialization.IExtensibleDataObject> per attivare le sequenze di andata e ritorno.</span><span class="sxs-lookup"><span data-stu-id="6113a-149">Starting with the first version of a data contract, always implement <xref:System.Runtime.Serialization.IExtensibleDataObject> to enable round-tripping.</span></span> <span data-ttu-id="6113a-150">Per altre informazioni, vedere [Contratti di dati compatibili con versioni successive](./feature-details/forward-compatible-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="6113a-150">For more information, see [Forward-Compatible Data Contracts](./feature-details/forward-compatible-data-contracts.md).</span></span> <span data-ttu-id="6113a-151">Se sono state rilasciate una o più versioni di un tipo senza implementare questa interfaccia, è necessario implementarla nella prossima versione del tipo.</span><span class="sxs-lookup"><span data-stu-id="6113a-151">If you have released one or more versions of a type without implementing this interface, implement it in the next version of the type.</span></span>  
  
4. <span data-ttu-id="6113a-152">Nelle versioni più recenti, non modificare il nome o lo spazio dei nomi del contratto dati.</span><span class="sxs-lookup"><span data-stu-id="6113a-152">In later versions, do not change the data contract name or namespace.</span></span> <span data-ttu-id="6113a-153">Se si modifica il nome o lo spazio dei nomi del tipo sottostante il contratto dati, assicurarsi di mantenere il nome e lo spazio dei nomi del contratto dati usando i meccanismi adatti, ad esempio la proprietà <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> di <xref:System.Runtime.Serialization.DataContractAttribute>.</span><span class="sxs-lookup"><span data-stu-id="6113a-153">If changing the name or namespace of the type underlying the data contract, be sure to preserve the data contract name and namespace by using the appropriate mechanisms, such as the <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> property of the <xref:System.Runtime.Serialization.DataContractAttribute>.</span></span> <span data-ttu-id="6113a-154">Per ulteriori informazioni sulla denominazione, vedere [nomi di contratto dati](./feature-details/data-contract-names.md).</span><span class="sxs-lookup"><span data-stu-id="6113a-154">For more information about naming, see [Data Contract Names](./feature-details/data-contract-names.md).</span></span>  
  
5. <span data-ttu-id="6113a-155">Nelle versioni più recenti, non modificare i nomi di qualsiasi membro dati.</span><span class="sxs-lookup"><span data-stu-id="6113a-155">In later versions, do not change the names of any data members.</span></span> <span data-ttu-id="6113a-156">Se si modifica il nome del campo, della proprietà o dell'evento sottostante il membro dati, usare la proprietà `Name` di <xref:System.Runtime.Serialization.DataMemberAttribute> per mantenere il nome del membro dati esistente.</span><span class="sxs-lookup"><span data-stu-id="6113a-156">If changing the name of the field, property, or event underlying the data member, use the `Name` property of the <xref:System.Runtime.Serialization.DataMemberAttribute> to preserve the existing data member name.</span></span>  
  
6. <span data-ttu-id="6113a-157">Nelle versioni più recenti, non modificare il tipo di qualsiasi campo, proprietà o evento sottostante un membro dati in modo tale che il contratto dati risultante per quel membro dati venga modificato.</span><span class="sxs-lookup"><span data-stu-id="6113a-157">In later versions, do not change the type of any field, property, or event underlying a data member such that the resulting data contract for that data member changes.</span></span> <span data-ttu-id="6113a-158">Tenere presente che i tipi di interfaccia sono equivalenti a <xref:System.Object> per l'identificazione del contratto dati previsto.</span><span class="sxs-lookup"><span data-stu-id="6113a-158">Keep in mind that interface types are equivalent to <xref:System.Object> for the purposes of determining the expected data contract.</span></span>  
  
7. <span data-ttu-id="6113a-159">Nelle versioni più recenti, non modificare l'ordine dei membri dati esistenti impostando la proprietà <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A> dell'attributo <xref:System.Runtime.Serialization.DataMemberAttribute>.</span><span class="sxs-lookup"><span data-stu-id="6113a-159">In later versions, do not change the order of the existing data members by adjusting the <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A> property of the <xref:System.Runtime.Serialization.DataMemberAttribute> attribute.</span></span>  
  
8. <span data-ttu-id="6113a-160">Nelle versioni più recenti, possono essere aggiunti nuovi membri dati.</span><span class="sxs-lookup"><span data-stu-id="6113a-160">In later versions, new data members can be added.</span></span> <span data-ttu-id="6113a-161">Questa operazione deve essere eseguita osservando le regole seguenti:</span><span class="sxs-lookup"><span data-stu-id="6113a-161">They should always follow these rules:</span></span>  
  
    1. <span data-ttu-id="6113a-162">La proprietà <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> deve essere sempre impostata sul valore predefinito `false`.</span><span class="sxs-lookup"><span data-stu-id="6113a-162">The <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> property should always be left at its default value of `false`.</span></span>  
  
    2. <span data-ttu-id="6113a-163">Se un valore predefinito pari a `null` o a zero per il membro non è accettabile, è necessario fornire un metodo di callback mediante <xref:System.Runtime.Serialization.OnDeserializingAttribute> per garantire un'impostazione predefinita adeguata qualora il membro non sia presente nel flusso in ingresso.</span><span class="sxs-lookup"><span data-stu-id="6113a-163">If a default value of `null` or zero for the member is unacceptable, a callback method should be provided using the <xref:System.Runtime.Serialization.OnDeserializingAttribute> to provide a reasonable default in case the member is not present in the incoming stream.</span></span> <span data-ttu-id="6113a-164">Per altre informazioni sul callback, vedere [callback di serializzazione a tolleranza di versione](./feature-details/version-tolerant-serialization-callbacks.md).</span><span class="sxs-lookup"><span data-stu-id="6113a-164">For more information about the callback, see [Version-Tolerant Serialization Callbacks](./feature-details/version-tolerant-serialization-callbacks.md).</span></span>  
  
    3. <span data-ttu-id="6113a-165">È necessario utilizzare la proprietà <xref:System.Runtime.Serialization.DataMemberAttribute.Order?displayProperty=nameWithType> per assicurarsi che tutti i membri dati appena aggiunti vengano visualizzati dopo i membri dati esistenti.</span><span class="sxs-lookup"><span data-stu-id="6113a-165">The <xref:System.Runtime.Serialization.DataMemberAttribute.Order?displayProperty=nameWithType> property should be used to make sure that all of the newly added data members appear after the existing data members.</span></span> <span data-ttu-id="6113a-166">La procedura consigliata per eseguire questa operazione consiste nel verificare che la proprietà `Order` non sia impostata per alcun membro dati nella prima versione del contratto dati.</span><span class="sxs-lookup"><span data-stu-id="6113a-166">The recommended way of doing this is as follows: None of the data members in the first version of the data contract should have their `Order` property set.</span></span> <span data-ttu-id="6113a-167">La proprietà `Order` di tutti i membri dati aggiunti nella versione 2 del contratto dati deve essere impostata su 2.</span><span class="sxs-lookup"><span data-stu-id="6113a-167">All of the data members added in version 2 of the data contract should have their `Order` property set to 2.</span></span> <span data-ttu-id="6113a-168">La proprietà `Order` di tutti i membri dati aggiunti nella versione 3 del contratto dati deve essere impostata su 3 e così via.</span><span class="sxs-lookup"><span data-stu-id="6113a-168">All of the data members added in version 3 of the data contract should have their `Order` set to 3, and so on.</span></span> <span data-ttu-id="6113a-169">È consentito avere più membri dati impostati sullo stesso numero di `Order`.</span><span class="sxs-lookup"><span data-stu-id="6113a-169">It is permissible to have more than one data member set to the same `Order` number.</span></span>  
  
9. <span data-ttu-id="6113a-170">Non rimuovere i membri dati nelle versioni più recenti, anche se per la proprietà <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> è stato lasciato il valore predefinito `false` nelle versioni precedenti.</span><span class="sxs-lookup"><span data-stu-id="6113a-170">Do not remove data members in later versions, even if the <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> property was left at its default property of `false` in prior versions.</span></span>  
  
10. <span data-ttu-id="6113a-171">Non modificare la proprietà `IsRequired` di qualsiasi membro dati esistente nel passaggio da una versione all'altra.</span><span class="sxs-lookup"><span data-stu-id="6113a-171">Do not change the `IsRequired` property on any existing data members from version to version.</span></span>  
  
11. <span data-ttu-id="6113a-172">Per i membri dati richiesti (dove `IsRequired` è `true`), non modificare la proprietà `EmitDefaultValue` nel passaggio da una versione all'altra.</span><span class="sxs-lookup"><span data-stu-id="6113a-172">For required data members (where `IsRequired` is `true`), do not change the `EmitDefaultValue` property from version to version.</span></span>  
  
12. <span data-ttu-id="6113a-173">Non tentare di creare gerarchie di controlli delle versioni sottoposte a branching.</span><span class="sxs-lookup"><span data-stu-id="6113a-173">Do not attempt to create branched versioning hierarchies.</span></span> <span data-ttu-id="6113a-174">Ovvero, deve esistere sempre un percorso, in almeno una direzione, da una qualsiasi versione a un'altra usando solo le modifiche consentite dalle presenti linee guida.</span><span class="sxs-lookup"><span data-stu-id="6113a-174">That is, there should always be a path in at least one direction from any version to any other version using only the changes permitted by these guidelines.</span></span>  
  
     <span data-ttu-id="6113a-175">Ad esempio, se la versione 1 di un contratto dati Person contiene solo il membro dati Name, non è necessario creare la versione 2a del contratto aggiungendo solo il membro Age e la versione 2b aggiungendo solo il membro Address.</span><span class="sxs-lookup"><span data-stu-id="6113a-175">For example, if version 1 of a Person data contract contains only the Name data member, you should not create version 2a of the contract adding only the Age member and version 2b adding only the Address member.</span></span> <span data-ttu-id="6113a-176">Il passaggio dalla versione 2a alla versione 2b coinvolgerebbe la rimozione di Age e l'aggiunta di Address; nella direzione opposta sarebbe necessario rimuovere Address e aggiungere Age.</span><span class="sxs-lookup"><span data-stu-id="6113a-176">Going from 2a to 2b would involve removing Age and adding Address; going in the other direction would entail removing Address and adding Age.</span></span> <span data-ttu-id="6113a-177">La rimozione di membri non è consentita dalle presenti linee guida.</span><span class="sxs-lookup"><span data-stu-id="6113a-177">Removing members is not permitted by these guidelines.</span></span>  
  
13. <span data-ttu-id="6113a-178">In genere, è sconsigliabile creare nuovi sottotipi dei tipi di contratto dati esistenti in una nuova versione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="6113a-178">You should generally not create new subtypes of existing data contract types in a new version of your application.</span></span> <span data-ttu-id="6113a-179">Analogamente, non è consigliabile creare nuovi contratti dati da usare al posto dei membri dati dichiarati come Object o come tipi di interfaccia.</span><span class="sxs-lookup"><span data-stu-id="6113a-179">Likewise, you should not create new data contracts that are used in place of data members declared as Object or as interface types.</span></span> <span data-ttu-id="6113a-180">La creazione di queste nuove classi è consentita solo quando si è sicuri di poter aggiungere i tipi nuovi all'elenco dei tipi noti di tutte le istanze dell'applicazione precedente.</span><span class="sxs-lookup"><span data-stu-id="6113a-180">Creating these new classes is allowed only when you know that you can add the new types to the known types list of all instances of your old application.</span></span> <span data-ttu-id="6113a-181">Ad esempio, nella versione 1 dell'applicazione è possibile avere il tipo di contratto dati LibraryItem con i sottotipi del contratto dati Book e Newspaper.</span><span class="sxs-lookup"><span data-stu-id="6113a-181">For example, in version 1 of your application, you may have the LibraryItem data contract type with the Book and Newspaper data contract subtypes.</span></span> <span data-ttu-id="6113a-182">Pertanto, nell'elenco dei tipi noti di LibraryItem sarebbero presenti Book e Newspaper.</span><span class="sxs-lookup"><span data-stu-id="6113a-182">LibraryItem would then have a known types list that contains Book and Newspaper.</span></span> <span data-ttu-id="6113a-183">Si supponga di aggiungere un tipo Magazine alla versione 2 che è un sottotipo di LibraryItem.</span><span class="sxs-lookup"><span data-stu-id="6113a-183">Suppose you now add a Magazine type in version 2 which is a subtype of LibraryItem.</span></span> <span data-ttu-id="6113a-184">Se si invia un'istanza di Magazine dalla versione 2 alla versione 1, il contratto dati di Magazine non sarà presente nell'elenco dei tipi noti e verrà generata un'eccezione.</span><span class="sxs-lookup"><span data-stu-id="6113a-184">If you send a Magazine instance from version 2 to version 1, the Magazine data contract is not found in the list of known types and an exception is thrown.</span></span>  
  
14. <span data-ttu-id="6113a-185">Non è consigliabile aggiungere o rimuovere membri di enumerazione tra diverse versioni.</span><span class="sxs-lookup"><span data-stu-id="6113a-185">You should not add or remove enumeration members between versions.</span></span> <span data-ttu-id="6113a-186">È inoltre sconsigliabile rinominare i membri di enumerazione, a meno che non si utilizzi la proprietà Name sull'attributo `EnumMemberAttribute` per mantenere gli stessi nomi nel modello del contratto dati.</span><span class="sxs-lookup"><span data-stu-id="6113a-186">You should also not rename enumeration members, unless you use the Name property on the `EnumMemberAttribute` attribute to keep their names in the data contract model the same.</span></span>  
  
15. <span data-ttu-id="6113a-187">Le raccolte sono intercambiabili nel modello del contratto dati, come descritto in [tipi di raccolta nei contratti dati](./feature-details/collection-types-in-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="6113a-187">Collections are interchangeable in the data contract model as described in [Collection Types in Data Contracts](./feature-details/collection-types-in-data-contracts.md).</span></span> <span data-ttu-id="6113a-188">Ciò assicura un elevato grado di flessibilità.</span><span class="sxs-lookup"><span data-stu-id="6113a-188">This allows for a great degree of flexibility.</span></span> <span data-ttu-id="6113a-189">Tuttavia, accertarsi di non modificare inavvertitamente un tipo di raccolta in modo non intercambiabile da una versione all'altra.</span><span class="sxs-lookup"><span data-stu-id="6113a-189">However, make sure that you do not inadvertently change a collection type in a non-interchangeable way from version to version.</span></span> <span data-ttu-id="6113a-190">Ad esempio, non modificare una raccolta non personalizzata (ovvero senza l'attributo `CollectionDataContractAttribute`) in una raccolta personalizzata o una raccolta personalizzata in una non personalizzata.</span><span class="sxs-lookup"><span data-stu-id="6113a-190">For example, do not change from a non-customized collection (that is, without the `CollectionDataContractAttribute` attribute) to a customized one or a customized collection to a non-customized one.</span></span> <span data-ttu-id="6113a-191">Inoltre, non impostare le proprietà su `CollectionDataContractAttribute` da versione a versione.</span><span class="sxs-lookup"><span data-stu-id="6113a-191">Also, do not change the properties on the `CollectionDataContractAttribute` from version to version.</span></span> <span data-ttu-id="6113a-192">L'unica modifica consentita consiste nell'aggiunta di una proprietà Name o Namespace se il nome o lo spazio dei nomi del tipo di raccolta sottostante sono stati modificati ed è necessario uniformare il nome e lo spazio dei nomi del contratto dati a quelli di una versione precedente.</span><span class="sxs-lookup"><span data-stu-id="6113a-192">The only allowed change is adding a Name or Namespace property if the underlying collection type's name or namespace has changed and you need to make its data contract name and namespace the same as in a previous version.</span></span>  
  
 <span data-ttu-id="6113a-193">Alcune delle linee guida elencate possono essere ignorate senza conseguenze se si verificano alcune circostanze speciali.</span><span class="sxs-lookup"><span data-stu-id="6113a-193">Some of the guidelines listed here can be safely ignored when special circumstances apply.</span></span> <span data-ttu-id="6113a-194">Accertarsi di aver compreso tutti gli aspetti della serializzazione, della deserializzazione e dei meccanismi dello schema coinvolti prima di allontanarsi dalle linee guida.</span><span class="sxs-lookup"><span data-stu-id="6113a-194">Make sure you fully understand the serialization, deserialization, and schema mechanisms involved before deviating from the guidelines.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6113a-195">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="6113a-195">See also</span></span>

- <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A>
- <xref:System.Runtime.Serialization.DataContractAttribute>
- <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A>
- <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A>
- <xref:System.Runtime.Serialization.IExtensibleDataObject>
- <xref:System.ServiceModel.ServiceBehaviorAttribute>
- <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A>
- <xref:System.Runtime.Serialization.ExtensionDataObject>
- <xref:System.Runtime.Serialization.OnDeserializingAttribute>
- [<span data-ttu-id="6113a-196">Uso di contratti di dati</span><span class="sxs-lookup"><span data-stu-id="6113a-196">Using Data Contracts</span></span>](./feature-details/using-data-contracts.md)
- [<span data-ttu-id="6113a-197">Controllo delle versioni dei contratti di dati</span><span class="sxs-lookup"><span data-stu-id="6113a-197">Data Contract Versioning</span></span>](./feature-details/data-contract-versioning.md)
- [<span data-ttu-id="6113a-198">Nomi di contratto di dati</span><span class="sxs-lookup"><span data-stu-id="6113a-198">Data Contract Names</span></span>](./feature-details/data-contract-names.md)
- [<span data-ttu-id="6113a-199">Contratti di dati compatibili con versioni successive</span><span class="sxs-lookup"><span data-stu-id="6113a-199">Forward-Compatible Data Contracts</span></span>](./feature-details/forward-compatible-data-contracts.md)
- [<span data-ttu-id="6113a-200">Callback di serializzazione a tolleranza di versione</span><span class="sxs-lookup"><span data-stu-id="6113a-200">Version-Tolerant Serialization Callbacks</span></span>](./feature-details/version-tolerant-serialization-callbacks.md)

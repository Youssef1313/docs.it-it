---
title: Panoramica sul modello dei canali
ms.date: 03/30/2017
helpviewer_keywords:
- channel model [WCF]
ms.assetid: 07a81e11-3911-4632-90d2-cca99825b5bd
ms.openlocfilehash: 362a7392d9dbaedb1942280a6c3b6c8f2139afe5
ms.sourcegitcommit: d2e1dfa7ef2d4e9ffae3d431cf6a4ffd9c8d378f
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/07/2019
ms.locfileid: "70795892"
---
# <a name="channel-model-overview"></a><span data-ttu-id="28cce-102">Panoramica sul modello dei canali</span><span class="sxs-lookup"><span data-stu-id="28cce-102">Channel Model Overview</span></span>
<span data-ttu-id="28cce-103">Lo stack di canali Windows Communication Foundation (WCF) è uno stack di comunicazione a più livelli con uno o più canali che elaborano i messaggi.</span><span class="sxs-lookup"><span data-stu-id="28cce-103">The Windows Communication Foundation (WCF) channel stack is a layered communication stack with one or more channels that process messages.</span></span> <span data-ttu-id="28cce-104">Nella parte inferiore dello stack è presente un canale di trasporto che è responsabile dell'adattamento dello stack dei canali al trasporto sottostante (ad esempio TCP, HTTP, SMTP e altri tipi di trasporto.).</span><span class="sxs-lookup"><span data-stu-id="28cce-104">At the bottom of the stack is a transport channel that is responsible for adapting the channel stack to the underlying transport (for example, TCP, HTTP, SMTP and other types of transport.).</span></span> <span data-ttu-id="28cce-105">I canali forniscono un modello di programmazione di basso livello per l'invio e la ricezione di messaggi.</span><span class="sxs-lookup"><span data-stu-id="28cce-105">Channels provide a low-level programming model for sending and receiving messages.</span></span> <span data-ttu-id="28cce-106">Questo modello di programmazione si basa su diverse interfacce e altri tipi noti collettivamente come modello di canale WCF.</span><span class="sxs-lookup"><span data-stu-id="28cce-106">This programming model relies on several interfaces and other types collectively known as the WCF channel model.</span></span> <span data-ttu-id="28cce-107">In questo argomento vengono illustrate le forme del canale, la costruzione di un listener del canale di base (sul servizio) e di una channel factory (sul client).</span><span class="sxs-lookup"><span data-stu-id="28cce-107">This topic discusses channel shapes, the construction of a basic channel listener (on the service) and channel factory (on the client).</span></span>  
  
## <a name="channel-stack"></a><span data-ttu-id="28cce-108">Stack dei canali</span><span class="sxs-lookup"><span data-stu-id="28cce-108">Channel Stack</span></span>  
 <span data-ttu-id="28cce-109">Gli endpoint WCF comunicano con il mondo utilizzando uno stack di comunicazione denominato stack dei canali.</span><span class="sxs-lookup"><span data-stu-id="28cce-109">WCF endpoints communicate with the world using a communication stack called the channel stack.</span></span> <span data-ttu-id="28cce-110">Nel diagramma seguente lo stack dei canali viene messo a confronto con altri stack di comunicazione, ad esempio TCP/IP.</span><span class="sxs-lookup"><span data-stu-id="28cce-110">The following diagram compares the channel stack with other communication stacks, for example TCP/IP.</span></span>  
  
 <span data-ttu-id="28cce-111">![Modello di canale](./media/wcfc-channelstackhighlevelc.gif "wcfc_ChannelStackHighLevelc")</span><span class="sxs-lookup"><span data-stu-id="28cce-111">![Channel Model](./media/wcfc-channelstackhighlevelc.gif "wcfc_ChannelStackHighLevelc")</span></span>  
  
 <span data-ttu-id="28cce-112">In primo luogo, le analogie: In entrambi i casi, ogni livello dello stack fornisce un'astrazione del mondo al di sotto di tale livello ed espone tale astrazione solo al livello immediatamente superiore.</span><span class="sxs-lookup"><span data-stu-id="28cce-112">First, the similarities: In both cases, each layer of the stack provides some abstraction of the world below that layer and exposed that abstraction only to the layer directly above it.</span></span> <span data-ttu-id="28cce-113">Ogni livello utilizza l'astrazione del solo livello direttamente inferiore.</span><span class="sxs-lookup"><span data-stu-id="28cce-113">Each layer uses the abstraction of only the layer directly below it.</span></span> <span data-ttu-id="28cce-114">In entrambi casi, quando due stack comunicano, ogni livello comunica con il livello corrispondente dell'altro stack; ad esempio, il livello IP comunica con il livello IP e il livello TCP con il livello TCP e così via.</span><span class="sxs-lookup"><span data-stu-id="28cce-114">Also in both cases, when two stacks communicate, each layer communicates with the corresponding layer in the other stack, for example, the IP layer communicates with the IP layer and the TCP layer with the TCP layer, and so on.</span></span>  
  
 <span data-ttu-id="28cce-115">A questo punto, le differenze: Mentre lo stack TCP è stato progettato per fornire un'astrazione della rete fisica, lo stack dei canali è progettato per fornire un'astrazione di non solo come il messaggio viene recapitato, ovvero il trasporto, ma anche altre funzionalità come il messaggio o il protocollo viene utilizzato per la comunicazione, incluso il trasporto ma molto altro.</span><span class="sxs-lookup"><span data-stu-id="28cce-115">Now, the differences: While the TCP stack was designed to provide an abstraction of the physical network, the channel stack is designed to provide an abstraction of not only how the message is delivered, that is, the transport, but also other features such as what is in the message or what protocol is used for communication, including the transport but much more than that.</span></span> <span data-ttu-id="28cce-116">Ad esempio, l'elemento di associazione di una sessione affidabile fa parte dello stack dei canali ma non è al di sotto del trasporto o il trasporto stesso.</span><span class="sxs-lookup"><span data-stu-id="28cce-116">For example, reliable session binding element is part of the channel stack but is not below the transport or the transport itself.</span></span> <span data-ttu-id="28cce-117">Questa astrazione viene realizzata richiedendo al canale più in basso nello stack di adattare il protocollo di trasporto sottostante all'architettura dello stack dei canali e quindi affidandosi ai canali di livello superiore per fornire funzionalità di comunicazione quali le garanzie di affidabilità e la protezione.</span><span class="sxs-lookup"><span data-stu-id="28cce-117">This abstraction is achieved by requiring the bottom channel in the stack to adapt the underlying transport protocol to the channel stack architecture and then relying on channels further up in the stack to provide communication features such as reliability guarantees and security.</span></span>  
  
 <span data-ttu-id="28cce-118">I messaggi attraversano lo stack di comunicazione come oggetti <xref:System.ServiceModel.Channels.Message>.</span><span class="sxs-lookup"><span data-stu-id="28cce-118">Messages flow through the communication stack as <xref:System.ServiceModel.Channels.Message> objects.</span></span> <span data-ttu-id="28cce-119">Come illustrato nella figura precedente, il canale più in basso è detto canale di trasporto.</span><span class="sxs-lookup"><span data-stu-id="28cce-119">As shown in figure above, the bottom channel is called a transport channel.</span></span> <span data-ttu-id="28cce-120">Tale canale è responsabile dell'invio e della ricezione di messaggi da e verso altre parti</span><span class="sxs-lookup"><span data-stu-id="28cce-120">It is the channel that is responsible for sending and receiving messages to and from other parties.</span></span> <span data-ttu-id="28cce-121">e questo include la responsabilità di trasformare l'oggetto <xref:System.ServiceModel.Channels.Message> a da e verso il formato utilizzato per comunicare con le altre parti.</span><span class="sxs-lookup"><span data-stu-id="28cce-121">This includes the responsibility of transforming the <xref:System.ServiceModel.Channels.Message> object to and from the format used to communicate with other parties.</span></span> <span data-ttu-id="28cce-122">Al di sopra del canale di trasporto possono essere presenti più canali di protocollo, ognuno responsabile di fornire una funzione di comunicazione, ad esempio le garanzie di recapito affidabile.</span><span class="sxs-lookup"><span data-stu-id="28cce-122">Above the transport channel there can be any number of protocol channels each responsible for providing a communication function such as reliable delivery guarantees.</span></span> <span data-ttu-id="28cce-123">I canali di protocollo operano sui messaggi che li attraversano sotto forma di oggetti <xref:System.ServiceModel.Channels.Message>.</span><span class="sxs-lookup"><span data-stu-id="28cce-123">Protocol channels operate on messages flowing through them in the form of the <xref:System.ServiceModel.Channels.Message> object.</span></span> <span data-ttu-id="28cce-124">Solitamente trasformano il messaggio, ad esempio, aggiungendo intestazioni o crittografando il corpo, oppure inviano e ricevono propri messaggi di controllo di protocollo, ad esempio messaggi di conferma di ricezione.</span><span class="sxs-lookup"><span data-stu-id="28cce-124">They typically either transform the message, for example, by adding headers or encrypting the body, or send and receive their own protocol control messages, for example, receipt acknowledgments.</span></span>  
  
## <a name="channel-shapes"></a><span data-ttu-id="28cce-125">Forme del canale</span><span class="sxs-lookup"><span data-stu-id="28cce-125">Channel Shapes</span></span>  
 <span data-ttu-id="28cce-126">Ogni canale implementa una o più interfacce definite interfacce di forma del canale o forme del canale.</span><span class="sxs-lookup"><span data-stu-id="28cce-126">Each channel implements one or more interfaces known as channel shape interfaces or channel shapes.</span></span> <span data-ttu-id="28cce-127">Tali forme forniscono i metodi orientati alla comunicazione, ad esempio invio e ricezione o richiesta e risposta, implementati dal canale e chiamati dall'utente del canale.</span><span class="sxs-lookup"><span data-stu-id="28cce-127">Those channel shapes provide the communication-oriented methods such as send and receive or request and reply that the channel implements and the user of the channel calls.</span></span> <span data-ttu-id="28cce-128">Alla base delle forme del canale si trova l' <xref:System.ServiceModel.Channels.IChannel> interfaccia, ovvero un'interfaccia che fornisce un `GetProperty` \<metodo T > concepito come meccanismo a più livelli per accedere a funzionalità arbitrarie esposte da canali nello stack.</span><span class="sxs-lookup"><span data-stu-id="28cce-128">At the base of the channel shapes is the <xref:System.ServiceModel.Channels.IChannel> interface, which is an interface that provides a `GetProperty`\<T> method intended as a layered mechanism to access arbitrary features exposed by channels in the stack.</span></span> <span data-ttu-id="28cce-129">Le cinque forme del canale che estendono <xref:System.ServiceModel.Channels.IChannel> sono:</span><span class="sxs-lookup"><span data-stu-id="28cce-129">The five channel shapes that extend <xref:System.ServiceModel.Channels.IChannel> are:</span></span>  
  
- <xref:System.ServiceModel.Channels.IInputChannel>  
  
- <xref:System.ServiceModel.Channels.IOutputChannel>  
  
- <xref:System.ServiceModel.Channels.IRequestChannel>  
  
- <xref:System.ServiceModel.Channels.IReplyChannel>  
  
- <xref:System.ServiceModel.Channels.IDuplexChannel>  
  
 <span data-ttu-id="28cce-130">Ognuna di queste forme dispone inoltre di un equivalente che estende <xref:System.ServiceModel.Channels.ISessionChannel%601?displayProperty=nameWithType> per supportare le sessioni.</span><span class="sxs-lookup"><span data-stu-id="28cce-130">Further, each of these shapes has an equivalent that extends <xref:System.ServiceModel.Channels.ISessionChannel%601?displayProperty=nameWithType> to support sessions.</span></span> <span data-ttu-id="28cce-131">Si tratta di:</span><span class="sxs-lookup"><span data-stu-id="28cce-131">These are:</span></span>  
  
- <xref:System.ServiceModel.Channels.IInputSessionChannel>  
  
- <xref:System.ServiceModel.Channels.IOutputSessionChannel>  
  
- <xref:System.ServiceModel.Channels.IRequestSessionChannel>  
  
- <xref:System.ServiceModel.Channels.IReplySessionChannel>  
  
- <xref:System.ServiceModel.Channels.IDuplexSessionChannel>  
  
 <span data-ttu-id="28cce-132">Le forme del canale sono basate su alcuni dei modelli di scambio di messaggi fondamentali supportati dai protocolli di trasporto esistenti.</span><span class="sxs-lookup"><span data-stu-id="28cce-132">The channel shapes are patterned after some of the fundamental message exchange patterns supported by existing transport protocols.</span></span> <span data-ttu-id="28cce-133">Ad esempio, la messaggistica unidirezionale corrisponde a una <xref:System.ServiceModel.Channels.IInputChannel> / <xref:System.ServiceModel.Channels.IReplyChannel> <xref:System.ServiceModel.Channels.IRequestChannel> / <xref:System.ServiceModel.Channels.IOutputChannel> coppia, Request/Reply corrisponde a coppie e le comunicazioni duplex bidirezionali corrispondono a <xref:System.ServiceModel.Channels.IDuplexChannel> che estende sia <xref:System.ServiceModel.Channels.IInputChannel> <xref:System.ServiceModel.Channels.IOutputChannel>che.</span><span class="sxs-lookup"><span data-stu-id="28cce-133">For example, one-way messaging corresponds to an <xref:System.ServiceModel.Channels.IInputChannel>/<xref:System.ServiceModel.Channels.IOutputChannel> pair, request-reply corresponds to <xref:System.ServiceModel.Channels.IRequestChannel>/<xref:System.ServiceModel.Channels.IReplyChannel> pairs and two-way duplex communications corresponds to <xref:System.ServiceModel.Channels.IDuplexChannel> (which extends both <xref:System.ServiceModel.Channels.IInputChannel> and <xref:System.ServiceModel.Channels.IOutputChannel>).</span></span>  
  
## <a name="programming-with-the-channel-stack"></a><span data-ttu-id="28cce-134">Programmazione con lo stack dei canali</span><span class="sxs-lookup"><span data-stu-id="28cce-134">Programming with the Channel Stack</span></span>  
 <span data-ttu-id="28cce-135">Gli stack dei canali vengono in genere creati usando un modello factory in cui un'associazione crea lo stack dei canali.</span><span class="sxs-lookup"><span data-stu-id="28cce-135">Channel stacks are typically created using a factory pattern where a binding creates the channel stack.</span></span> <span data-ttu-id="28cce-136">Sul lato di invio, viene utilizzata un'associazione per creare una classe <xref:System.ServiceModel.ChannelFactory>, che a sua volta crea uno stack dei canali e restituisce un riferimento al canale superiore nello stack.</span><span class="sxs-lookup"><span data-stu-id="28cce-136">On the send side, a binding is used to build a <xref:System.ServiceModel.ChannelFactory>, which in turn builds a channel stack and returns a reference to the top channel in the stack.</span></span> <span data-ttu-id="28cce-137">L'applicazione può quindi utilizzare questo canale per inviare i messaggi.</span><span class="sxs-lookup"><span data-stu-id="28cce-137">The application can then use this channel to send messages.</span></span> <span data-ttu-id="28cce-138">Per ulteriori informazioni, vedere [programmazione a livello di canale del client](client-channel-level-programming.md).</span><span class="sxs-lookup"><span data-stu-id="28cce-138">For more information, see [Client Channel-Level Programming](client-channel-level-programming.md).</span></span>  
  
 <span data-ttu-id="28cce-139">Sul lato ricevente, viene utilizzata un'associazione per creare un'interfaccia <xref:System.ServiceModel.Channels.IChannelListener> che resta in ascolto dei messaggi in ingresso.</span><span class="sxs-lookup"><span data-stu-id="28cce-139">On the receive side a binding is used to build a <xref:System.ServiceModel.Channels.IChannelListener>, which listens for incoming messages.</span></span> <span data-ttu-id="28cce-140">L'interfaccia <xref:System.ServiceModel.Channels.IChannelListener> fornisce i messaggi all'applicazione in ascolto creando stack di canali e passando il riferimento all'applicazione al canale superiore.</span><span class="sxs-lookup"><span data-stu-id="28cce-140">The <xref:System.ServiceModel.Channels.IChannelListener> provides messages to the listening application by creating channel stacks and handing the application reference to the top channel.</span></span> <span data-ttu-id="28cce-141">L'applicazione utilizza quindi questo canale per ricevere i messaggi in ingresso.</span><span class="sxs-lookup"><span data-stu-id="28cce-141">The application then uses this channel to receive incoming messages.</span></span> <span data-ttu-id="28cce-142">Per ulteriori informazioni, vedere [programmazione a livello di canale del servizio](service-channel-level-programming.md).</span><span class="sxs-lookup"><span data-stu-id="28cce-142">For more information, see [Service Channel-Level Programming](service-channel-level-programming.md).</span></span>  
  
## <a name="the-channel-object-model"></a><span data-ttu-id="28cce-143">Il modello a oggetti dei canali</span><span class="sxs-lookup"><span data-stu-id="28cce-143">The Channel Object Model</span></span>  
 <span data-ttu-id="28cce-144">Il modello a oggetti dei canali costituisce il set principale di interfacce necessario per implementare canali, listener di canale e channel factory.</span><span class="sxs-lookup"><span data-stu-id="28cce-144">The channel object model is the core set of interfaces required to implement channels, channel listeners and channel factories.</span></span> <span data-ttu-id="28cce-145">Sono inoltre disponibili alcune classi di base fornite per semplificare le implementazioni personalizzate.</span><span class="sxs-lookup"><span data-stu-id="28cce-145">There are also some base classes provided to assist in custom implementations.</span></span>  
  
 <span data-ttu-id="28cce-146">I listener di canale sono responsabili dell'ascolto dei messaggi in ingresso e quindi del loro recapito al livello superiore attraverso canali creati dai listener stessi.</span><span class="sxs-lookup"><span data-stu-id="28cce-146">Channel listeners are responsible for listening for incoming messages, then delivering them to the layer above through channels created by the channel listener.</span></span>  
  
 <span data-ttu-id="28cce-147">Le channel factory sono responsabili della creazione dei canali utilizzati per l'invio dei messaggi e della chiusura di tutti i canali creati quando vengono chiuse.</span><span class="sxs-lookup"><span data-stu-id="28cce-147">Channel factories are responsible for creating channels that are used for sending messages and for closing all channels they created when the channel factory is closed.</span></span>  
  
 <span data-ttu-id="28cce-148"><xref:System.ServiceModel.ICommunicationObject> è l'interfaccia principale che definisce la macchina a stati di base implementata da tutti gli oggetti di comunicazione.</span><span class="sxs-lookup"><span data-stu-id="28cce-148"><xref:System.ServiceModel.ICommunicationObject> is the core interface that defines the basic state machine that all communication objects implement.</span></span> <span data-ttu-id="28cce-149"><xref:System.ServiceModel.Channels.CommunicationObject> fornisce un'implementazione di tale interfaccia principale da cui è possibile derivare altre classi del canale anziché implementare nuovamente l'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="28cce-149"><xref:System.ServiceModel.Channels.CommunicationObject> provides an implementation of this core interface that other channel classes can derive from rather than re-implementing the interface.</span></span> <span data-ttu-id="28cce-150">Questa operazione non è tuttavia obbligatoria: un canale personalizzato può implementare direttamente <xref:System.ServiceModel.ICommunicationObject> e non ereditare da <xref:System.ServiceModel.Channels.CommunicationObject>.</span><span class="sxs-lookup"><span data-stu-id="28cce-150">However, this is not required: a custom channel can implement <xref:System.ServiceModel.ICommunicationObject> directly and not inherit from <xref:System.ServiceModel.Channels.CommunicationObject>.</span></span> <span data-ttu-id="28cce-151">Nessuna delle classi della Figura 3 viene considerata parte del modello dei canali; esse sono helper disponibili per gli implementatori di canali personalizzati che desiderano creare canali.</span><span class="sxs-lookup"><span data-stu-id="28cce-151">None of the classes in Figure 3 are considered part of the channel model; they are helpers available to custom channel implementers who want to build channels.</span></span>  
  
 <span data-ttu-id="28cce-152">![Modello di canale](./media/wcfc-wcfcchannelsigure3omumtreec.gif "wcfc_WCFCChannelsigure3OMUMTreec")</span><span class="sxs-lookup"><span data-stu-id="28cce-152">![Channel model](./media/wcfc-wcfcchannelsigure3omumtreec.gif "wcfc_WCFCChannelsigure3OMUMTreec")</span></span>  
  
 <span data-ttu-id="28cce-153">Negli argomenti seguenti vengono illustrati il modello a oggetti dei canali e varie aree di sviluppo che facilitano la creazione di canali personalizzati.</span><span class="sxs-lookup"><span data-stu-id="28cce-153">The following topics describe the channel object model as well as various development areas that help build custom channels.</span></span>  
  
|<span data-ttu-id="28cce-154">Argomento</span><span class="sxs-lookup"><span data-stu-id="28cce-154">Topic</span></span>|<span data-ttu-id="28cce-155">Descrizione</span><span class="sxs-lookup"><span data-stu-id="28cce-155">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="28cce-156">Servizio Listener del canale e canali</span><span class="sxs-lookup"><span data-stu-id="28cce-156">Service: Channel Listeners and Channels</span></span>](service-channel-listeners-and-channels.md)|<span data-ttu-id="28cce-157">Descrive i listener di canale in ascolto di canali in ingresso in un'applicazione di servizio.</span><span class="sxs-lookup"><span data-stu-id="28cce-157">Describes channel listeners, which listen for incoming channels in a service application.</span></span>|  
|[<span data-ttu-id="28cce-158">Client Channel factory e canali</span><span class="sxs-lookup"><span data-stu-id="28cce-158">Client: Channel Factories and Channels</span></span>](client-channel-factories-and-channels.md)|<span data-ttu-id="28cce-159">Descrive le channel factory che creano canali per la connessione a un'applicazione di servizio.</span><span class="sxs-lookup"><span data-stu-id="28cce-159">Describes channel factories, which create channels to connect to a service application.</span></span>|  
|[<span data-ttu-id="28cce-160">Informazioni sui cambiamenti di stato</span><span class="sxs-lookup"><span data-stu-id="28cce-160">Understanding State Changes</span></span>](understanding-state-changes.md)|<span data-ttu-id="28cce-161">Descrive come l'interfaccia <xref:System.ServiceModel.ICommunicationObject?displayProperty=nameWithType> modella le modifiche dello stato nei canali.</span><span class="sxs-lookup"><span data-stu-id="28cce-161">Describes how the <xref:System.ServiceModel.ICommunicationObject?displayProperty=nameWithType> interface models state changes in channels.</span></span>|  
|[<span data-ttu-id="28cce-162">Scelta di un modello di scambio di messaggi</span><span class="sxs-lookup"><span data-stu-id="28cce-162">Choosing a Message Exchange Pattern</span></span>](choosing-a-message-exchange-pattern.md)|<span data-ttu-id="28cce-163">Descrive i sei modelli base di scambio dei messaggi supportati dai canali.</span><span class="sxs-lookup"><span data-stu-id="28cce-163">Describes the six basic message exchange patterns that channels can support.</span></span>|  
|[<span data-ttu-id="28cce-164">Gestione di eccezioni ed errori</span><span class="sxs-lookup"><span data-stu-id="28cce-164">Handling Exceptions and Faults</span></span>](handling-exceptions-and-faults.md)|<span data-ttu-id="28cce-165">Descrive come gestire errori ed eccezioni nei canali personalizzati.</span><span class="sxs-lookup"><span data-stu-id="28cce-165">Describes how to handle faults and exceptions in custom channels.</span></span>|  
|[<span data-ttu-id="28cce-166">Supporto di configurazione e metadati</span><span class="sxs-lookup"><span data-stu-id="28cce-166">Configuration and Metadata Support</span></span>](configuration-and-metadata-support.md)|<span data-ttu-id="28cce-167">Descrive come supportare l'utilizzo di canali personalizzati dal modello dell'applicazione e come esportare e importare metadati utilizzando associazioni ed elementi di associazione.</span><span class="sxs-lookup"><span data-stu-id="28cce-167">Describes how to support the use of custom channels from the application model and how to export and import metadata using bindings and binding elements.</span></span>|

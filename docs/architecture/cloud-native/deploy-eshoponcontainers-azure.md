---
title: Distribuzione di eShopOnContainers in Azure
description: Distribuzione dell'applicazione eShopOnContainers tramite il servizio Kubernetes di Azure, Helm e DevSpaces.
ms.date: 06/30/2019
ms.openlocfilehash: 21033cc904dc595193c69f3452ce2522740f8ff6
ms.sourcegitcommit: 55f438d4d00a34b9aca9eedaac3f85590bb11565
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/23/2019
ms.locfileid: "71183273"
---
# <a name="deploying-eshoponcontainers-to-azure"></a><span data-ttu-id="0422b-103">Distribuzione di eShopOnContainers in Azure</span><span class="sxs-lookup"><span data-stu-id="0422b-103">Deploying eShopOnContainers to Azure</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="0422b-104">La logica che supporta l'applicazione eShopOnContainers può essere supportata da Azure usando un'ampia gamma di servizi.</span><span class="sxs-lookup"><span data-stu-id="0422b-104">The logic supporting the eShopOnContainers application can be supported by Azure using a variety of services.</span></span> <span data-ttu-id="0422b-105">L'approccio consigliato consiste nell'usare Kubernetes con il servizio Azure Kubernetes (AKS).</span><span class="sxs-lookup"><span data-stu-id="0422b-105">The recommended approach is to leverage Kubernetes using Azure Kubernetes Service (AKS).</span></span> <span data-ttu-id="0422b-106">Questo può essere combinato con la distribuzione Helm per garantire una configurazione dell'infrastruttura facilmente ripetuta.</span><span class="sxs-lookup"><span data-stu-id="0422b-106">This can be combined with Helm deployment to ensure easily repeated infrastructure configuration.</span></span> <span data-ttu-id="0422b-107">Facoltativamente, gli sviluppatori possono sfruttare Azure Dev Spaces per Kubernetes come parte del processo di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="0422b-107">Optionally, developers can leverage Azure Dev Spaces for Kubernetes as part of their development process.</span></span> <span data-ttu-id="0422b-108">Un'altra opzione consiste nell'ospitare la funzionalità dell'app usando funzionalità senza server di Azure, ad esempio funzioni di Azure e app per la logica di Azure.</span><span class="sxs-lookup"><span data-stu-id="0422b-108">Another option is to host the functionality of the app using Azure Serverless features like Azure Functions and Azure Logic Apps.</span></span>

## <a name="azure-kubernetes-service"></a><span data-ttu-id="0422b-109">Servizio Azure Kubernetes</span><span class="sxs-lookup"><span data-stu-id="0422b-109">Azure Kubernetes Service</span></span>

<span data-ttu-id="0422b-110">Se si vuole ospitare l'applicazione eShopOnContainers nel proprio cluster AKS, il primo passaggio consiste nel creare il cluster.</span><span class="sxs-lookup"><span data-stu-id="0422b-110">If you'd like to host the eShopOnContainers application in your own AKS cluster, the first step is to create your cluster.</span></span> <span data-ttu-id="0422b-111">A tale scopo, è possibile usare la portale di Azure, che illustra i passaggi necessari oppure è possibile usare l'interfaccia della riga di comando di Azure per assicurarsi di abilitare il controllo degli accessi in base al ruolo (RBAC) e il routing delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="0422b-111">You can do this using the Azure portal, which will walk you through the required steps, or you can use the Azure CLI, taking care to ensure you enable Role-Based Access Control (RBAC) and application routing when you do so.</span></span> <span data-ttu-id="0422b-112">La documentazione di eShopOnContainers descrive i passaggi necessari per la creazione di un cluster AKS.</span><span class="sxs-lookup"><span data-stu-id="0422b-112">The eShopOnContainers' documentation describes the steps involved in creating your own AKS cluster.</span></span> <span data-ttu-id="0422b-113">Una volta creato il cluster, è necessario abilitare l'accesso al dashboard di Kubernetes. a questo punto, è possibile passare al dashboard di Kubernetes per gestire il cluster.</span><span class="sxs-lookup"><span data-stu-id="0422b-113">Once the cluster is created, you must enable access to the Kubernetes dashboard, at which point you should be able to browse to the Kubernetes dashboard to manage the cluster.</span></span>

<span data-ttu-id="0422b-114">Una volta che il cluster è stato creato e configurato, è possibile distribuirvi l'applicazione usando Helm e Tiller.</span><span class="sxs-lookup"><span data-stu-id="0422b-114">Once the cluster has been created and configured, you can deploy the application to it using Helm and Tiller.</span></span>

## <a name="deploying-to-azure-kubernetes-service-using-helm"></a><span data-ttu-id="0422b-115">Distribuzione nel servizio Azure Kubernetes tramite Helm</span><span class="sxs-lookup"><span data-stu-id="0422b-115">Deploying to Azure Kubernetes Service using Helm</span></span>

<span data-ttu-id="0422b-116">Le distribuzioni di base a AKS possono usare script CLI personalizzati o semplici file di distribuzione, ma le applicazioni più complesse devono usare uno strumento di gestione delle dipendenze come Helm.</span><span class="sxs-lookup"><span data-stu-id="0422b-116">Basic deployments to AKS may use custom CLI scripts or simple deployment files, but more complex applications should use a dependency management tool like Helm.</span></span> <span data-ttu-id="0422b-117">Helm è gestito da cloud-native Computing Foundation e consente di definire, installare e aggiornare le applicazioni Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="0422b-117">Helm is maintained by the Cloud-native Computing Foundation and helps you define, install, and upgrade Kubernetes applications.</span></span> <span data-ttu-id="0422b-118">Helm è costituito da un client della riga di comando, Helm, che usa i grafici Helm e un componente in cluster, Tiller.</span><span class="sxs-lookup"><span data-stu-id="0422b-118">Helm is composed of a command-line client, helm, which uses helm charts, and an in-cluster component, Tiller.</span></span> <span data-ttu-id="0422b-119">I grafici Helm usano file con formato YAML standard per descrivere un set correlato di risorse Kubernetes e vengono in genere sottoposte a controllo delle versioni insieme all'applicazione che descrivono.</span><span class="sxs-lookup"><span data-stu-id="0422b-119">Helm Charts use standard YAML-formatted files to describe a related set of Kubernetes resources and are typically versioned alongside the application they describe.</span></span> <span data-ttu-id="0422b-120">I grafici Helm variano da semplici a complessi, a seconda dei requisiti dell'installazione che descrivono.</span><span class="sxs-lookup"><span data-stu-id="0422b-120">Helm Charts range from simple to complex depending on the requirements of the installation they describe.</span></span>

<span data-ttu-id="0422b-121">I grafici Helm di eShopOnContainers sono disponibili nella cartella/K8S/Helm.</span><span class="sxs-lookup"><span data-stu-id="0422b-121">You'll find the eShopOnContainers helm charts in the /k8s/helm folder.</span></span> <span data-ttu-id="0422b-122">La figura 2-6 illustra come i diversi componenti dell'applicazione sono organizzati in una struttura di cartelle utilizzata da Helm per definire e distribuire le distribuzioni.</span><span class="sxs-lookup"><span data-stu-id="0422b-122">Figure 2-6 shows how the different components of the application are organized into a folder structure used by helm to define and managed deployments.</span></span>

<span data-ttu-id="0422b-123">![architettura](./media/eshoponcontainers-helm-folder.png)
eShopOnContainers**Figura 2-6**.</span><span class="sxs-lookup"><span data-stu-id="0422b-123">![eShopOnContainers Architecture](./media/eshoponcontainers-helm-folder.png)
**Figure 2-6**.</span></span> <span data-ttu-id="0422b-124">Cartella Helm eShopOnContainers.</span><span class="sxs-lookup"><span data-stu-id="0422b-124">The eShopOnContainers helm folder.</span></span>

<span data-ttu-id="0422b-125">Ogni singolo componente viene installato utilizzando un `helm install` comando.</span><span class="sxs-lookup"><span data-stu-id="0422b-125">Each individual component is installed using a `helm install` command.</span></span> <span data-ttu-id="0422b-126">Questi comandi sono facilmente scritti e eShopOnContainers fornisce uno script "deploy all" che esegue il ciclo dei diversi componenti e li installa usando i rispettivi grafici Helm.</span><span class="sxs-lookup"><span data-stu-id="0422b-126">These commands are easily scripted, and eShopOnContainers provides a "deploy all" script that loops through the different components and installs them using their respective helm charts.</span></span> <span data-ttu-id="0422b-127">Il risultato è un processo ripetibile, con versione con l'applicazione nel controllo del codice sorgente, che chiunque nel team può distribuire in un cluster AKS con un comando di script a una riga.</span><span class="sxs-lookup"><span data-stu-id="0422b-127">The result is a repeatable process, versioned with the application in source control, that anyone on the team can deploy to an AKS cluster with a one-line script command.</span></span> <span data-ttu-id="0422b-128">In particolare in combinazione con Azure Dev Spaces, questo consente agli sviluppatori di diagnosticare e testare facilmente le proprie modifiche alle proprie app native basate su microservizi.</span><span class="sxs-lookup"><span data-stu-id="0422b-128">Especially when combined with Azure Dev Spaces, this makes it easy for developers to diagnose and test their individual changes to their microservice-based cloud-native apps.</span></span>

## <a name="azure-dev-spaces"></a><span data-ttu-id="0422b-129">Azure Dev Spaces</span><span class="sxs-lookup"><span data-stu-id="0422b-129">Azure Dev Spaces</span></span>

<span data-ttu-id="0422b-130">Azure Dev Spaces aiuta i singoli sviluppatori a ospitare la propria versione univoca dei cluster AKS in Azure durante lo sviluppo.</span><span class="sxs-lookup"><span data-stu-id="0422b-130">Azure Dev Spaces helps individual developers host their own unique version of AKS clusters in Azure during development.</span></span> <span data-ttu-id="0422b-131">Questo consente di ridurre al minimo i requisiti dei computer locali e consente ai membri del team di verificare rapidamente il comportamento delle modifiche in un ambiente AKS reale.</span><span class="sxs-lookup"><span data-stu-id="0422b-131">This minimizes local machine requirements and allows team members to quickly see how their changes will behave in a real AKS environment.</span></span> <span data-ttu-id="0422b-132">Azure Dev Spaces offre un'interfaccia della riga di comando per gli sviluppatori da usare per gestire gli spazi di sviluppo e per eseguire la distribuzione in uno spazio di sviluppo figlio specifico, se necessario.</span><span class="sxs-lookup"><span data-stu-id="0422b-132">Azure Dev Spaces offers a CLI for developers to use to manage their dev spaces and to deploy to a specific child dev space as needed.</span></span> <span data-ttu-id="0422b-133">Si fa riferimento a ogni spazio dev figlio usando un sottodominio URL univoco, consentendo distribuzioni affiancate di cluster modificati in modo che i singoli sviluppatori possano evitare conflitti con il lavoro in corso.</span><span class="sxs-lookup"><span data-stu-id="0422b-133">Each child dev space is referenced using a unique URL subdomain, allowing side-by-side deployments of modified clusters so that individual developers can avoid conflicting with each other's work in progress.</span></span> <span data-ttu-id="0422b-134">Nella figura 2-7 è possibile vedere come Developer Susie ha distribuito una propria versione del microservizio Bikes nello spazio di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="0422b-134">In Figure 2-7 you can see how developer Susie has deployed her own version of the Bikes microservice into her dev space.</span></span> <span data-ttu-id="0422b-135">Potrà quindi testare le modifiche usando un URL personalizzato che inizia con il nome dello spazio (susie.s.dev.myapp.eus.azds.io).</span><span class="sxs-lookup"><span data-stu-id="0422b-135">She's then able to test her changes using a custom URL starting with the name of her space (susie.s.dev.myapp.eus.azds.io).</span></span>

<span data-ttu-id="0422b-136">![architettura](./media/azure-devspaces-one.png)
eShopOnContainers**Figura 2-7**.</span><span class="sxs-lookup"><span data-stu-id="0422b-136">![eShopOnContainers Architecture](./media/azure-devspaces-one.png)
**Figure 2-7**.</span></span> <span data-ttu-id="0422b-137">Developer Susie distribuisce la propria versione del microservizio Bikes e ne esegue il test.</span><span class="sxs-lookup"><span data-stu-id="0422b-137">Developer Susie deploys her own version of the Bikes microservice and tests it.</span></span>

<span data-ttu-id="0422b-138">Allo stesso tempo, lo sviluppatore Giorgio sta personalizzando il microservizio prenotazioni e deve testare le proprie modifiche.</span><span class="sxs-lookup"><span data-stu-id="0422b-138">At the same time, developer John is customizing the Reservations microservice and needs to test his changes.</span></span> <span data-ttu-id="0422b-139">È in grado di distribuire le modifiche nel proprio spazio di sviluppo senza conflitti con le modifiche di Susie, come illustrato nella figura 2-8.</span><span class="sxs-lookup"><span data-stu-id="0422b-139">He's able to deploy his changes to his own dev space without conflicting with Susie's changes as shown in Figure 2-8.</span></span> <span data-ttu-id="0422b-140">Può testare le modifiche usando il proprio URL, che è preceduto dal nome dello spazio (john.s.dev.myapp.eus.azds.io).</span><span class="sxs-lookup"><span data-stu-id="0422b-140">He can test his changes using his own URL which is prefixed with the name of his space (john.s.dev.myapp.eus.azds.io).</span></span>

<span data-ttu-id="0422b-141">![architettura](./media/azure-devspaces-two.png)
eShopOnContainers**Figura 2-8**.</span><span class="sxs-lookup"><span data-stu-id="0422b-141">![eShopOnContainers Architecture](./media/azure-devspaces-two.png)
**Figure 2-8**.</span></span> <span data-ttu-id="0422b-142">Developer Giorgio distribuisce la propria versione del microservizio prenotazioni e la testa senza conflitti con altri sviluppatori.</span><span class="sxs-lookup"><span data-stu-id="0422b-142">Developer John deploys his own version of the Reservations microservice and tests it without conflicting with other developers.</span></span>

<span data-ttu-id="0422b-143">Con Azure Dev Spaces, i team possono lavorare direttamente con AKS mentre cambiano, distribuiscono e verificano le modifiche in modo indipendente.</span><span class="sxs-lookup"><span data-stu-id="0422b-143">Using Azure Dev Spaces, teams can work directly with AKS while independently changing, deploying, and testing their changes.</span></span> <span data-ttu-id="0422b-144">Questo approccio riduce la necessità di ambienti host dedicati distinti, perché ogni sviluppatore ha in effetti un proprio ambiente AKS.</span><span class="sxs-lookup"><span data-stu-id="0422b-144">This approach reduces the need for separate dedicated hosted environments since every developer effectively has their own AKS environment.</span></span> <span data-ttu-id="0422b-145">Gli sviluppatori possono lavorare con Azure Dev Spaces usando l'interfaccia della riga di comando o avviare l'applicazione per Azure Dev Spaces direttamente da Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="0422b-145">Developers can work with Azure Dev Spaces using its CLI or launch their application to Azure Dev Spaces directly from Visual Studio.</span></span> [<span data-ttu-id="0422b-146">Altre informazioni sul funzionamento di Azure Dev Spaces e sulla configurazione.</span><span class="sxs-lookup"><span data-stu-id="0422b-146">Learn more about how Azure Dev Spaces works and is configured.</span></span>](https://docs.microsoft.com/azure/dev-spaces/how-dev-spaces-works)

## <a name="azure-functions-and-logic-apps-serverless"></a><span data-ttu-id="0422b-147">Funzioni di Azure e app per la logica (senza server)</span><span class="sxs-lookup"><span data-stu-id="0422b-147">Azure Functions and Logic Apps (Serverless)</span></span>

<span data-ttu-id="0422b-148">L'esempio eShopOnContainers include il supporto per tenere traccia delle campagne di marketing online.</span><span class="sxs-lookup"><span data-stu-id="0422b-148">The eShopOnContainers sample includes support for tracking online marketing campaigns.</span></span> <span data-ttu-id="0422b-149">Una funzione di Azure viene usata per eseguire il pull dei dettagli della campagna di marketing per un determinato ID campagna.</span><span class="sxs-lookup"><span data-stu-id="0422b-149">An Azure Function is used to pull marketing campaign details for a given campaign ID.</span></span> <span data-ttu-id="0422b-150">Invece di creare un'applicazione ASP.NET Core completa a questo scopo, un singolo endpoint funzione di Azure è più semplice e sufficiente.</span><span class="sxs-lookup"><span data-stu-id="0422b-150">Rather than creating a complete ASP.NET Core application for this purpose, a single Azure Function endpoint is simpler and sufficient.</span></span> <span data-ttu-id="0422b-151">Funzioni di Azure include un modello di compilazione e distribuzione molto più semplice rispetto alle applicazioni full ASP.NET Core, specialmente se configurato per l'esecuzione in Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="0422b-151">Azure Functions have a much simpler build and deployment model than full ASP.NET Core applications, especially when configured to run in Kubernetes.</span></span> <span data-ttu-id="0422b-152">La distribuzione della funzione viene scritta tramite script usando i modelli di Azure Resource Manager (ARM) e l'interfaccia della riga di comando di Azure.</span><span class="sxs-lookup"><span data-stu-id="0422b-152">Deploying the function is scripted using Azure Resource Manager (ARM) templates and the Azure CLI.</span></span> <span data-ttu-id="0422b-153">Questo microservizio di dettagli della campagna non è destinato al cliente e non ha gli stessi requisiti del negozio online, rendendolo un candidato ideale per funzioni di Azure.</span><span class="sxs-lookup"><span data-stu-id="0422b-153">This campaign details microservice isn't customer-facing and doesn't have the same requirements as the online store, making it a good candidate for Azure Functions.</span></span> <span data-ttu-id="0422b-154">La funzione richiede che alcune configurazioni funzionino correttamente, ad esempio i dati della stringa di connessione del database e le impostazioni dell'URI di base dell'immagine.</span><span class="sxs-lookup"><span data-stu-id="0422b-154">The function requires some configuration to work properly, such as database connection string data and image base URI settings.</span></span> <span data-ttu-id="0422b-155">Le funzioni di Azure vengono configurate nel portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="0422b-155">You configure Azure Functions in the Azure Portal.</span></span>

## <a name="references"></a><span data-ttu-id="0422b-156">Riferimenti</span><span class="sxs-lookup"><span data-stu-id="0422b-156">References</span></span>

- <span data-ttu-id="0422b-157">[EShopOnContainers Creare un cluster Kubernetes in AKS](https://github.com/dotnet-architecture/eShopOnContainers/wiki/Deploy-to-Azure-Kubernetes-Service-(AKS)#create-kubernetes-cluster-in-aks)</span><span class="sxs-lookup"><span data-stu-id="0422b-157">[eShopOnContainers: Create Kubernetes cluster in AKS](https://github.com/dotnet-architecture/eShopOnContainers/wiki/Deploy-to-Azure-Kubernetes-Service-(AKS)#create-kubernetes-cluster-in-aks)</span></span>
- [<span data-ttu-id="0422b-158">EShopOnContainers Azure Dev Spaces</span><span class="sxs-lookup"><span data-stu-id="0422b-158">eShopOnContainers: Azure Dev Spaces</span></span>](https://github.com/dotnet-architecture/eShopOnContainers/wiki/Azure-Dev-Spaces)
- [<span data-ttu-id="0422b-159">Azure Dev Spaces</span><span class="sxs-lookup"><span data-stu-id="0422b-159">Azure Dev Spaces</span></span>](https://docs.microsoft.com/azure/dev-spaces/about)

>[!div class="step-by-step"]
><span data-ttu-id="0422b-160">[Precedente](map-eshoponcontainers-azure-services.md)
>[Successivo](centralized-configuration.md)</span><span class="sxs-lookup"><span data-stu-id="0422b-160">[Previous](map-eshoponcontainers-azure-services.md)
[Next](centralized-configuration.md)</span></span>

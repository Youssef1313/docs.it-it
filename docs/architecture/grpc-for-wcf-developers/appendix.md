---
title: Appendice-gRPC per sviluppatori WCF
description: Discussione sulle transazioni distribuite e la relativa implementazione nelle architetture moderne di microservizi.
ms.date: 09/02/2019
ms.openlocfilehash: 9931681727f921e007c2f80852ad0e69cd7288de
ms.sourcegitcommit: 5fb5b6520b06d7f5e6131ec2ad854da302a28f2e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 12/03/2019
ms.locfileid: "74711475"
---
# <a name="appendix-a---transactions"></a><span data-ttu-id="7e0a3-103">Appendice A-transazioni</span><span class="sxs-lookup"><span data-stu-id="7e0a3-103">Appendix A - Transactions</span></span>

<span data-ttu-id="7e0a3-104">Windows Communication Foundation (WCF) supporta le transazioni distribuite, consentendo di eseguire operazioni atomiche su più servizi.</span><span class="sxs-lookup"><span data-stu-id="7e0a3-104">Windows Communication Foundation (WCF) supports distributed transactions, allowing you to perform atomic operations across multiple services.</span></span> <span data-ttu-id="7e0a3-105">Questa funzionalità è basata sul [Distributed Transaction Coordinator Microsoft](https://docs.microsoft.com/previous-versions/windows/desktop/ms684146(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="7e0a3-105">This functionality is based on the [Microsoft Distributed Transaction Coordinator](https://docs.microsoft.com/previous-versions/windows/desktop/ms684146(v=vs.85)).</span></span>

<span data-ttu-id="7e0a3-106">Nel panorama dei microservizi più recenti, questo tipo di elaborazione automatica delle transazioni distribuite non è possibile.</span><span class="sxs-lookup"><span data-stu-id="7e0a3-106">In the newer microservices landscape, this type of automated distributed transaction processing isn't possible.</span></span> <span data-ttu-id="7e0a3-107">Sono presenti troppe tecnologie diverse, tra cui database relazionali, archivi dati NoSQL e sistemi di messaggistica.</span><span class="sxs-lookup"><span data-stu-id="7e0a3-107">There are too many different technologies involved, including relational databases, NoSQL data stores, and messaging systems.</span></span> <span data-ttu-id="7e0a3-108">Potrebbe inoltre essere presente una combinazione di sistemi operativi, linguaggi di programmazione e Framework in uso in un unico ambiente.</span><span class="sxs-lookup"><span data-stu-id="7e0a3-108">There might also be a mix of operating systems, programming languages, and frameworks in use in a single environment.</span></span>

<span data-ttu-id="7e0a3-109">La transazione distribuita WCF è un'implementazione di ciò che è noto come [commit a due fasi (2PC)](https://en.wikipedia.org/wiki/Two-phase_commit_protocol).</span><span class="sxs-lookup"><span data-stu-id="7e0a3-109">WCF distributed transaction is an implementation of what is known as a [two-phase commit (2PC)](https://en.wikipedia.org/wiki/Two-phase_commit_protocol).</span></span> <span data-ttu-id="7e0a3-110">È possibile implementare le transazioni 2PC manualmente coordinando i messaggi tra i servizi, creando transazioni aperte all'interno di ogni servizio e inviando messaggi di commit o rollback, a seconda dell'esito positivo o negativo.</span><span class="sxs-lookup"><span data-stu-id="7e0a3-110">You can implement 2PC transactions manually by coordinating messages across services, creating open transactions within each service, and sending commit or rollback messages, depending upon success or failure.</span></span> <span data-ttu-id="7e0a3-111">Tuttavia, la complessità legata alla gestione di 2PC può aumentare esponenzialmente Man mano che i sistemi evolvono.</span><span class="sxs-lookup"><span data-stu-id="7e0a3-111">However, the complexity involved in managing 2PC can increase exponentially as systems evolve.</span></span> <span data-ttu-id="7e0a3-112">Le transazioni aperte contengono blocchi di database che possono influire negativamente sulle prestazioni o, peggio, causare deadlock tra servizi.</span><span class="sxs-lookup"><span data-stu-id="7e0a3-112">Open transactions hold database locks that can negatively affect performance, or, worse, cause cross-service deadlocks.</span></span>

<span data-ttu-id="7e0a3-113">Se possibile, è preferibile evitare completamente le transazioni distribuite.</span><span class="sxs-lookup"><span data-stu-id="7e0a3-113">If possible, it's best to avoid distributed transactions altogether.</span></span> <span data-ttu-id="7e0a3-114">Se due elementi di dati sono collegati in modo da richiedere aggiornamenti atomici, è consigliabile gestirli entrambi con lo stesso servizio.</span><span class="sxs-lookup"><span data-stu-id="7e0a3-114">If two items of data are so linked as to require atomic updates, consider handling them both with the same service.</span></span> <span data-ttu-id="7e0a3-115">Applicare tali modifiche atomiche utilizzando una singola richiesta o messaggio al servizio.</span><span class="sxs-lookup"><span data-stu-id="7e0a3-115">Apply those atomic changes by using a single request or message to that service.</span></span>

<span data-ttu-id="7e0a3-116">Se ciò non è possibile, un'alternativa consiste nell'usare il [modello saga](https://microservices.io/patterns/data/saga.html).</span><span class="sxs-lookup"><span data-stu-id="7e0a3-116">If that isn't possible, then one alternative is to use the [Saga pattern](https://microservices.io/patterns/data/saga.html).</span></span> <span data-ttu-id="7e0a3-117">In una saga gli aggiornamenti vengono elaborati in sequenza; Quando ogni aggiornamento ha esito positivo, viene attivato quello successivo.</span><span class="sxs-lookup"><span data-stu-id="7e0a3-117">In a saga, updates are processed sequentially; as each update succeeds, the next one is triggered.</span></span> <span data-ttu-id="7e0a3-118">Questi trigger possono essere propagati dal servizio al servizio o gestiti da un coordinatore della saga o da un agente di orchestrazione.</span><span class="sxs-lookup"><span data-stu-id="7e0a3-118">These triggers can be propagated from service to service, or managed by a saga coordinator or orchestrator.</span></span> <span data-ttu-id="7e0a3-119">Se un aggiornamento non riesce in qualsiasi momento durante il processo, i servizi che hanno già completato gli aggiornamenti applicano una logica specifica per invertirli.</span><span class="sxs-lookup"><span data-stu-id="7e0a3-119">If an update fails at any point during the process, the services that have already completed their updates apply specific logic to reverse them.</span></span>

<span data-ttu-id="7e0a3-120">Un'altra opzione prevede l'uso della progettazione basata su domini (DDD) e della separazione di responsabilità di Command/query (CQRS), come descritto nell' [e-book di microservizi .NET](https://docs.microsoft.com/dotnet/architecture/microservices/microservice-ddd-cqrs-patterns/).</span><span class="sxs-lookup"><span data-stu-id="7e0a3-120">Another option is to use Domain Driven Design (DDD) and Command/Query Responsibility Segregation (CQRS), as described in the [.NET Microservices e-book](https://docs.microsoft.com/dotnet/architecture/microservices/microservice-ddd-cqrs-patterns/).</span></span> <span data-ttu-id="7e0a3-121">In particolare, l'uso di eventi del dominio o di origine [eventi](https://martinfowler.com/eaaDev/EventSourcing.html) può contribuire a garantire che gli aggiornamenti siano coerenti, se non immediatamente applicati.</span><span class="sxs-lookup"><span data-stu-id="7e0a3-121">In particular, using domain events or [event sourcing](https://martinfowler.com/eaaDev/EventSourcing.html) can help to ensure that updates are consistently, if not immediately, applied.</span></span>

>[!div class="step-by-step"]
>[<span data-ttu-id="7e0a3-122">Precedente</span><span class="sxs-lookup"><span data-stu-id="7e0a3-122">Previous</span></span>](application-performance-management.md)

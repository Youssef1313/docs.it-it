---
title: Appendice-gRPC per sviluppatori WCF
description: Discussione sulle transazioni distribuite e la relativa implementazione nelle architetture moderne di microservizi.
author: markrendle
ms.date: 09/02/2019
ms.openlocfilehash: d181eb07dd50ed338d02edb1908626e6ca3fb56c
ms.sourcegitcommit: 337bdc5a463875daf2cc6883e5a2da97d56f5000
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/24/2019
ms.locfileid: "72846726"
---
# <a name="appendix-a---transactions"></a><span data-ttu-id="6b752-103">Appendice A-transazioni</span><span class="sxs-lookup"><span data-stu-id="6b752-103">Appendix A - Transactions</span></span>

<span data-ttu-id="6b752-104">Windows Communication Foundation (WCF) supportava le transazioni distribuite, consentendo l'esecuzione di operazioni atomiche su più servizi.</span><span class="sxs-lookup"><span data-stu-id="6b752-104">Windows Communication Foundation (WCF) supported distributed transactions, allowing atomic operations to be performed across multiple services.</span></span> <span data-ttu-id="6b752-105">Questa funzionalità è basata sul [Distributed Transaction Coordinator Microsoft](https://docs.microsoft.com/previous-versions/windows/desktop/ms684146(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="6b752-105">This functionality was based on the [Microsoft Distributed Transaction Coordinator](https://docs.microsoft.com/previous-versions/windows/desktop/ms684146(v=vs.85)).</span></span>

<span data-ttu-id="6b752-106">Nel panorama dei microservizi moderni, questo tipo di elaborazione automatica delle transazioni distribuite non è possibile.</span><span class="sxs-lookup"><span data-stu-id="6b752-106">In the modern microservices landscape, this type of automated distributed transaction processing isn't possible.</span></span> <span data-ttu-id="6b752-107">Sono disponibili troppe tecnologie diverse, tra cui database relazionali, archivi dati NoSQL e sistemi di messaggistica, senza menzionare la combinazione di sistemi operativi, linguaggi di programmazione e Framework che possono essere utilizzati in un unico ambiente.</span><span class="sxs-lookup"><span data-stu-id="6b752-107">There are too many different technologies at play, including relational databases, NoSQL data stores, and messaging systems, not to mention the mix of operating systems, programming languages and frameworks that may be used in a single environment.</span></span>

<span data-ttu-id="6b752-108">La transazione distribuita WCF è un'implementazione di ciò che è noto come [commit a due fasi (2PC)](https://en.wikipedia.org/wiki/Two-phase_commit_protocol).</span><span class="sxs-lookup"><span data-stu-id="6b752-108">The WCF distributed transaction is an implementation of what is known as a [two-phase commit (2PC)](https://en.wikipedia.org/wiki/Two-phase_commit_protocol).</span></span> <span data-ttu-id="6b752-109">È possibile implementare manualmente le transazioni 2PC coordinando i messaggi tra i servizi, creando transazioni aperte all'interno di ogni servizio e inviando messaggi di "commit" o "rollback" a seconda dell'esito positivo o negativo.</span><span class="sxs-lookup"><span data-stu-id="6b752-109">It's possible to implement 2PC transactions manually by coordinating messages across services, creating open transactions within each service and sending "commit" or "rollback" messages depending upon success or failure.</span></span> <span data-ttu-id="6b752-110">Tuttavia, la complessità interessata alla gestione di 2PC può aumentare in modo esponenziale con l'evolversi dei sistemi e le transazioni aperte contengono blocchi di database che possono influire negativamente sulle prestazioni o, peggio, causare deadlock tra servizi.</span><span class="sxs-lookup"><span data-stu-id="6b752-110">However, the complexity that is involved in managing 2PC can increase exponentially as systems evolve, and open transactions hold database locks that can negatively impact performance or, worse, cause cross-service deadlocks.</span></span>

<span data-ttu-id="6b752-111">Se possibile, è preferibile evitare completamente le transazioni distribuite.</span><span class="sxs-lookup"><span data-stu-id="6b752-111">If possible, it's best to avoid distributed transactions altogether.</span></span> <span data-ttu-id="6b752-112">Se due elementi di dati sono collegati in modo da richiedere aggiornamenti atomici, è consigliabile gestirli entrambi con lo stesso servizio e applicare tali modifiche atomiche utilizzando una singola richiesta o messaggio al servizio.</span><span class="sxs-lookup"><span data-stu-id="6b752-112">If two items of data are so linked as to require atomic updates, consider handling them both with the same service, and applying those atomic changes using a single request or message to that service.</span></span>

<span data-ttu-id="6b752-113">Se ciò non è possibile, un'alternativa consiste nell'usare il [modello saga](https://microservices.io/patterns/data/saga.html).</span><span class="sxs-lookup"><span data-stu-id="6b752-113">If that isn't possible, then one alternative is to use the [Saga pattern](https://microservices.io/patterns/data/saga.html).</span></span> <span data-ttu-id="6b752-114">In una saga gli aggiornamenti vengono elaborati in sequenza; Poiché ogni aggiornamento ha esito positivo, viene attivato quello successivo.</span><span class="sxs-lookup"><span data-stu-id="6b752-114">In a saga, updates are processing sequentially; as each update succeeds the next one is triggered.</span></span> <span data-ttu-id="6b752-115">Questi trigger possono essere propagati dal servizio al servizio o gestiti da un coordinatore della saga o da un "agente di orchestrazione".</span><span class="sxs-lookup"><span data-stu-id="6b752-115">These triggers can be propagated from service to service, or managed by a saga coordinator or "orchestrator".</span></span> <span data-ttu-id="6b752-116">Se un aggiornamento non riesce in qualsiasi momento durante il processo, i servizi che hanno già completato gli aggiornamenti applicano una logica specifica per invertirli.</span><span class="sxs-lookup"><span data-stu-id="6b752-116">If an update fails at any point during the process, the services that have already completed their updates apply specific logic to reverse them.</span></span>

<span data-ttu-id="6b752-117">Un'altra opzione prevede l'uso della progettazione basata su domini (DDD) e della separazione di responsabilità di Command/query (CQRS), come descritto nell' [e-book di microservizi .NET](https://docs.microsoft.com/dotnet/architecture/microservices/microservice-ddd-cqrs-patterns/).</span><span class="sxs-lookup"><span data-stu-id="6b752-117">Another option is to use Domain Driven Design (DDD) and Command/Query Responsibility Segregation (CQRS), as described in the [.NET Microservices e-book](https://docs.microsoft.com/dotnet/architecture/microservices/microservice-ddd-cqrs-patterns/).</span></span> <span data-ttu-id="6b752-118">In particolare, l'uso di eventi del dominio o di origine [eventi](https://martinfowler.com/eaaDev/EventSourcing.html) può contribuire a garantire che gli aggiornamenti siano costantemente&mdash;se non&mdash;applicati immediatamente.</span><span class="sxs-lookup"><span data-stu-id="6b752-118">In particular, using domain events or [event sourcing](https://martinfowler.com/eaaDev/EventSourcing.html) can help to ensure that updates are consistently&mdash;if not immediately&mdash;applied.</span></span>

>[!div class="step-by-step"]
>[<span data-ttu-id="6b752-119">Precedente</span><span class="sxs-lookup"><span data-stu-id="6b752-119">Previous</span></span>](application-performance-management.md)
